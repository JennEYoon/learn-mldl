!function(e){function t(t){for(var n,i,r=t[0],a=t[1],s=0,u=[];s<r.length;s++)i=r[s],o[i]&&u.push(o[i][0]),o[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(c&&c(t);u.length;)u.shift()()}var n={},o={11:0};function i(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.e=function(e){var t=[],n=o[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise(function(t,i){n=o[e]=[t,i]});t.push(n[2]=r);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+""+({0:"vendors~bookPage~catalogModule~discussionModule~editorPage~exerciseSuitePage~freePreviewManager~geoM~74cc4642",1:"vendors~bookPage~discussionModule~editorPage~exerciseSuitePage~freePreviewManager~geoMapModule~helpI~8421f058",2:"vendors~bookPage~geoMapModule~micropurchase~searchModule~shoppingCartModule~unlockManager~unlockModal",3:"vbook-ui~exerciseSuitePage~exercises~tryItManager",4:"vbook-ui~micropurchase~unlockManager~unlockModal",5:"default~editorPage~epubPage",6:"vbook-ui~discussionModule~searchModule",7:"vbook-ui~exerciseSuitePage~exercises",8:"vendors~bookPage~editorPage",9:"vendors~exercises~profileImageUpload",10:"vendors~exercises~tryItManager",12:"audioModule",13:"bookPage",14:"booksModule",15:"catalogModule",16:"catalogPage",17:"discussionModule",18:"editorPage",19:"epubPage",20:"exerciseSuitePage",21:"exercises",22:"freePreviewManager",23:"geoMapModule",24:"helpInfoFeedbackModule",25:"landingPage",26:"libraryPage",27:"loginManager",28:"micropurchase",30:"profileImageUpload",31:"promoManager",32:"searchModule",33:"shoppingCartModule",34:"tryItManager",35:"tryItPage",36:"unlockManager",37:"unlockModal",38:"unlockText",39:"vbook-ui~discussionModule",40:"vbook-ui~geoMapModule",41:"vbook-ui~searchModule",42:"vbook-ui~shoppingCartModule",43:"vendors~codemirror",44:"vendors~esprima",45:"vendors~helpInfoFeedbackModule",46:"vendors~landingPage",48:"vendors~profileImageUpload",49:"wishListManager"}[e]||e)+".chunk.js?"+{0:"4e7b7cc3c8b1267e53bb",1:"9883ca3f3b501b8ffc80",2:"e66067ef09e4137e9bf6",3:"7282e58774d429f84cda",4:"eb90b2acfc03de74c93e",5:"40c5a234bf5b0c22343b",6:"d1a55aabd5a3af16bdec",7:"04413c1ea77023930275",8:"6c614b1600c8a6ea933f",9:"a7fab7edd7823288c323",10:"18193450769611d0f97c",12:"adbb36457e9f4d8cb290",13:"87b41c8ba9ac388ac880",14:"9a39f97675819f3937b1",15:"a1d0125c2593c0013eee",16:"c679f3c2ce597e74ebc7",17:"ddf7b9f4b0ad08d79c14",18:"602304e8da68bc9dbced",19:"87e6189372d0e7f104af",20:"b4168a73cc550b47833d",21:"71eace7fede54dff4bbc",22:"447d6011dc3aecde4128",23:"5353642ae371a8c0939c",24:"be1c634358b517f5e4d4",25:"23f54827f5a583b936fd",26:"a5d7e8f932dbf1c6187a",27:"cad240d34c58079115a5",28:"058b0cad82c80bff893f",30:"1fd06e4d62deee5ded3f",31:"bdb17153ae88a20c005a",32:"e8b02619d921d454ba5b",33:"694c83fb123d3430c242",34:"2ac3099f9e0220f24845",35:"5ffaaa4e7a1481102892",36:"d92b93abc255eaa3100a",37:"5afb4bd5e1c2e206317c",38:"a818fced6fb1e9835382",39:"4104ecf9b39861de011c",40:"342bd5acc1208bf023b9",41:"21148b16d5fb001e89f1",42:"07f5cb9827dc7480e353",43:"b5f08e500d4aea80762b",44:"09dde7971f5018a30e28",45:"84308d2b8fea7e68b7bf",46:"03d0af1a8c798ab7dc47",48:"098480712c3ed35d3f99",49:"d148cf9909c8689c47b9"}[e]}(e);var c=new Error;a=function(t){s.onerror=s.onload=null,clearTimeout(u);var n=o[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",c.name="ChunkLoadError",c.type=i,c.request=r,n[1](c)}o[e]=void 0}};var u=setTimeout(function(){a({type:"timeout",target:s})},12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(n,o,function(t){return e[t]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://d1hmx3o2etrakk.cloudfront.net/bin/js/",i.oe=function(e){throw console.error(e),e};var r=window.webpackJsonp=window.webpackJsonp||[],a=r.push.bind(r);r.push=t,r=r.slice();for(var s=0;s<r.length;s++)t(r[s]);var c=a;i(i.s=308)}({0:function(e,t,n){"use strict";var o="",i="",r="",a="",s="",c="",u="",l="";o="livebook.manning.com",i="dpzbhybb2pdcj.cloudfront.net",r="https://www.manning.com/",a="https://livebook.manning.com/",s="https://livevideo.manning.com/",l="https://d1hmx3o2etrakk.cloudfront.net/",c="https://images.manning.com/",u="https://dpzbhybb2pdcj.cloudfront.net/";var d=function(){function e(){this.platform="",this.marketplaceBaseUrl=r,this.liveBookBaseUrl=a,this.liveVideoBaseUrl=s,this.marketplaceBaseImageUrl=c,this.liveBookBaseImageUrl=u,this.appRoot=""+this.getProtocol()+o+"/",this.awsPublicUrl=""+this.getProtocol()+i}return e.prototype.getProtocol=function(){return document.location.href.startsWith("https")?"https://":"http://"},e.prototype.getLivebookCdn=function(){return l},e.prototype.getLivebookBaseUrl=function(){return a},e.prototype.getLivevideoBaseUrl=function(){return s},e.prototype.navigateToLocation=function(e){e.startsWith(".")&&(e=e.substring(1)),page.redirect(e)},e.prototype.getFromS3=function(e,t,n,o){void 0===o&&(o=!0),$.ajax({url:e,dataType:o?"json":"text",crossDomain:!0}).done(function(e){return t(e)}).fail(function(e){return n(e)})},e.prototype.attemptLogin=function(e,t,n,o,i){void 0===i&&(i=!0),$.ajax({url:e,type:"post",data:JSON.stringify(o)||{},dataType:i?"json":"text",contentType:i?"application/json":"application/x-www-form-urlencoded",crossDomain:this.isCrossDomain(e),xhrFields:{withCredentials:!0}}).done(function(e){return t(e)}).fail(function(e){return n(e)})},e.prototype.getFromOurBackend=function(e,t,n,o,i,r,a,s){void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===a&&(a=!1),void 0===s&&(s=!1),this.interactWithOurBackend(e,"get",t,n,o,i,r,a,s)},e.prototype.postToOurBackend=function(e,t,n,o,i,r,a,s){return void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===a&&(a=!1),void 0===s&&(s=!1),this.interactWithOurBackend(e,"post",t,n,o,i,r,a,s)},e.prototype.interactWithOurBackend=function(e,t,n,o,i,r,a,s,c){void 0===r&&(r=!0),void 0===a&&(a=!0),void 0===s&&(s=!1),void 0===c&&(c=!1),i=Object.assign({},i,{platform:this.platform});var u={url:e,type:t,async:a,data:c?JSON.stringify(i||{}):i||{},dataType:r?"json":"text",crossDomain:this.isCrossDomain(e),xhrFields:{withCredentials:!0}};return c&&(u.contentType="application/json; charset=utf-8"),$.ajax(u).done(function(e){return n(e)}).fail(function(e){o(e)})},e.prototype.isCrossDomain=function(e){return!0},e.prototype.getAbsoluteUrl=function(e){return""+this.appRoot+e},e.prototype.getClientAbsoluteUrl=function(e){return""+document.location.origin+e},e.prototype.getAwsUrl=function(e){return""+this.getAwsPublic()+e},e.prototype.getLiveVideoUrl=function(e){return s+(s.endsWith("/")?"":"/")+e},e.prototype.getBookCoverUrl=function(e){return this.getAwsUrl("/"+e+"/Figures/cover.jpg")},e.prototype.getInteractiveCodeUrl=function(e,t){return this.getAwsUrl("/"+e+"/interactive/"+t)},e.prototype.getMarketplaceProductCoverUrl=function(e){return c+"180/225/resize/"+e},e.prototype.getMarketplaceHiqhQualityProductCoverUrl=function(e){return c+"720/960/resize/"+e},e.prototype.getMarketplaceProductUrl=function(e,t){return r+(r.endsWith("/")?"":"/")+(t?"livevideo":"books")+"/"+e},e.prototype.getMarketplaceUrl=function(e){return r+(r.endsWith("/")?"":"/")+e},e.prototype.getProductionMarketplaceUrl=function(e){return"https://www.manning.com/"+e},e.prototype.isAbsoluteUrl=function(e){return!!e&&(e.startsWith("http://")||e.startsWith("https://"))},e.prototype.getMarketplaceS3Url=function(e){return"https://manning-content.s3.amazonaws.com/"+e},e.prototype.getBookUrlFromBook=function(e){return"string"==typeof e?this.getBookUrl(e):e?this.getBookUrl(e.slug):""},e.prototype.getBookUrl=function(e){return encodeURI("/book/"+e)},e.prototype.getAbsoluteBookElementUrl=function(e,t,n){return this.getAbsoluteUrl(this.getBookElementUrl(e,t,n).substring(1))},e.prototype.getBookElementUrl=function(e,t,n,o){return this.getBookPageUrl("book",e,t,n,o)},e.prototype.getBookExercisesElementUrl=function(e,t,n,o){return this.getBookPageUrl("exercises",e,t,n,o)},e.prototype.getBookPageUrl=function(e,t,n,o,i){var r="/book/"+t+"/";return n?((n||o)&&(n||(n="chapter-1"),r+=n+"/",o&&(r+="v-"+o+"/"),i&&(r+="r-"+i+"/")),encodeURI(r)):r},e.prototype.getAwsPublic=function(){return this.awsPublicUrl},e.prototype.deleteCookie=function(e,t){void 0===t&&(t="/"),document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT; domain=.manning.com; path="+t},e.prototype.hasCookie=function(e){return(document.cookie||"").indexOf(e)>=0},e.prototype.hasSsoCookie=function(){return this.hasCookie("CASTGC")},e.prototype.getCookie=function(e){var t,n,o,i;if(n=e+"=",o=(t=document.cookie).indexOf("; "+n),i=t.length,-1!==o)o+=2;else if(-1===(o=t.indexOf(n))||0!==o)return null;return-1!==t.indexOf(";",o)&&(i=t.indexOf(";",o)),decodeURI(t.substring(o+n.length,i)).replace(/"/g,"")},e.prototype.isAdditionalInstruction=function(e){return localStorage&&localStorage.getItem("additionalInstruction")==e},e.prototype.addAdditionalInstructionToExecuteAfterReload=function(e){localStorage&&localStorage.setItem("additionalInstruction",e)},e.prototype.removeAdditionalInstruction=function(){localStorage&&localStorage.removeItem("additionalInstruction")},e.prototype.reloadPage=function(){location.reload(!0)},e}();t.a=new d},109:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){function e(e,t,n,o,i){this.shortName=e,this.title=t,this.productType=n,this.price=o,this.partialBookOwnership=i}return e.prototype.isAudio=function(){return"AUDIO"===this.productType},e.prototype.isBook=function(){return"EBOOK"===this.productType||"COMBO"===this.productType||"PDF"===this.productType||"LIVEBOOK"==this.productType},e.isAcceptableProductType=function(e){return"AUDIO"===(e=(e||"").toUpperCase())||"EBOOK"===e||"COMBO"===e||"PDF"===e||"LIVEBOOK"==e||"LIVEAUDIO"==e},e}(),i=function(){function e(e,t,n,o,i){this.id=e,this.manningId=t,this.price=n,this.productType=o,this.unitAmountDiscounted=i}return e.prototype.isAudioOffering=function(){return"AUDIO"===this.productType||"LIVEAUDIO"===this.productType||"liveAudio"===this.productType},e.prototype.isEBookOffering=function(){return"EBOOK"===this.productType},e.prototype.isComboOffering=function(){return"COMBO"===this.productType},e.productTypes=["EBOOK","AUDIO","LIVEAUDIO","liveAudio","COMBO"],e}();t.b=i},110:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(3),i=n(68),r=n(12),a=n(116),s=new(function(){function e(){}return e.prototype.initialize=function(e,t,n){var o=this;this.getUnlockManagerSource().then(function(n){return n.UnlockContentManager.initialize(e,t)}),this.getModalSource().then(function(n){return n.UnlockModal.initialize(e,t)}),this.getUnlockTextSource().then(function(n){n.UnlockText.initialize(e,t)});var s=this.getFreePreviewManagerSource();e.isOpen?s.then(function(n){return n.FreePreviewManager.initialize(e,t)}):Promise.all([s,i.a.getProductDiscounts(e,a.a.getNewUserDiscountCode())]).then(function(n){var i=n[0].FreePreviewManager;e.isOpen=!r.a.isEmptyObject(n[1])&&o.isNotNewUserDiscount(n[1]),i.initialize(e,t)}).catch(function(n){s.then(function(n){return n.FreePreviewManager.initialize(e,t)})})},e.prototype.clean=function(){this.unlockManagerSourcePromise&&(this.getUnlockManagerSource().then(function(e){return e.UnlockContentManager.clean()}),this.getModalSource().then(function(e){return e.UnlockModal.clean()}),this.getUnlockTextSource().then(function(e){return e.UnlockText.clean()}),this.getFreePreviewManagerSource().then(function(e){return e.FreePreviewManager.clean()}))},e.prototype.tryToSearchUnlockFragmentInCurrentBookElement=function(e){this.getUnlockManagerSource().then(function(t){return t.UnlockContentManager.tryToSearchUnlockFragmentInCurrentBookElement(e)})},e.prototype.refreshTokenStateInToolbar=function(e){this.getUnlockManagerSource().then(function(t){return t.UnlockContentManager.refreshTokenStateInToolbar(e)})},e.prototype.fetchAndDisplayLatestTokenInfo=function(e){this.getUnlockManagerSource().then(function(t){return t.UnlockContentManager.fetchAndDisplayLatestTokenInfo(e)})},e.prototype.tryToUnlockPointedParagraph=function(e,t,n,o){this.getUnlockManagerSource().then(function(i){return i.UnlockContentManager.tryToUnlockPointedParagraph(e,t,n,o)})},e.prototype.unlockFragments=function(e,t,n,o,i,r,a,s){var c=this;return new Promise(function(u,l){c.getUnlockManagerSource().then(function(c){var l=c.UnlockContentManager;return u(l.unlockFragments(e,t,n,o,i,r,a,s))})})},e.prototype.showModalForCurrentBookElementPurchases=function(e,t){void 0===t&&(t=null),this.getModalSource().then(function(n){return n.UnlockModal.showModalForCurrentBookElementPurchases(e,t)})},e.prototype.getUnlockManagerSource=function(){return this.unlockManagerSourcePromise||(this.unlockManagerSourcePromise=o.a.importWebpackModuleWithRetry(this.constructUnlockManagerSourcePromise)),this.unlockManagerSourcePromise},e.prototype.constructUnlockManagerSourcePromise=function(){return Promise.all([n.e(4),n.e(0),n.e(1),n.e(2),n.e(36)]).then(n.bind(null,311))},e.prototype.getFreePreviewManagerSource=function(){return this.freePreviewManagerSourcePromise||(this.freePreviewManagerSourcePromise=o.a.importWebpackModuleWithRetry(this.constructFreePreviewSourcePromise)),this.freePreviewManagerSourcePromise},e.prototype.constructFreePreviewSourcePromise=function(){return Promise.all([n.e(0),n.e(1),n.e(22)]).then(n.bind(null,320))},e.prototype.getModalSource=function(){return this.modalSourcePromise||(this.modalSourcePromise=o.a.importWebpackModuleWithRetry(this.constructUnlockModalSourcePromise)),this.modalSourcePromise},e.prototype.constructUnlockModalSourcePromise=function(){return Promise.all([n.e(4),n.e(0),n.e(1),n.e(2),n.e(37)]).then(n.bind(null,319))},e.prototype.getUnlockTextSource=function(){return this.unlockTextSourcePromise||(this.unlockTextSourcePromise=o.a.importWebpackModuleWithRetry(this.constructUnlockTextSourcePromise)),this.unlockTextSourcePromise},e.prototype.constructUnlockTextSourcePromise=function(){return n.e(38).then(n.bind(null,310))},e.prototype.isNotNewUserDiscount=function(e){if(null==e)return!0;try{for(var t in e)if(e[t]&&e[t].isNewCustomerDiscount)return!1}catch(e){return!0}return!0},e}())},111:function(e,t,n){"use strict";var o,i=n(2),r=n(17),a=n(5),s=n(14),c=n(4),u=n(69),l=n(61),d=$(window),p=$(document);c.b.loadDeviceInfo().then(function(e){o=e.isIOS});var h=function(){function e(){var e=this;this.isInAudioVideoMode=!1,this.shouldAutomaticallyScroll=!0,d.on("wheel DOMMouseScroll mousewheel",function(){e.shouldAutomaticallyScroll=!1}),p.on("textSideMenuOpened",function(){e.isTextSideMenuOpened=!0,e.shouldAutomaticallyScroll=!1}),p.on("textSideMenuClosed",function(){e.isTextSideMenuOpened=!1,e.shouldAutomaticallyScroll=!0}),p.on("tooltipOpened",function(){e.isTextSelectionMenuOpened=!0,e.shouldAutomaticallyScroll=!1}),p.on("tooltipClosed",function(){e.isTextSelectionMenuOpened=!1,e.shouldAutomaticallyScroll=!0}),p.on("audioModeLeft videoModeLeft",function(){e.isInAudioVideoMode=!1,e.shouldAutomaticallyScroll=!0,p.trigger("restoreAutomaticScrolling",a.a.isElementVisible(e.currentTextFragment))}),p.on("audioModeEntered videoModeEntered",function(){e.isInAudioVideoMode=!0,e.shouldAutomaticallyScroll=!1}),p.on("restoreAutomaticScrolling",function(t,n){e.isInAudioVideoMode||e.isTextSideMenuOpened||e.isTextSelectionMenuOpened||(e.shouldAutomaticallyScroll=!0,n&&e.scrollToElement(e.currentTextFragment))}),p.on("playingTextFragmentChange",function(t,n){e.currentTextFragment=n}),p.on("positionPointPositionReached",function(t,n){e.currentTextFragment&&e.scrollToElementIfNeeded(n&&n[0]||e.currentTextFragment)}),p.on("browsableReached exerciseReached videoReached",function(t,n){e.shouldAutomaticallyScroll&&n&&(a.a.isElementVisible(n)||i.a.setTimeout(function(){e.isScrolling||e.scrollToElement(n)},400))}),p.on("requestScrollToElement",function(t,n){e.scrollToElement(n)})}return e.prototype.initialize=function(){this.clean()},e.prototype.clean=function(){this.currentTextFragment=null},e.prototype.scrollToElement=function(e,t){e&&this.scrollToPosition($(e).offset().top-1.5*a.a.getTopNavBarHeight(),t)},e.prototype.scrollToPosition=function(e,t){var n=this,r=1e3,a=Math.abs(window.scrollY-e);r=Math.min(3*a,r),o&&l.a.makeFooterTransparent(),this.isScrolling=!0,$("html,body").velocity("scroll",{duration:r,offset:e,mobileHA:!1}),i.a.setTimeout(function(){n.isScrolling=!1,l.a.makeFooterOpaque(),t&&t()},r)},e.prototype.scrollToElementIfNeeded=function(e){if(this.shouldAutomaticallyScroll)if(u.a.isSideMenuOpened)i.a.triggerDocumentEventAsync("playingElementInView",e);else if(r.a.hasBrowsables(e)){var t=r.a.getMostImportantBrowsable(e.browsables);a.a.canBothElementsFitIntoScreen(e,t)?this.scrollToElementWithBrowsablesIfNeeded(e):this.scrollToElementWithoutBrowsablesIfNeeded(e)}else this.scrollToElementWithoutBrowsablesIfNeeded(e);else i.a.triggerDocumentEventAsync("playingElementInView",e)},e.prototype.scrollToElementWithBrowsablesIfNeeded=function(e){var t=r.a.getMostImportantBrowsable(e.browsables),n=t;a.a.isElementVisible(e)&&a.a.isElementVisible(t)&&a.a.isElementVisible(n)?i.a.triggerDocumentEventAsync("playingElementInView",e):a.a.canBothElementsFitIntoScreen(e,n)?this.positionScreenThatBothFit(e,n):this.scrollToElementWithoutBrowsablesIfNeeded(e)},e.prototype.positionScreenThatBothFit=function(e,t){var n=s.a.precedesElement(e,t)?t:e;this.scrollToElementAfterPause(n,e)},e.prototype.scrollToElementWithoutBrowsablesIfNeeded=function(e){var t=e,n=a.a.isElementVisible(e);if(null!=t.previousHeading)n=n&&a.a.isElementVisible(t.previousHeading),t=t.previousHeading;else if("LI"===t.nodeName){var o=t.parentElement.firstElementChild;a.a.canBothElementsFitIntoScreen(t,o)&&(n=n&&a.a.isElementVisible(o),t=o)}n?i.a.triggerDocumentEventAsync("playingElementInView",e):this.scrollToElementAfterPause(t,e)},e.prototype.scrollToElementAfterPause=function(e,t){var n=this;i.a.setTimeout(function(){n.isScrolling?i.a.triggerDocumentEventAsync("playingElementInView",t):n.scrollToElement(e,function(){i.a.triggerDocumentEventAsync("playingElementInView",t)})},400)},e}();t.a=new h},112:function(e,t,n){"use strict";var o;n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i}),function(e){e[e.Default=0]="Default",e[e.Search=1]="Search",e[e.Point=2]="Point",e[e.Paragraphs=3]="Paragraphs",e[e.Subsection=4]="Subsection",e[e.Section=5]="Section",e[e.BookElement=6]="BookElement",e[e.FreePreview=7]="FreePreview"}(o||(o={}));var i=new(function(){function e(){}return e.prototype.markParagraphsForUnscrambling=function(e){e.forEach(function(e){e.find(".scrambled-notifier").remove(),e.addClass("unscrambling"),e.removeClass("unscramble-target")})},e.prototype.adaptReadableTextContentForUnscrambling=function(e){e.forEach(function(e){if(e.attr("data-original-html",e.html()),1===e.children().length&&1===e.children("p").length){var t=e.children("p");t.html('<div class="scrambled-content-container">'+t.html()+'</div>\n                     <div class="unscrambled-content-container"></div>')}else e.html('<div class="scrambled-content-container">'+e.html()+'</div>\n                     <div class="unscrambled-content-container"></div>')})},e.prototype.resetUnscrambledElements=function(e){e.forEach(function(e){e.html(e.attr("data-original-html")),e.attr("data-original-html",""),e.removeClass("unscrambling")})},e.prototype.getDataFromPointingLink=function(e,t,n){if(!e||!t||!n||n.length<2)return null;var o={bookShortName:e.shortName,bookElementShortName:t.shortName,paragraphId:void 0,paragraphFingerprint:void 0,pointingLinkId:void 0,paragraphsToUnlock:void 0,startParagraphId:void 0,endParagraphId:void 0,meapVersion:t.meapVersion||0,isUserEditorLink:!1};if(2==n.length?(o.paragraphId=n[0],o.paragraphFingerprint=n[1],o.startParagraphId=parseInt(n[0]),o.endParagraphId=parseInt(n[0])):(o.pointingLinkId=n[0],o.startParagraphId=parseInt(n[1]),o.endParagraphId=parseInt(n[2]),o.isUserEditorLink="1"===n[3]),Number.isNaN(o.startParagraphId)||Number.isNaN(o.endParagraphId))return null;if(o.startParagraphId>o.endParagraphId){var i=o.startParagraphId;o.startParagraphId=o.endParagraphId,o.endParagraphId=i}return o},e.prototype.isEncompassingWholeContent=function(e,t){if("1"!=e)return!1;try{var n=document.querySelector('[refid="'+t+'"]'),o=document.querySelector('[refid="'+(+t+1)+'"]');return null!=n&&null==o}catch(e){return!1}},e.prototype.replaceEncryptedContent=function(e,t){return t&&t.forEach(function(t){var n=e.find("[refid='"+t.paragraphID+"']");n.is(".scrambled")&&n.html(t.content).removeClass("scrambled").addClass("unscrambled")}),e.html()},e}())},113:function(e,t,n){"use strict";var o=function(){function e(e,t,n,o,i,r,a,s,c,u,l,d){void 0===d&&(d=!1),this.id=e,this.bookElementShortName=t,this.bookElementOrdinal=n||-1,this.contentID=o,this.contentHash=i,this.annotatedText=r,this.noteText=a,this.section=s,this.timestamp=c,this.meapVersion=u||0,this.reviewVersion=l||0,this.hasNotBeenStoredOnServer=d}return e.fromJSON=function(t){var n=new e(parseInt(t.id||t.noteID)||0,t.bookElementShortName,t.bookElementOrdinal,t.contentID||t.contentItemID,t.contentHash,t.annotatedText,t.noteText,t.section||t.contentLocation,t.timeCreated||t.timestamp,t.meapVersion,t.reviewVersion,!!t.hasNotBeenStoredOnServer);return n.user=t.user||"",n.userId=t.userId,n},e}();t.a=o},114:function(e,t,n){"use strict";var o=n(4),i=$(document),r=function(){function e(){var e=this;this.isDisabled=!0,this.$scrollHeader=$(".scrollheader"),i.on("disableToolbarHiding",function(){return e.disableHiding()}),i.on("enableToolbarHiding",function(){return e.enableHiding()})}return e.prototype.initialize=function(){o.b.isSmallScreenSize()&&this.$scrollHeader.headroom({tolerance:{up:2,down:0},onPin:function(){return i.trigger("topbarToggled")},onUnpin:function(){return i.trigger("topbarToggled")}}),this.isDisabled?this.disableHiding():this.enableHiding()},e.prototype.disableHiding=function(){this.isDisabled=!0,this.$scrollHeader.data("headroom")&&(this.$scrollHeader.data("headroom").disabled=!0)},e.prototype.enableHiding=function(){this.isDisabled=!1,this.$scrollHeader.data("headroom")&&(this.$scrollHeader.data("headroom").disabled=!1)},e.prototype.disableAndRevert=function(){this.disableHiding(),this.$scrollHeader.removeClass("headroom--unpinned").addClass("headroom-pinned")},e}();t.a=new r},115:function(e,t,n){"use strict";var o=function(){function e(e,t,n,o,i,r,a,s,c,u){void 0===u&&(u=!1),this.id=e,this.contentID=o,this.contentHash=i,this.bookmarkedText=r,this.bookElementShortName=t,this.bookElementOrdinal=n,this.section=a,this.timestamp=s,this.meapVersion=c||0,this.hasNotBeenStoredOnServer=u}return e.fromJSON=function(t){return new e(parseInt(t.id||t.bookmarkID)||0,t.bookElementShortName,t.bookElementOrdinal,t.contentID||t.contentItemID,t.contentHash,t.bookmarkedText,t.section||t.contentLocation,t.timeCreated||t.timestamp,t.meapVersion,!!t.hasNotBeenStoredOnServer)},e}();t.a=o},116:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),i=n(6),r=n(16),a=n(12),s=new(function(){function e(){this.discountedProductsPromiseMap={}}return e.prototype.getNewUserDiscountCode=function(){return i.a.isCurrentlyLoggedIn()&&i.a.isExistingUser()?"":r.a.getItem("isBuyer")?"":"lb-new-user-30"},e.prototype.getNewUserProductDiscounts=function(e,t){var n=this;if(null==e||0==e.length||!t)return Promise.resolve([]);var i=e.join(",")+" - "+t;return null!=this.discountedProductsPromiseMap[i]?this.discountedProductsPromiseMap[i]:this.discountedProductsPromiseMap[i]=new Promise(function(i,r){o.a.postToOurBackend(o.a.getAbsoluteUrl("api/cart/newUserProductDeals"),function(e){var t=[];for(var n in e)for(var o in e[n])e[n][o].discountCode=n,t.push(e[n][o]);i(t)},function(e){n.dotdProductsPromise=null,r(e)},{productIds:e.join(","),code:t})})},e.prototype.getDotdPromoInfo=function(){var e=this;return null!=this.dotdPromoInfoPromise?this.dotdPromoInfoPromise:this.dotdPromoInfoPromise=new Promise(function(t,n){Promise.all([e.getDotdProducts(),e.getDotdBrief(),e.getDotdFullInfo()]).then(function(e){var n=e[0],i=e[1],r=e[2],s=n.find(function(e){return(i.brief||"").indexOf(e.title)>=0});if(null!=s){var c=s.productOfferings.find(function(e){return"EBOOK"==e.productType});if(null!=c){var u="$"+a.a.formatMoney(c.price-c.discount)+" until "+r.expirationDate.getDate()+"/"+(r.expirationDate.getMonth()+1);t({headerMessage:"Save 50%! Get the eBook of "+s.title+" for only "+u,shortMessage:s.title+" for "+u,notificationMessage:"Don't miss out! The eBook of "+s.title+" is only "+u+".",priceMessage:u,categories:"",productLink:s.isLivebook?o.a.getBookUrl(s.slug):s.isLiveVideo?o.a.getLiveVideoUrl("course/"+s.externalId+"/"+s.slug):o.a.getMarketplaceProductUrl(s.slug,s.isLiveVideo),productExternalId:s.externalId,discountCode:r.code})}else t(null)}else t(null)}).catch(function(n){e.dotdPromoInfoPromise=null,t(null)})})},e.prototype.getDotdBrief=function(){return new Promise(function(e,t){o.a.getFromOurBackend(o.a.getAbsoluteUrl("api/cart/dotdBrief"),function(t){return e(t)},function(e){return t(e)})})},e.prototype.getDotdFullInfo=function(){return new Promise(function(e,t){o.a.getFromOurBackend(o.a.getAbsoluteUrl("api/cart/dotdFullInfo"),function(t){t.expirationDate&&(t.expirationDate=a.a.getDateFromString(t.expirationDate)),t.activationDate&&(t.activationDate=a.a.getDateFromString(t.activationDate)),e(t)},function(e){return t(e)})})},e.prototype.getDotdProducts=function(){var e=this;return null!=this.dotdProductsPromise?this.dotdProductsPromise:this.dotdProductsPromise=new Promise(function(t,n){o.a.postToOurBackend(o.a.getAbsoluteUrl("api/cart/todaysDealsAndProducts"),function(e){var n=[];for(var o in e)for(var i in e[o])e[o][i].discountCode=o,n.push(e[o][i]);t(n)},function(t){e.dotdProductsPromise=null,n(t)})})},e}())},117:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(9),i=new(function(){function e(){this.rewriteUrlOnScroll=!0,this.handleUpdateHistoryOnScrollClick=this.handleUpdateHistoryOnScrollClick.bind(this),this.handleSettingsUpdated=this.handleSettingsUpdated.bind(this),$(document).on("settingsUpdated",this.handleSettingsUpdated)}return e.prototype.initialize=function(){$("#update-history-scroll-checkbox, #update-history-scroll-label").on("click",this.handleUpdateHistoryOnScrollClick)},e.prototype.handleUpdateHistoryOnScrollClick=function(){this.updateValue(!$("#update-history-scroll-checkbox").is(".selected")),$(document).trigger("settingsMenuItemClick").trigger("requestUpdateHistoryOnScroll",this.rewriteUrlOnScroll)},e.prototype.handleSettingsUpdated=function(){this.updateValue(!!o.a.get("update-history-on-scroll")),$(document).trigger("requestUpdateHistoryOnScroll",!!o.a.get("update-history-on-scroll"))},e.prototype.updateValue=function(e){this.rewriteUrlOnScroll=e,$("#update-history-scroll-checkbox").toggleClass("selected",e),o.a.set("update-history-on-scroll",e)},e}())},118:function(e,t,n){"use strict";var o=n(69),i=n(5),r=n(9),a=new(function(){function e(){this.updateSpeed=this.updateSpeed.bind(this),this.handleSpeedContainerClick=this.handleSpeedContainerClick.bind(this)}return e.prototype.initialize=function(){this.$menuSettings=$("#settings-menu"),this.$speedControlPoint=this.$menuSettings.find(".speed-control-current-position-container"),this.$speedControlButtons=this.$menuSettings.find(".speed-stop"),this.$speedLabels=this.$menuSettings.find(".speed-stop-labels label"),this.$speedContainer=this.$menuSettings.find(".speed-container"),$(document).on("settingsUpdated",this.updateSpeed),this.$speedContainer.on("click",this.handleSpeedContainerClick)},e.prototype.updateSpeed=function(){var e=r.a.get("speed");(e<0||e>2||Number.isNaN(+e))&&(e=1),this.speed=e;var t=(this.speed+"").replace("0","")+"x",n=-1;this.$speedLabels.each(function(e,o){-1!=$(o).text().indexOf(t)&&(n=e)}),this.$menuSettings.css("display","block"),this.$speedLabels.removeClass("selected"),this.$speedLabels.eq(n).addClass("selected"),this.moveToPosition(this.$speedControlButtons.eq(n)),this.$menuSettings.css("display","")},e.prototype.handleSpeedContainerClick=function(e){var t=e.pageY,n=e.pageX;"touchstart"===e.type&&(t=e.originalEvent.touches[0].pageY,n=e.originalEvent.touches[0].pageX);var o=i.a.getClosestToOffset(this.$speedControlButtons,{top:t,left:n});this.moveToPosition(o),this.$speedLabels.filter(".selected").removeClass("selected");var a=this.$speedLabels.eq(this.$speedControlButtons.index(o));a.addClass("selected");var s=parseFloat(a.text());(Number.isNaN(s)||s>2||s<0)&&(s=1),r.a.set("speed",""+s),$(document).trigger("settingsMenuItemClick")},e.prototype.moveToPosition=function(e){e&&0!=e.length&&this.$speedControlPoint.velocity({left:e.position().left-this.$speedControlPoint.width()/4},"easeOutSine","fast")},e}()),s=n(2),c=n(123),u=n(155),l=n(117),d=n(18),p=n(6),h=n(23),f=n(156),g=n(12),m=n(14),v=$(document),b=$(document.body),y=function(){function e(){var e=this;this.$settingsMenu=$("#settings-menu"),this.$settingsMenu.html(k),this.slideMenu=new o.a($(".settings-button.top-bar-button"),this.$settingsMenu,function(){a.updateSpeed(),m.a.removeIconButtonGlow($(".settings-button.top-bar-button"))}),a.initialize(),c.a.initialize(),u.a.initialize(),l.a.initialize(),this.$textSizeSelectors=$(".text-size-selector"),this.$textSizeSelectorSmall=this.$textSizeSelectors.filter(".text-size-selector-small"),this.$textSizeSelectorStandard=this.$textSizeSelectors.filter(".text-size-selector-standard"),this.$textSizeSelectorLarge=this.$textSizeSelectors.filter(".text-size-selector-large"),this.$textSizeSelectorExtraLarge=this.$textSizeSelectors.filter(".text-size-selector-extra-large"),s.a.onEventWithCooldown(this.$textSizeSelectors,"click touchstart",function(t){var n=$(t.currentTarget),o="standard";n.is(".text-size-selector-extra-large")?o="extra-large":n.is(".text-size-selector-large")?o="large":n.is(".text-size-selector-standard")?o="standard":n.is(".text-size-selector-small")&&(o="small"),r.a.set("text-size",o),e.updateTextSize()}),this.$nightModeCheckbox=$("#night-mode-checkbox"),this.$nightModeLabel=$("#night-mode-label"),this.$emailNotificationsLabel=$("#discussion-send-email-label"),this.$emailNotificationsCheckbox=$("#discussion-send-email-checkbox"),s.a.onEventWithCooldown(this.$nightModeCheckbox,"click touchstart",function(){return e.handleNightModeClick()}),s.a.onEventWithCooldown(this.$nightModeLabel,"click touchstart",function(){return e.handleNightModeClick()}),s.a.onEventWithCooldown(this.$emailNotificationsLabel,"click touchstart",function(){return e.handleEmailNotificationsClick()}),s.a.onEventWithCooldown(this.$emailNotificationsCheckbox,"click touchstart",function(){return e.handleEmailNotificationsClick()}),v.on("settingsUpdated",function(){e.updateTextSize(),e.setNightMode(r.a.get("night-mode")),r.a.get("settings-menu-highlighted")||p.a.isLoggedIn().then(function(t){t.loggedIn&&g.a.isToday(t.userDetails.firstLoginDate)&&e.highlightSettingsButton()})}),this.updateTextSize(),this.updateNightMode(),p.a.isLoggedIn().then(function(t){e.visuallySetEmailNotifications(t.userDetails.receiveCommentNotificationEmails)}),this.$settingsMenu.find(".change-profile-image-link").on("click",function(){f.a.showProfileImageUploadModal()})}return e.prototype.initialize=function(){this.updateNightMode()},e.prototype.clean=function(){this.updateNightMode()},e.prototype.open=function(){this.slideMenu&&this.slideMenu.openMenu()},e.prototype.handleNightModeClick=function(){this.setNightMode(!this.$nightModeCheckbox.is(".selected")),v.trigger("settingsMenuItemClick")},e.prototype.setNightMode=function(e){this.$nightModeCheckbox.toggleClass("selected",e),r.a.set("night-mode",e),this.updateNightMode()},e.prototype.handleEmailNotificationsClick=function(){var e=!this.$emailNotificationsCheckbox.is(".selected");this.visuallySetEmailNotifications(e),this.updateReceiveCommentNotificationEmails(e)},e.prototype.updateReceiveCommentNotificationEmails=function(e){h.a.saveNotificationPreferences(e)},e.prototype.visuallySetEmailNotifications=function(e){this.$emailNotificationsCheckbox.toggleClass("selected",e)},e.prototype.updateTextSize=function(){var e=(r.a.get("text-size")||"").toLowerCase();switch(b.removeClass("text-size-small text-size-standard text-size-large text-size-extra-large"),this.$textSizeSelectors.removeClass("selected"),e){case"small":b.addClass("text-size-small"),this.$textSizeSelectorSmall.addClass("selected");break;case"standard":b.addClass("text-size-standard"),this.$textSizeSelectorStandard.addClass("selected");break;case"large":b.addClass("text-size-large"),this.$textSizeSelectorLarge.addClass("selected");break;case"extra-large":case"extra_large":b.addClass("text-size-extra-large"),this.$textSizeSelectorExtraLarge.addClass("selected");break;default:b.addClass("text-size-standard"),this.$textSizeSelectorStandard.addClass("selected")}v.trigger("textLayoutModified")},e.prototype.updateNightMode=function(){b.toggleClass("night-mode",r.a.get("night-mode")&&null!=d.a.bookElement)},e.prototype.highlightSettingsButton=function(){m.a.addIconButtonGlow($(".settings-button.top-bar-button")),r.a.set("settings-menu-highlighted",!0)},e}(),k='\n<div class="slide-in-menu-container">\n<div id="settings-menu-container">\n    <ul>\n        <li class="settings-menu-user-container">\n            <div class="settings-menu-user-data-container-email pull-left"></div>\n            <div class="settings-menu-user-data-container-sign-out pull-right">\n                <a href="javascript:void(0)" class="emphasized-button sign-out-button">LOG OUT</a>\n            </div>\n            <div class="settings-menu-user-data-container-manage">\n                <a href="javascript:void(0)" class="change-profile-image-link">\n                    change your profile image\n                </a>\n                <br/>\n                <a href="https://www.manning.com/dashboard" target="_blank">\n                    view your dashboard  <i class="fa fa-external-link" aria-hidden="true"></i>\n                </a>\n                <br/>\n                <a href="https://www.manning.com/dashboard/details" target="_blank">\n                    manage account details <i class="fa fa-external-link" aria-hidden="true"></i>\n                </a>\n            </div>\n        </li>\n        <li>\n            <label class="settings-menu-header section-menu-header">TOKENS</label>\n            <ul>\n                <li>\n                    <div class="row">\n                        <div class="small-12 columns">\n                            <a href="javascript:void(0)" class="main-token-status-container" title="tokens" data-tooltip aria-haspopup="true" data-options="disable_for_touch:true">\n                                <svg viewBox="0 0 10.583333 10.583334"><use xlink:href="#token-icon"></svg>\n                                <span class="token-amount-container"></span>\n                            </a>\n                        </div>\n                    </div>\n                </li>\n                <li><div class="row"><div class="small-12 columns"></div></div></li>\n            </ul>\n        </li>\n        <li>\n            <label class="settings-menu-header section-menu-header">TEXT &amp; BACKGROUND</label>\n            <ul>\n                <li>\n                    <div class="row">\n                        <div class="small-4 columns">\n                            <label class="settings-menu-label inline">text size</label>\n                        </div>\n                        <div class="small-8 columns">\n                            <span class="text-size-selector text-size-selector-extra-large" title="extra-large"><i class="fa fa-font" aria-hidden="true"></i></span>\n                            <span class="text-size-selector text-size-selector-large" title="large"><i class="fa fa-font" aria-hidden="true"></i></span>\n                            <span class="text-size-selector text-size-selector-standard selected" title="standard"><i class="fa fa-font" aria-hidden="true"></i></span>\n                            <span class="text-size-selector text-size-selector-small" title="small"><i class="fa fa-font" aria-hidden="true"></i></span>\n                        </div>\n                    </div>\n                </li>\n                <li class="unread-text-color-menu-item">\n                    <div class="row">\n                        <div class="small-4 columns">\n                            <label class="settings-menu-label inline">unread text</label>\n                        </div>\n                        <div class="small-8 columns">\n                            <div class="checkbox-item semi-visible" title="Unread text will be grayed out">\n                                <i class="icon-i-check"></i>\n                            </div>\n                            <div class="checkbox-item full-visible" title="No difference between read and unread text">\n                                <i class="icon-i-check"></i>\n                            </div>\n                        </div>\n                    </div>\n                </li>\n                <div class="row" title="Toggle night mode while reading books">\n                    <div class="small-4 columns">\n                        <label class="settings-menu-label inline" id="night-mode-label">night mode</label>\n                    </div>\n                    <div class="small-8 columns">\n                        <div class="checkbox-item" id="night-mode-checkbox">\n                            <i class="icon-i-check"></i>\n                        </div>\n                    </div>\n                </div>\n            </ul>\n        </li>\n        <li>\n            <label class="settings-menu-header section-menu-header">AUDIO</label>\n            <ul>\n                <li>\n                    <div class="row">\n                        <div class="small-12 columns">\n                            <label class="settings-menu-label">narration speed</label>\n                        </div>\n                    </div>\n                    <div class="row">\n                        <div class="small-12 columns">\n                            <div class="speed-container">\n                                <div class="speed-labels-container">\n                                    <div class="speed-stop-labels">\n                                        <label>.8x</label>\n                                        <label>.9x</label>\n                                        <label class="selected">1x</label>\n                                        <label>1.2x</label>\n                                        <label>1.4x</label>\n                                        <label>1.6x</label>\n                                    </div>\n                                </div>\n\n                                <div class="speed-control-container">\n                                    <div class="speed-line-stops-container">\n                                        <div class="line">&nbsp;</div>\n                                        <div class="speed-stops-container">\n                                            <div class="speed-stop"><div class="speed-stop-point"></div></div>\n                                            <div class="speed-stop"><div class="speed-stop-point"></div></div>\n                                            <div class="speed-stop"><div class="speed-stop-point"></div></div>\n                                            <div class="speed-stop"><div class="speed-stop-point"></div></div>\n                                            <div class="speed-stop"><div class="speed-stop-point"></div></div>\n                                            <div class="speed-stop"><div class="speed-stop-point"></div></div>\n                                        </div>\n                                        <div class="speed-control-current-position-container">\n                                            <div class="toolbar-current-position-outer-point">\n                                                <div class="toolbar-current-position-inner-point"></div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </li>\n                <li>\n                    <div class="row">\n                        <div class="small-7 columns">\n                            <label class="settings-menu-label inline first" id="browsable-stop-pause-label">pause at code/graphics</label>\n                        </div>\n                        <div class="small-5 columns">\n                            <div class="checkbox-item selected" id="browsable-stop-pause-checkbox">\n                                <i class="icon-i-check"></i>\n                            </div>\n                        </div>\n                    </div>\n                </li>\n                <li>\n                    <div class="row">\n                        <div class="small-7 columns">\n                            <label class="settings-menu-label inline first" id="disable-live-audio-label">disable liveaudio</label>\n                        </div>\n                        <div class="small-5 columns">\n                            <div class="checkbox-item" id="disable-live-audio-checkbox">\n                                <i class="icon-i-check"></i>\n                            </div>\n                        </div>\n                    </div>\n                </li>\n                <li>\n                    <div class="row">\n                        <div class="small-7 columns">\n                            <label class="settings-menu-label inline" id="sound-effects-label">sound effects</label>\n                        </div>\n                        <div class="small-5 columns">\n                            <div class="checkbox-item selected" id="sound-effects-checkbox">\n                                <i class="icon-i-check"></i>\n                            </div>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n        </li>\n        <li>\n            <label class="settings-menu-header section-menu-header">MISC</label>\n            <div class="row" title="Toggle update page url while reading a book">\n                <div class="small-9 columns">\n                    <label class="settings-menu-label inline" id="update-history-scroll-label">update url on scroll</label>\n                </div>\n                <div class="small-3 columns">\n                    <div class="checkbox-item" id="update-history-scroll-checkbox">\n                        <i class="icon-i-check"></i>\n                    </div>\n                </div>\n            </div>\n            <div class="row" title="Send email notifications on discussion replies">\n                <div class="small-9 columns">\n                    <label class="settings-menu-label inline" id="discussion-send-email-label">receive discussion-related emails</label>\n                </div>\n                <div class="small-3 columns">\n                    <div class="checkbox-item" id="discussion-send-email-checkbox">\n                        <i class="icon-i-check"></i>\n                    </div>\n                </div>\n            </div>\n        </li>\n        <li class="settings-editor-section">\n            <label class="settings-menu-header section-menu-header">EDITOR</label>\n            <div class="row">\n                <div class="small-12 columns">\n                    <label class="settings-menu-label inline">\n                        <a href="javascript:void(0)" class="edit-book-link">edit book</a>\n                        <a href="javascript:void(0)" class="back-to-regular-book-link">back to regular book</a>\n                    </label>\n                </div>\n            </div>\n        </li>\n    </ul>\n</div>\n</div>\n';t.a=new y},119:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(6),i=n(23),r=n(28),a=n(110),s=new(function(){function e(){}return e.prototype.initialize=function(){var e=this;$(document).on("click",".sign-in-button",function(e){var t=$(e.currentTarget),n="signin";t.is(".free-preview-sign-in")?n="free-preview-sign-in":t.is(".micropurchase-sign-in")?n="microtransactions":t.is("wish-list-sign-in-button")&&(n="wishlist"),r.a.requestOpenModal("signin","",n)}).on("click",".discussion-sign-in-button",function(){return r.a.requestOpenModal("signin","","discussion")}).on("click",".register-button",function(e){var t="register";$(e.currentTarget).is(".free-preview-registration")&&(t="free-preview-registration"),r.a.requestOpenModal("register","",t)}).on("click",".sign-out-button",function(){return r.a.requestLogout()}).on("requestAvatarUrlUpdate",function(t,n){return e.updateAvatarImage(n)}),o.a.isLoggedIn().then(function(t){t.loggedIn?e.modifyUIWithLogin():e.notifyLoginNotAttempted(),a.a.fetchAndDisplayLatestTokenInfo()})},e.prototype.modifyUIWithLogin=function(){var e=this;i.a.getUserEmail().then(function(e){$(".settings-menu-user-data-container-email").text(e),$(document.body).addClass("user-logged-in").removeClass("user-not-logged-in")});var t=$("#top-bar-container .user-initials-container");i.a.getAvatarUrl().then(function(t){return e.updateAvatarImage(t)}),i.a.getUserInitials().then(function(e){e?(t.removeClass("hidden"),t.text(e.toUpperCase())):t.addClass("hidden")}).catch(function(e){console.log("Couldn't get initials",e),t.addClass("hidden")})},e.prototype.modifyUIWithLogout=function(){$(document.body).addClass("user-not-logged-in").removeClass("user-logged-in")},e.prototype.notifyLoginNotAttempted=function(){this.modifyUIWithLogout(),$(document).trigger("loginNotAttempted")},e.prototype.updateAvatarImage=function(e){if(e){var t=new Image;t.onload=function(){var t=$("#top-bar-container .avatar-icon");t.length>0?t.replaceWith("<div class='avatar-image' style='background-image: url("+e+")'></div>"):$("#top-bar-container .avatar-image").attr("style","background-image: url("+e+")")},t.src=e}},e}())},12:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(2),i=["January","February","March","April","May","June","July","August","September","October","November","December"],r=new(function(){function e(){}return e.prototype.formatMoney=function(e){return(e||0).toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,")},e.prototype.getArrayIntersection=function(e,t){var n=[];if(null==e||null==t||0==e.length||0==t.length)return n;for(var o=0,i=e;o<i.length;o++){var r=i[o];t.indexOf(r)>=0&&n.push(r)}return n},e.prototype.groupInto=function(e,t){void 0===t&&(t=10);var n=[];if(!e||0==e.length)return n;for(var o=[],i=0;i<e.length;i++)i%t==0&&(o=[],n.push(o)),o.push(e[i]);return n},e.prototype.isNumber=function(e){try{return!isNaN(+e)}catch(e){return!1}},e.prototype.isEmptyObject=function(e){return!!e&&(0===Object.keys(e).length&&e.constructor===Object)},e.prototype.containsAtLeastOneOf=function(e,t){if(!e||!t||!t.length)return!1;for(var n=0,o=t;n<o.length;n++){var i=o[n];if(-1!=e.indexOf(i))return!0}return!1},e.prototype.getTimeoutPromise=function(e){return void 0===e&&(e=500),new Promise(function(t){setTimeout(t,e)})},e.prototype.isToday=function(e){if(null==e||!(e instanceof Date))return!1;var t=new Date;return e.getDate()==t.getDate()&&e.getMonth()==t.getMonth()&&e.getFullYear()==t.getFullYear()},e.prototype.getDifferenceInDays=function(e,t){if(null==e||null==t)return 0;return Math.round(Math.abs((e.getTime()-t.getTime())/864e5))},e.prototype.getDateFromString=function(e){var t=new Date(e);try{if("Invalid Date"==t&&e){var n=e.indexOf("T");n>0&&(t=new Date(e.substring(0,n)))}}catch(e){console.log("Error getting date from string",e)}return t},e.prototype.getDateAsString=function(e){if(!e)return"";var t=e.getMonth(),n=e.getFullYear();return Number.isNaN(t)||Number.isNaN(n)?"":i[t]+" "+n},e.prototype.removeItemFromArray=function(e,t){if(!e)return null;var n=e.indexOf(t);return n>=0?e.splice(n,1):null},e.prototype.turnIntoMapByProperty=function(e,t){for(var n={},o=0,i=e;o<i.length;o++){var r=i[o];n[r[t]]=r}return n},e.prototype.getUniqueStringItems=function(e){for(var t=[],n={},o=0,i=e;o<i.length;o++){var r=i[o];n[r]||(t.push(r),n[r]=!0)}return t},e.prototype.getUniqueNumbers=function(e){for(var t=[],n={},o=0,i=e;o<i.length;o++){var r=i[o];n[r]||(t.push(r),n[r]=!0)}return t},e.prototype.getUniqueEntries=function(e,t){var n=this.turnIntoMapByProperty(e,t),o=[];for(var i in n)o.push(n[i]);return o},e.prototype.getRandomArrayItem=function(e){return e&&0!==e.length?e[Math.floor(Math.random()*e.length)]:null},e.prototype.getMonthAndYear=function(e){if(!e)return null;var t=e.toLocaleString("en-us",{month:"long"});return e.getFullYear,t+" "+e.getFullYear()},e.prototype.getAllRegExMatches=function(e,t){e=new RegExp(e);for(var n=[],o=[];null!==(o=e.exec(t));)n.push(o[0]);return n},e.prototype.flatten=function(e){return[].concat.apply([],e)},e.prototype.insertAtPosition=function(e,t,n){return e?e.slice(0,n)+t+e.slice(n):t},e.prototype.trimAndCollapseMultipleWhitespace=function(e){return e.trim().replace(/\s{2,}/g," ")},e.prototype.trimEnd=function(e,t){if(void 0===t&&(t=" "),!e)return e;for(var n=e.length-1;n>=0&&e.charAt(n)==t;)n--;return e.substring(0,n+1)},e.prototype.mapToArray=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},e.prototype.asyncForIn=function(e,t,n){e||n&&n();var o=[];for(var i in e)e.hasOwnProperty(i)&&o.push({key:i,value:e[i]});this.asyncEach(o,function(e){return t&&t(e.key,e.value)},function(){return n&&n()})},e.prototype.asyncEach=function(e,t,n,i){void 0===i&&(i=1),e&&0!=e.length||n&&n();var r=0,a=!1;!function s(){if(!a){var c=e[r++];c?(t&&t(c),o.a.setTimeout(s,i)):(a=!0,n&&n())}}()},e.prototype.randomizeArray=function(e){if(e&&null!=e.length){for(var t,n,o=e.length;0!==o;)n=Math.floor(Math.random()*o),t=e[o-=1],e[o]=e[n],e[n]=t;return e}},e.prototype.endsWithOneOf=function(e,t,n){if(void 0===n&&(n=!1),!e)return!1;if(!t||!t.length)return!1;for(var o=0,i=t;o<i.length;o++){var r=i[o];if(this.endsWith(e,r,n))return!0}return!1},e.prototype.endsWith=function(e,t,n,o){void 0===n&&(n=!1),("number"!=typeof o||!isFinite(o)||Math.floor(o)!==o||o>e.length)&&(o=e.length),n&&(e=(e||"").toLowerCase(),t=(t||"").toLowerCase()),o-=t.length;var i=e.lastIndexOf(t,o);return-1!==i&&i===o},e.prototype.turnToOldFormatShortName=function(e){return e?this.capitalizeFirstLetter(e.replace("-"," ")):e},e.prototype.capitalizeFirstLetter=function(e){return null==!e?e:e.substring(0,1).toUpperCase()+e.substring(1)},e.prototype.areApproximatelyEqual=function(e,t,n){return void 0===n&&(n=.001),Math.abs(e-t)<n},e.prototype.getWithoutLastWordOrFullIfSingleWord=function(e){if(!e)return e;var t=e.lastIndexOf(" ");return-1!=t?e.substring(0,t):e},e.prototype.getLastWordOrEmptyIfSingleWord=function(e){if(!e)return e;var t=e.lastIndexOf(" ");return-1!=t?e.substring(t):""},e.prototype.getNumberOfWords=function(e){if(!e||!e.match)return 0;var t=e.match(/\b(\w+)\b/g);return null==t?0:t.length},e.prototype.roundToTwoDecimalPoints=function(e){return Math.round(100*e)/100},e.prototype.arrayIntersection=function(e,t){var n=[];if(null==e||0==e.length||null==t||0==t.length)return n;for(var o=0,i=e;o<i.length;o++){var r=i[o];t.indexOf(r)>=0&&n.push(r)}return n},e.prototype.arrayDifference=function(e,t){var n=[];if(null==e||0==e.length)return n;if(null==t||0==t.length)return n.concat(e);for(var o=0,i=e;o<i.length;o++){var r=i[o];-1==t.indexOf(r)&&n.push(r)}return n},e.prototype.formatTimeInSeconds=function(e){var t=~~(e/3600),n=~~(e%3600/60),o=e%60,i="";return t>0&&(i+=t+":"+(n<10?"0":"")),i+=n+":"+(o<10?"0":""),i+=""+o},e.prototype.escapeHtml=function(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):e},e.prototype.extractDataProperties=function(e){if(!e)return e;if(!(e instanceof Object))return e;var t={};for(var n in e)e[n]instanceof Function||(t[n]=e[n]);return t},e.prototype.numberWithCommas=function(e){try{return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}catch(t){return e}},e.prototype.getCurrentTimezone=function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return""}},e.prototype.countOccurences=function(e,t){if(!e||!t)return 0;for(var n=0,o=0,i=e.length;!((o=t.indexOf(e,o))<0);)n++,o+=i;return n},e}())},120:function(e,t,n){"use strict";var o=n(2),i=n(17),r=n(5),a=n(14),s=n(111),c=new(function(){function e(){this.cueballSelector="img[src$='1.jpg'], img[src$='2.jpg'], img[src$='3.jpg'],\n                              img[src$='4.jpg'], img[src$='5.jpg'], img[src$='6.jpg'],\n                              img[src$='7.jpg'], img[src$='8.jpg'], img[src$='9.jpg'], img[src$='0.jpg'],\n                              img[src$='one.jpg'], img[src$='two.jpg'], img[src$='three.jpg'],\n                              img[src$='four.jpg'], img[src$='five.jpg'], img[src$='six.jpg'],\n                              img[src$='seven.jpg'], img[src$='eight.jpg'], img[src$='nine.jpg']"}return e.prototype.initialize=function(){for(var e=this,t=document.querySelectorAll(".browsable-container"),n=i.a.getTextFragmentElements(),r={},s=0;s<t.length;s++){(w=t[s]).isBrowsable=!0;var c=a.a.findFirstPreviousStopAt($(w),".readable-text","h1, h2, h3",20);c.length>0&&(c[0].nextBrowsable=w);var u=a.a.findFirstNext($(w),".readable-text",10);u.length>0&&(u[0].previousBrowsable=w);var l=w.querySelector("h5");if(l){var d=this.getBrowsableHeadingKeyword(l.textContent);d&&(r[d]=w,r[d.toLowerCase()]=w)}}for(var p=0,h=n;p<h.length;p++){var f=h[p],g=$(f),m=this.extractBrowsableRegexKeywords(g.text()),v=[];if(this.containsCueballs(g)){(w=a.a.findFirstPreviousStopAt(g,".listing-container","h1, h2, h3",20)[0])&&(w.isCueballBrowsable=!0,v.push(w),f.listingContainer=w);var b=g.find("img");b.addClass("clickable"),o.a.onEventWithCooldown(b,"click touchstart",function(t){return e.handleCueBallClick(t)})}for(var y=0,k=m;y<k.length;y++){(w=r[k[y]])&&-1==v.indexOf(w)&&v.push(w)}if(0==v.length&&g.find(".codeFragment").length){var w,S=a.a.findFirstPreviousStopAt(g,".browsable-container","h1, h2, h3",20);if(S.find("form").length||S.is(".listing-container"))(w=S[0])&&v.push(w)}0!=v.length&&(f.browsables=v)}},e.prototype.handleCueBallClick=function(e){var t=e.target,n=$(t).parents(".readable-text")[0];if(n){var o=i.a.getMostImportantBrowsable(n.browsables);if(o){o.annotatedListing&&o.annotatedListing.goToAnimationStep(i.a.extractFileNameNumber(t.src)),$(o).closest(".focus-off").removeClass("focus-off");var c=r.a.canBothElementsFitIntoScreen(n,o)&&a.a.precedesElement(o,n)?n:o;s.a.scrollToElement(c)}}},e.prototype.containsCueballs=function(e){for(var t=e.find("img"),n=0;n<t.length;n++)if(t.eq(n).is(this.cueballSelector))return!0;return!1},e.prototype.getBrowsableHeadingKeyword=function(e){for(var t=this.extractBrowsableRegexKeywords(e),n=0;n<t.length;n++)if(0==e.indexOf(t[n]))return t[n]},e.prototype.extractBrowsableRegexKeywords=function(e){var t=[];return i.a.browsableRegExes.forEach(function(n){var o=e.match(n);o&&o.length>0&&(t=t.concat(o))}),t},e}());t.a=c},121:function(e,t,n){(function(t){e.exports=function(e,a,s){var c={container:t.document.body,offset:0,debounce:15,failsafe:150};void 0!==a&&"function"!=typeof a||(s=a,a={});var u=c.container=a.container||c.container,l=c.offset=a.offset||c.offset,d=c.debounce=a.debounce||c.debounce,p=c.failsafe=a.failsafe||c.failsafe;!0===p?p=150:!1===p&&(p=0);p>0&&p<d&&(p=d+50);for(var h=0;h<n.length;h++)if(n[h].container===u&&n[h]._debounce===d&&n[h]._failsafe===p)return n[h].isInViewport(e,l,s);return n[n.push(function(e,n,a){var s=function(){var e=[];function t(t){for(var n=e.length-1;n>=0;n--)if(e[n][0]===t)return n;return-1}function n(e){return-1!==t(e)}return{add:function(t,o,i){n(t)||e.push([t,o,i])},remove:function(n){var o=t(n);-1!==o&&e.splice(o,1)},isWatched:n,checkAll:function(t){return function(){for(var n=e.length-1;n>=0;n--)t.apply(this,e[n])}}}}(),c=e===t.document.body?t:e,u=(l=s.checkAll(function(e,t,n){f(e,t)&&(s.remove(e),n(e))}),d=n,function(){var e=this,t=arguments,n=p&&!h;clearTimeout(h),h=setTimeout(function(){h=null,p||l.apply(e,t)},d),n&&l.apply(e,t)});var l,d,p,h;i(c,"scroll",u),c===t&&i(t,"resize",u);o&&function(e,t,n){var o=new MutationObserver(function(e){!0===e.some(a)&&setTimeout(n,0)}),i=Array.prototype.filter,r=Array.prototype.concat;function a(t){var n=r.call([],Array.prototype.slice.call(t.addedNodes),t.target);return i.call(n,e.isWatched).length>0}o.observe(t,{childList:!0,subtree:!0,attributes:!0})}(s,e,u);a>0&&setInterval(u,a);function f(n,o){if(!n)return!1;if(!r(t.document.documentElement,n)||!r(t.document.documentElement,e))return!1;if(!n.offsetWidth||!n.offsetHeight)return!1;var i=n.getBoundingClientRect(),a={};if(e===t.document.body)a={top:-o,left:-o,right:t.document.documentElement.clientWidth+o,bottom:t.document.documentElement.clientHeight+o};else{var s=e.getBoundingClientRect();a={top:s.top-o,left:s.left-o,right:s.right+o,bottom:s.bottom+o}}var c=i.right>=a.left&&i.left<=a.right&&i.bottom>=a.top&&i.top<=a.bottom;return c}return{container:e,isInViewport:function(e,t,n){if(!n)return f(e,t);var o=function(e,t,n){return{watch:function(){s.add(e,t,n)},dispose:function(){s.remove(e)}}}(e,t,n);return o.watch(),o},_debounce:n,_failsafe:a}}(u,d,p))-1].isInViewport(e,l,s)};var n=[],o="function"==typeof t.MutationObserver;function i(e,t,n){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)}var r=function(){return!t.document||(t.document.documentElement.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:t.document.documentElement.contains?function(e,t){return e!==t&&!!e.contains&&e.contains(t)}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1})}}).call(this,n(157))},122:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(2),i=n(4),r=n(18),a=n(3),s=new(function(){function e(){}return e.prototype.initialize=function(){this.loadCodeOnInteraction=this.loadCodeOnInteraction.bind(this),o.a.onPassiveEvent(document.querySelectorAll(".search-menu-button"),["mouseenter","touchstart","click"],this.loadCodeOnInteraction)},e.prototype.load=function(){this.getSource().then(function(e){return e.SearchMenu.initialize(r.a.book,r.a.bookElement)})},e.prototype.loadCodeOnInteraction=function(e){var t=this,n="click"==e.type||i.b.isTouchEventOnTouchDevice(e.type);o.a.offPassiveEvent(document.querySelectorAll(".search-menu-button"),[e.type],this.loadCodeOnInteraction),this.getSource().then(function(i){var a=i.SearchMenu;n&&(a.initialize(r.a.book,r.a.bookElement),a.showSearch()),o.a.offPassiveEvent(document.querySelectorAll(".search-menu-button"),n?["mouseenter","touchstart","click"]:[e.type],t.loadCodeOnInteraction)})},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=a.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return Promise.all([n.e(6),n.e(41),n.e(0),n.e(2),n.e(32)]).then(n.bind(null,315))},e}())},123:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(9),i=$(document),r=new(function(){function e(){this.handleCheckboxClick=this.handleCheckboxClick.bind(this),this.updateBrowsableStopMode=this.updateBrowsableStopMode.bind(this)}return e.prototype.initialize=function(){this.$browsableStopCheckbox=$("#browsable-stop-pause-checkbox"),this.$browsableStopLabel=$("#browsable-stop-pause-label"),this.$browsableStopCheckbox.on("click",this.handleCheckboxClick),this.$browsableStopLabel.on("click",this.handleCheckboxClick),i.on("settingsUpdated",this.updateBrowsableStopMode),this.updateBrowsableStopMode()},e.prototype.updateBrowsableStopMode=function(){var e=o.a.get("browsable-pause-type");this.browsablePauseType!=e&&(this.browsablePauseType=e,this.syncUI())},e.prototype.handleCheckboxClick=function(){i.trigger("settingsMenuItemClick"),this.$browsableStopCheckbox.is(".selected")?this.setBrowsablePauseTypeToPause():this.setBrowsablePauseTypeToFullStop()},e.prototype.isBrowsablePause=function(){return"browsable-pause-pause"==this.browsablePauseType||"PAUSE"==this.browsablePauseType},e.prototype.isBrowsableStop=function(){return"browsable-pause-stop"==this.browsablePauseType||"STOP"==this.browsablePauseType},e.prototype.setBrowsablePauseTypeToFullStop=function(){this.setBrowsablePauseType("browsable-pause-stop")},e.prototype.setBrowsablePauseTypeToPause=function(){this.setBrowsablePauseType("browsable-pause-pause")},e.prototype.setBrowsablePauseType=function(e){o.a.set("browsable-pause-type",e),this.updateBrowsableStopMode()},e.prototype.syncUI=function(){this.$browsableStopCheckbox.toggleClass("selected","browsable-pause-stop"===this.browsablePauseType)},e}())},124:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(3),i=new(function(){function e(){}return e.prototype.initialize=function(e,t){this.getSource().then(function(n){return n.BooksMenu.initialize(e,t)})},e.prototype.clean=function(){this.sourcePromise&&this.sourcePromise.then(function(e){return e.BooksMenu.clean()})},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=o.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return n.e(14).then(n.bind(null,317))},e}())},125:function(e,t,n){"use strict";var o=n(0),i=$(document),r=function(){function e(){}return e.prototype.fetchAllBooksProgress=function(){var e=this;return this.allBooksProgressPromise?this.allBooksProgressPromise:this.allBooksProgressPromise=new Promise(function(t,n){o.a.postToOurBackend(o.a.getAbsoluteUrl("api/progress/getAllBooksProgress"),function(n){return t(e.transformBookProgress(n))},function(e){return n(e)})})},e.prototype.fetchBookProgress=function(e){return new Promise(function(t,n){o.a.postToOurBackend(o.a.getAbsoluteUrl("api/progress/getBookProgress"),function(e){return t(e)},function(e){return n(e)},{book:e})})},e.prototype.transformBookProgress=function(e){for(var t={},n=0,o=e;n<o.length;n++){var i=o[n];t[i.bookShortName]=i}return t},e.prototype.fetchProgress=function(e){return new Promise(function(t,n){o.a.postToOurBackend(o.a.getAbsoluteUrl("api/progress/getBookElementProgress"),function(e){if(e&&e.text&&"string"==typeof e.text)try{return void t(JSON.parse(e.text))}catch(e){return void n("Invalid JSON")}t(e)},function(e){return n(e)},{book:e.book.shortName,bookElement:e.shortName,meapVersion:e.meapVersion})})},e.prototype.storeProgress=function(e,t,n,r){return i.trigger("progressStore",t),new Promise(function(i,a){o.a.postToOurBackend(o.a.getAbsoluteUrl("api/progress/save"),function(){return i(!0)},function(e){console.log(e),i(!1)},{book:e.book.shortName,bookElement:e.shortName,contentItemIDs:JSON.stringify(t),contentItemID:n,meapVersion:e.meapVersion},!1,!r)})},e}(),a=n(32),s=function(){function e(){this.webService=new r}return e.prototype.fetchBookProgress=function(e){var t=this;return new Promise(function(n,o){t.webService.fetchBookProgress(e).then(function(e){return n(e)}).catch(function(){return a.a.fetchBookProgress(e).then(function(e){return n(e)}).catch(function(e){return o(e)})})})},e.prototype.fetchAllBooksProgress=function(){var e=this;return new Promise(function(t,n){e.webService.fetchAllBooksProgress().then(function(e){return t(e)}).catch(function(){return a.a.fetchAllBookProgresses().then(function(e){return t(e)}).catch(function(e){return n(e)})})})},e.prototype.fetchProgress=function(e){var t=this;return new Promise(function(n,o){var i=a.a.fetchProgress(e.book.shortName,e.shortName),r=t.webService.fetchProgress(e);Promise.all([i,r]).then(function(o){var i=Object.assign({},o[0],o[1]);a.a.storeProgress(e.book.shortName,e.shortName,i,t.getMaxPropertyNumber(i)),n(i)}).catch(function(t){return a.a.fetchProgress(e.book.shortName,e.shortName).then(function(e){return n(e)}).catch(function(e){return o(e)})})})},e.prototype.storeProgress=function(e,t,n){return this.webService.storeProgress(e,t,n).catch(function(e){return console.log("Couldn't save book progress to central server")}),a.a.storeProgress(e.book.shortName,e.shortName,t,n)},e.prototype.getMaxPropertyNumber=function(e){var t=1;for(var n in e){var o=parseInt(n);!Number.isNaN(o)&&o>t&&(t=o)}return""+t},e}(),c=n(4),u={progressService:new Promise(function(e,t){c.b.loadDeviceInfo().then(function(t){e(function(e){switch(e){case c.a.Browser:return new r;case c.a.Cordova:case c.a.Electron:return new s}}(t.platform))}).catch(function(e){return t(e)})})};t.a=u},13:function(e,t,n){"use strict";var o=function(){function e(){this.titleRegExes=[/Chapter (\d+\.?)\s*:?/,/(?:Part|Section|Lesson|Unit) (\d+\.?)/,/Appendix ([A-Z]\.?)/,/^\d+(\.)?\s+/],this.sectionSubsectionRegEx=/(\d+\.?)+/,this.appendixSectionSubsectionRegEx=/([A-Z]\.?(?:\d+\.?)+)/,this.bookElementTypeRegex=/^(?:Chapter|Part|Section|Lesson|Unit|Appendix)\s+(?:\d+\.?)/,this.bookElementTypeNumberingRegex=/^\d+\.?\s+/,this.bookElementAppendixRegex=/^[A-Z]\.?\s+/,this.sectionRegEx=/^((\d+|[A-Z])\.)(\d+(\.)?)/,this.subsectionRegEx=/^((\d+|[A-Z])\.)(\d+\.)(\d+(\.)?)/}return e.prototype.isSpecialPathPartInsteadOfBookElement=function(e){return this.isSpecialDiscussionPart(e)||this.isDiscussionErrata(e)||this.isSpecialCommentPart(e)},e.prototype.isSpecialDiscussionPart=function(e){return"discussion"==e||"discussions"==e},e.prototype.isDiscussionErrata=function(e){return"discussion-errata"==e},e.prototype.isSpecialCommentPart=function(e){return 0==(e||"").indexOf("comment-")},e.prototype.isSpecialFreeEbookOpenPart=function(e){return"fb"==e},e.prototype.isChapterOrAppendix=function(e){if(!e)return!1;for(var t=0,n=this.titleRegExes;t<n.length;t++){var o=n[t];if(e.match(o))return!0}return!1},e.prototype.isSection=function(e){return!!e&&(null!=e.match(this.sectionRegEx)&&!this.isSubsection(e))},e.prototype.isSubsection=function(e){return!!e&&null!=e.match(this.subsectionRegEx)},e.prototype.extractNumbering=function(e){if(!e||!e.trim())return"";for(var t=null,n=0,o=this.titleRegExes;n<o.length;n++){var i=o[n];if((t=e.match(i))&&t.length>=2)return t[1]}return(t=e.match(this.appendixSectionSubsectionRegEx))?t[0]:(t=e.match(this.sectionSubsectionRegEx))?t[0]:""},e.prototype.extractTitle=function(e){for(var t=0,n=this.titleRegExes;t<n.length;t++){var o=n[t],i=e.match(o);if(i&&i[0]){e=e.replace(i[0],"");break}}return e.replace(this.extractNumbering(e),"")},e.prototype.extractBookElementType=function(e){var t=e.match(this.bookElementTypeRegex);return null!=t?(t[0]||"").trim():null!=(t=e.match(this.bookElementTypeNumberingRegex))?"Chapter "+(t[0]||"").trim():null!=(t=e.match(this.bookElementAppendixRegex))?"Appendix "+(t[0]||"").trim():""},e.prototype.extractCleanBookElementTitle=function(e){if(!e)return e;for(var t=0,n=this.titleRegExes;t<n.length;t++){var o=n[t],i=e.match(o);if(i)return e.replace(i[0],"")}var r=e.match(this.bookElementAppendixRegex);return null!=r?e.replace(r[0],""):e},e.prototype.beautifyBookElementShortName=function(e,t){if(void 0===t&&(t=!1),!e)return e;var n=e.replace(/-/g," ");return t&&(n=n.replace(/./,n.toUpperCase()[0])),n},e}();t.a=new o},14:function(e,t,n){"use strict";var o=n(4),i=n(5),r=n(2),a=$(document),s=!1;o.b.loadDeviceInfo().then(function(e){s=e.isIOS});var c=function(){function e(){var e=this;this.isCloseModalDisabled=!1,a.on("keyup",function(t){27==t.keyCode&&e.hideFoundationModal($(".reveal-modal.shown"))}),a.on("click",".close-reveal-modal, .close-reveal-modal-button",function(t){e.hideFoundationModal($(t.target).closest(".reveal-modal"))}),a.on("mousedown",function(t){if(!$(t.target).closest(".reveal-modal").length){var n=$(".reveal-modal.shown");n.length&&e.hideFoundationModal(n)}}),$.Velocity&&$.Velocity.RegisterEffect("manning.fromLeftOut",{defaultDuration:350,calls:[[{opacity:[0,1],translateX:-10,translateZ:0}]],reset:{translateX:0}}),$.Velocity&&$.Velocity.RegisterEffect("manning.fromLeftIn",{defaultDuration:400,calls:[[{opacity:[1,0],translateX:[0,-10],translateZ:0}]]})}return e.prototype.changeElementType=function(e,t){var n={};$.each(e.attributes,function(e,t){n[t.nodeName]=t.nodeValue}),$(e).replaceWith(function(){return $("<"+t+" />",n).append($(this).contents())})},e.prototype.getFirstVisibleElement=function(e){if(null==e||0==e.length)return null;for(var t=0;t<e.length;t++){var n=e[t],o=n.getBoundingClientRect();if(o.width>0&&o.height>0&&o.bottom>0)return n}return null},e.prototype.visuallyShowHearting=function(){var e=this,t=$(".header-icon-notification.wish-list-notification"),n=$(".books-button");t.removeClass("hidden disappear").addClass("appear"),this.addIconButtonGlow(n),setTimeout(function(){t.removeClass("appear").addClass("disappear"),e.removeIconButtonGlow(n)},2e3)},e.prototype.showTextSideMenu=function(e,t,n){var o=this,s=document.getElementById("book-main-content-container"),c=$(s),u=t.offset(),l=t.height(),d=t.width(),p=this.getNecessaryMenuFitShift(e,t),h=i.a.getComputedTranslateX(s),f=function(){a.trigger("textSideMenuOpened");var t=o.getMainContainerViewRectangle(),i=o.getViewportRectangle(),s=e.height(),c=u.top-.4*l,f=c+s,g=!1;f>i.bottom&&f<t.bottom&&(g=!0),f>t.bottom&&(c-=f-t.bottom)<t.top&&(c=t.top),e.css({top:c,left:u.left+d+20+p-h}),e.removeClass("closed").addClass("open"),e.velocity("manning.fromLeftIn",function(){g?(a.trigger("requestScrollToElement",[e.get(0)]),n&&r.a.setTimeout(n,1e3)):n&&n()})};0==p?f():c.velocity({translateX:p},f)},e.prototype.closeTextSideMenu=function(e,t){a.trigger("textSideMenuClosed");var n=$(document.getElementById("book-main-content-container"));e.velocity("manning.fromLeftOut",{duration:200,delay:200,complete:function(){e.removeClass("open").addClass("closed"),n.velocity({translateX:0},{complete:function(){n.css("transform",""),t&&t()}})}})},e.prototype.getNecessaryMenuFitShift=function(e,t){var n=document.documentElement.clientWidth,o=e.width(),r=t.offset().left,a=i.a.getComputedTranslateX(document.getElementById("book-main-content-container")),s=n-(o+r+t.width()+60)+a;return s>0?0:s},e.prototype.getMainContainerViewRectangle=function(){var e=$("#book-markup-container"),t=e.offset();return{top:t.top,bottom:t.top+e.height()}},e.prototype.getViewportRectangle=function(){return{top:window.pageYOffset,bottom:window.pageYOffset+$(window).height()}},e.prototype.getMarginRight=function(e){if(null==e||0==e.length)return 0;var t=parseFloat(e.css("margin-right"));return Number.isNaN(t)?0:t},e.prototype.swapNodes=function(e,t){if(e&&t){var n=e.parentNode,o=e.nextSibling===t?e:e.nextSibling;t.parentNode.insertBefore(e,t),n.insertBefore(t,o)}},e.prototype.addIconButtonGlow=function(e){e&&e.length&&(e.addClass("glow"),e.find(".fa").addClass("glow-text"),e.off("animationiteration webkitAnimationIteration"))},e.prototype.isHover=function(e){if(!e||!e.length)return!1;try{return e.is(":hover")}catch(e){return!1}},e.prototype.removeIconButtonGlow=function(e){var t;e&&e.length&&(e.is(".glow")&&(e.one("animationiteration webkitAnimationIteration",function(){e.removeClass("glow"),e.find(".fa").removeClass("glow-text"),clearTimeout(t)}),t=setTimeout(function(){e.removeClass("glow"),e.find(".fa").removeClass("glow-text")},2100)))},e.prototype.showFoundationModal=function(e){var t=this;if(e&&e.length&&!e.is(".shown")){$(document).trigger("modalOpening"),this.isCloseModalDisabled=!0,setTimeout(function(){return t.isCloseModalDisabled=!1},400),this.hideFoundationModal($(".reveal-modal.shown"));var n=$(".reveal-modal-bg");n.length||(n=$("<div class='reveal-modal-bg' style='display: none;'></div>"),$("body").append(n)),s&&e.find("input[type=text]").length&&window.scroll(0,0),n.css("display","block");var o=Math.max(e.height(),600);e.css({top:0,display:"block",visibility:"visible"}),e.velocity({translateY:-1.5*o+"px"},{duration:0}),e.addClass("shown");var r=1.1*i.a.getTopNavBarHeight(!0);e.velocity({translateY:r+"px"},{duration:300}),$("body").addClass("page-is-showing-modal")}},e.prototype.hideFoundationModal=function(e){this.isCloseModalDisabled||e&&e.length&&($("body").removeClass("page-is-showing-modal"),e.is(".close-disabled")||($(".reveal-modal-bg").css("display","none"),e.velocity({translateY:-1.5*e.height()+"px"},{duration:250,easing:"ease-out",complete:function(){e.css({display:"none",visibility:"hidden"}),e.removeClass("shown"),a.trigger("modalClosed",e)}})))},e.prototype.unwrapIntoParent=function(e){if(e&&0!==e.length)if(e.length>1)for(var t=0;t<e.length;t++)this.unwrapIntoParent(e.eq(t));else{var n=e[0],o=n.childNodes,i=n.nextSibling,r=n.parentNode;if(e.remove(),i)for(t=o.length-1;t>=0;t--)r.insertBefore(o[t],i);else for(var t=0;t<o.length;t++)r.appendChild(o[t]);r.normalize()}},e.prototype.findFirstPrevious=function(e,t,n){if(void 0===n&&(n=100),!e||0===e.length)return $(null);for(var o=e,i=0;(o=this.getPreviousElementIncludingTree(o))&&o.length>0;){if(o.is(t))return o;if(o.is("ul, .callout-container")){var r=o.children().last();if(r.is(t))return r;var a=this.findFirstPrevious(r,t,Math.max(n-i,0));if(a.length>0)return a}if(++i>n)break}return $(null)},e.prototype.findFirstNext=function(e,t,n){if(void 0===n&&(n=100),!e||0===e.length)return $(null);for(var o=e,i=0;(o=this.getFollowingElementIncludingTree(o))&&o.length>0;){if(o.is(t))return o;if(o.is("ul, ol, .callout-container")){var r=o.children().first();if(r.is(t))return r;var a=this.findFirstNext(r,t);if(a.length>0)return a}if(++i>=n)break}return $(null)},e.prototype.getPreviousElementIncludingTree=function(e){if(!e||0===e.length)return $(null);var t=e.prev();return 0!=t.length?t:e.is("li")?e.parent().prev():$(null)},e.prototype.findFirstPreviousStopAt=function(e,t,n,o){if(void 0===o&&(o=100),!e||0===e.length)return $(null);for(var i=e,r=0;(i=this.getPreviousElementIncludingTree(i))&&i.length>0;){if(i.is(t))return i;if(0!=i.find(n).length)break;if(i.is("ul, ol, .callout-container")){var a=i.children().last();if(a.is(t))return a;var s=this.findFirstPrevious(a,t,Math.max(o-r,0));if(s.length>0)return s}if(++r>o)break}return $(null)},e.prototype.getFollowingElementIncludingTree=function(e){if(!e||0===e.length)return $(null);var t=e.next();if(0!=t.length)return t;if(e.is("li"))return e.parent().next();var n=e.closest(".callout-container");return n.length?n.next():$(null)},e.prototype.precedesElement=function(e,t){if(!e||!t)return 0;var n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_DISCONNECTED&&console.log("Node is disconnected!"),n&Node.DOCUMENT_POSITION_PRECEDING},e.prototype.isContainedWithElement=function(e,t){var n=e.compareDocumentPosition(t);return n&Node.DOCUMENT_POSITION_CONTAINS||n&Node.DOCUMENT_POSITION_CONTAINED_BY},e.prototype.wrapToHtmlElement=function(e,t,n){return"<"+e+" "+this.getAttributesString(t)+">"+this.escapeHtmlString(n)+"</"+e+">"},e.prototype.createTextNodeTextRanges=function(e){for(var t={value:"",textNodeRanges:[]},n=0;n<e.length;n++){var o=e[n],i=o.nodeValue,r=t.value;t.value+=i,t.textNodeRanges.push({start:r.length,end:t.value.length,textNode:o})}return t},e.prototype.splitRanges=function(e,t,n){for(var o=e.textNodeRanges,i=[],r=[],a=[],s=0;s<o.length;s++){var c=o[s];c.end<=t?i.push(c):c.start>=n?a.push(c):r.push(c)}return{previousRanges:i,matchingRanges:r,followingRanges:a}},e.prototype.walkTheDOM=function(e,t){for(t(e),e=e.firstChild;e;)this.walkTheDOM(e,t),e=e.nextSibling},e.prototype.getAllDescendantTextNodes=function(e){var t=[];return this.walkTheDOM(e,function(e){3===e.nodeType&&t.push(e)}),t},e.prototype.getTextWidth=function(e,t){var n=(this.canvas||(this.canvas=document.createElement("canvas"))).getContext("2d");return n.font=t,Math.floor(n.measureText(e).width)},e.prototype.getAttributesString=function(e){if(!e)return"";var t="";for(var n in e)t+=" "+n+'="'+e[n]+'"';return t},e.prototype.escapeHtmlString=function(e){return void 0===e&&(e=""),e.replace("<","&lt;").replace(">","&gt;")},e.prototype.getClassNameMatchingRegEx=function(e,t){if(e&&t&&e.classList)for(var n=e.classList,o=0;o<n.length;o++)if(n[o].match(t))return n[o]},e.prototype.getFirstBlockAncestor=function(e){if(null==e)return null;for(var t=0;null!=e;){e=e.parentNode,t++;var n=$(e).css("display");if("block"===n||"list-item"==n||"flex"==n||"grid"==n||"table"==n)return e;if(t>50)return null}return null},e.prototype.textNodesUnder=function(e){var t=[];for(e=e.firstChild;e;e=e.nextSibling)3==e.nodeType?t.push(e):t=t.concat(this.textNodesUnder(e));return t},e}();t.a=new c},155:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(9),i=new(function(){function e(){this.handleLiveaudioDisabledClick=this.handleLiveaudioDisabledClick.bind(this)}return e.prototype.initialize=function(){$("#disable-live-audio-checkbox, #disable-live-audio-label").on("click",this.handleLiveaudioDisabledClick)},e.prototype.handleLiveaudioDisabledClick=function(){this.setLiveaudioDisabled(!$("#disable-live-audio-checkbox").is(".selected")),$(document).trigger("settingsMenuItemClick")},e.prototype.setLiveaudioDisabled=function(e){$("#disable-live-audio-checkbox").toggleClass("selected",e),o.a.set("live-audio-disabled",e),$("body").toggleClass("live-audio-disabled",e),$(document).trigger("sectionTitleRespositionRequested")},e}())},156:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(3),i=new(function(){function e(){}return e.prototype.showProfileImageUploadModal=function(){this.getSource().then(function(e){e.ProfileImageUploadModal.show()})},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=o.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return Promise.all([n.e(0),n.e(1),n.e(9),n.e(48),n.e(30)]).then(n.bind(null,316))},e}())},157:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},16:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=new(function(){function e(){}return e.prototype.getItem=function(e){try{return localStorage.getItem(e)}catch(t){return console.log("Error getting item from local storage",e),""}},e.prototype.setItem=function(e,t){try{return localStorage.setItem(e,t)}catch(t){return console.log("Error setting item to local storage",e),""}},e.prototype.saveTemporarily=function(e,t,n){try{return localStorage.setItem(e,JSON.stringify({value:JSON.stringify(t),timestamp:(new Date).getTime()+n})),t}catch(e){return t}},e.prototype.loadTemporarily=function(e){try{var t=JSON.parse(localStorage.getItem(e));return!!t&&((new Date).getTime()<t.timestamp&&JSON.parse(t.value))}catch(e){return!1}},e.prototype.remove=function(e){try{localStorage.removeItem(e)}catch(e){}},e}())},17:function(e,t,n){"use strict";var o=n(5),i=n(14),r=n(120),a=n(2),s=n(12),c=n(13),u=n(0),l=function(){function e(){this.listingRegEx=/listing(\s)+[0-9]+\.[0-9]+/gi,this.figureRegEx=/figure(\s)+[0-9]+\.[0-9]+/gi,this.tableRegEx=/table(\s)+[0-9]+\.[0-9]+/gi,this.browsableRegExes=[this.listingRegEx,this.figureRegEx,this.tableRegEx]}return e.prototype.groupSmallListItemsIfNecessary=function(e){for(var t=[],n=[],o=[],i=0,r=e;i<r.length;i++){var a=r[i],s=a.closest("ul, ol");if(0==s.length)t.push([a]);else if(this.isListWithLargeItems(s))t.push([a]);else{var c=s.get(0),u=n.indexOf(c);-1==u&&(n.push(c),o.push([]),u=n.length-1),o[u].push(a)}}return t.concat(o)},e.prototype.insertLoadingBoxes=function(){try{var e=document.querySelector("#book-content-main-row #book-markup-container");if(!e)return;for(var t=e.querySelectorAll("h2, h3"),n=0;n<t.length;n++){var o=t[n].parentElement;if(null==o.nextElementSibling||null!=o.nextElementSibling.querySelector("h2, h3")){var i=document.createElement("div");i.innerHTML=c();for(var r=0;r<i.children.length;r++)a=i.children[r],(s=o).parentNode.insertBefore(a,s.nextSibling)}}}catch(e){}var a,s;function c(){for(var e=u(1,6),t=[0,10,20,30,40,50,70,90],n="",o=0;o<=e;o++)n+='<div class="readable-text"><span class="placeholder" style="margin-right: '+t[u(0,t.length-1)]+'px"><span class="placeholder-animated-background">&nbsp;</span></span> </div>';return n}function u(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},e.prototype.getHeadingSectionCost=function(e,t,n){if(null==e||null==t||null==n)return 0;var o=c.a.isChapterOrAppendix(t.text().trim())?e.tokenPrice:this.getSectionSubsectionTokenPrice(c.a.extractNumbering(t.text().trim()),e.sectionSubsectionPrices);return o<=0?0:0==this.getContainedScrambledAndUnscrambledParagraphs(t,n).scrambledParagraphs.length?0:o},e.prototype.getSectionSubsectionTokenPrice=function(e,t){if(null==t||0==t.length)return 0;var n=t.find(function(t){return t.shortName==e});return null!=n?n.tokenPrice:0},e.prototype.getSectionSubsectionFullTokenPrice=function(e,t){if(null==t||0==t.length)return 0;var n=t.find(function(t){return t.shortName==e});return null!=n?n.fullTokenPrice:0},e.prototype.cleanBookTitle=function(e,t){if(void 0===t&&(t=!1),!e)return e;try{var n=e.indexOf(":");e=-1!=n?e.substr(0,n):e,t&&(e=e.replace(/second edition/i,"2nd").replace(/third edition/i,"3rd").replace(/fourth edition/i,"4th").replace(/fifth edition/i,"5th").replace(/sixth edition/i,"6th").replace(/seventh edition/i,"7th").replace(/eight edition/i,"8th").replace(/ninth edition/i,"9th"));var o=e.toLowerCase().indexOf("meap");return-1!=o?e.substr(0,o):e}catch(t){return e}},e.prototype.updateTitle=function(e){e=(e||"").trim(),document.title=e||"livebook"},e.prototype.updateMetaContent=function(e){e?$(".meta-description").attr("content",e):this.resetMetaContent()},e.prototype.updateMetaImage=function(e){e?$(".meta-image").attr("content",e):this.resetMetaImage(),$(".meta-image").attr("content",e)},e.prototype.resetMetaImage=function(){$(".meta-image").attr("content",u.a.getLivebookCdn()+"assets/images/cover.png")},e.prototype.updateCanonicalLink=function(e,t,n){$("link[rel='canonical']").attr("href",u.a.getAbsoluteBookElementUrl(e,t,n))},e.prototype.updateStructureScript=function(){},e.prototype.resetStructureScript=function(){},e.prototype.resetMetaContent=function(){$(".meta-description").attr("content","liveBooks are enhanced books. They add narration, interactive exercises, code execution, and other features to eBooks.")},e.prototype.matchesListingRegEx=function(e){return this.matchesRegEx(e,this.listingRegEx)},e.prototype.matchesFigureRegEx=function(e){return this.matchesRegEx(e,this.figureRegEx)},e.prototype.matchesTableRegEx=function(e){return this.matchesRegEx(e,this.tableRegEx)},e.prototype.matchesRegEx=function(e,t){return!(null==e||""==e||!e.match)&&(null!=t&&e.match(t))},e.prototype.matchesBrowsableRegEx=function(e){return!(!e||!e.match)&&!!(e.match(this.listingRegEx)||e.match(this.figureRegEx)||e.match(this.tableRegEx))},e.prototype.getContainedScrambledAndUnscrambledParagraphs=function(e,t){var n={scrambledParagraphs:[],unscrambledParagraphs:[],neverScrambledParagraphs:[]},o=e.text().trim();if(c.a.isChapterOrAppendix(o)){for(var i=document.querySelectorAll(".readable-text.scrambled"),r=0;r<i.length;r++)n.scrambledParagraphs.push(i[r]);var a=document.querySelectorAll(".readable-text.unscrambled");for(r=0;r<a.length;r++)n.unscrambledParagraphs.push(a[r]);var s=document.querySelectorAll(".readable-text:not(.unscrambled):not(.scrambled)");for(r=0;r<s.length;r++)n.neverScrambledParagraphs.push(s[r]);return n}var u=t.index(e),l=t.slice(u+1),d=c.a.isSection(o),p=c.a.isSubsection(o),h=null;l.each(function(e,t){var n=$(t),o=n.text().trim();if(d){if(c.a.isSection(o))return h=n,!1}else if(p&&(c.a.isSubsection(o)||c.a.isSection(o)))return h=n,!1});var f=parseInt(e.attr("refid")),g=parseInt(null!=h&&h.length>0?h.attr("refid"):$(".readable-text.scrambled:last-of-type, .readable-text.unscrambled:last-of-type").last().attr("refid"));if(!Number.isNaN(f)&&!Number.isNaN(g))for(r=f;r<=g;r++){var m=document.getElementById(""+r),v=$(m);v.is(".readable-text")&&(v.is(".scrambled")?n.scrambledParagraphs.push(m):v.is(".unscrambled")?n.unscrambledParagraphs.push(m):v.hasClass("scrambled")||v.hasClass("unscrambled")||n.neverScrambledParagraphs.push(m))}return n},e.prototype.restoreOriginalHtml=function(e){if(e&&e.originalInnerHTML){var t=$(e);t.find(".highlighted-text").off(),e.innerHTML=e.originalInnerHTML;var n=t.find("img");n.addClass("clickable"),a.a.onEventWithCooldown(n,"click touchstart",function(e){return r.a.handleCueBallClick(e)})}},e.prototype.getCodeMirrorSyntaxHighlightMode=function(e,t){void 0===t&&(t="");var n=(e.programmingLanguage||"").toLowerCase();return"n/a"!==n?n:""},e.prototype.getTextFragmentDuration=function(e){if(!e||!e.cues||0==e.cues.length)return 0;var t=e.cues;return t[t.length-1].endTime-t[0].startTime},e.prototype.extractFileNameNumber=function(e){if(!e||!e.match)return null;var t=e.match(/([0-9]+)\.[a-zA-Z]+$/);return!t||t.length<2?this.extractNumberFromStringFileNameNumber(e):parseInt(t[1])},e.prototype.extractNumberFromStringFileNameNumber=function(e){var t=e.match(/([a-zA-Z]+)\.[a-zA-Z]+$/);if(!t||t.length<2)return null;switch(t[1].trim().toLowerCase()){case"one":return 1;case"two":return 2;case"three":return 3;case"four":return 4;case"five":return 5;case"six":return 6;case"seven":return 7;case"eight":return 8;case"nine":return 9}return null},e.prototype.hasBrowsables=function(e){return!!e&&(null!=e.browsables&&e.browsables.length>0)},e.prototype.getMostImportantBrowsable=function(e){if(!e||0==e.length)return null;if(1==e.length)return e[0];for(var t=null,n=null,o=0;o<e.length;o++){var i=e[o];$(i).is(".listing-container")?t=i:n=i}return t||n},e.prototype.getMatchingBrowsable=function(e,t){if(!e||null==e.length)return null;for(var n=null,o=0;o<e.length;o++){if(n=e[o],-1!=$(n).find("h5").text().indexOf(t))return n}return n},e.prototype.getNextCueForPlaying=function(e){if(!e)return null;var t=!1;return $(e).is(".fragment-played")&&(t=!0),!t&&e.lastPlayedCue?e.lastPlayedCue:e.cues?e.cues[0]:null},e.prototype.getAllFocusableElements=function(){var e=$("#book-markup-container"),t=[];return e.children().each(function(e,n){if(0!=e&&-1==n.className.indexOf("introduction-summary")){var o=$(n);o.is(".callout-container, ul, ol")?(o.is(".callout-container")&&t.push(n),o.find(".readable-text").each(function(e,n){t.push(n)})):t.push(n)}}),t},e.prototype.getTextFragmentElements=function(){return Array.prototype.slice.call(document.querySelectorAll(".readable-text"))},e.prototype.getBookmarkableAndNotableItems=function(){for(var e=this.getTextFragmentElements(),t=1;t<e.length&&"LI"===e[t].nodeName;t++)e.splice(t,1),t--;return e},e.prototype.getTextElementPositionPointCenter=function(e){return e&&0!==e.length?e.position().top+e.height()/2:0},e.prototype.getTextElementPositionPointTop=function(e){if(!e||0===e.length)return 0;var t=e.position().top;if(e.find("h1").length>0&&(t+=o.a.getElementLineHeight(e)/2),e.find("h2").length>0&&(t+=o.a.getElementLineHeight(e)/11),e.is(".collapsible-panel")){var n=e.find(".button-collapsible-panel");t=e.position().top+1.5*n.height()}return e.is(".listing-line-group")&&(t=e.offset().top-$("#book-main-content-container").offset().top-o.a.getElementLineHeight(e)),t},e.prototype.elementContainsCueball=function(e,t){if(!e)return!1;var n=i.a.getAllDescendantTextNodes(e),o=i.a.createTextNodeTextRanges(n),r=o.value.indexOf(t),a=r+t.length;if(-1===r&&(a=(r=o.value.indexOf(t.replace("<","&lt;").replace(">","&gt;")))+t.length,-1===r))return!1;for(var s=i.a.splitRanges(o,r,a).matchingRanges,c=0;c<s.length;c++){var u=s[c],l=u.textNode;if(l&&l.nextSibling&&(c!=s.length-1||u.end<=1.1*a))for(var d=l.nextSibling;null!=d;){if("IMG"==d.nodeName)return this.extractFileNameNumber(d.src);if("#text"===d.nodeName&&d.textContent.trim())break;d=d.nextSibling}}return!1},e.prototype.getOwnerSectionHeading=function(e,t){if(null==e||0==e.length)return null;var n=e.text().trim();if(!c.a.isSubsection(n))return null;for(var o=t.index(e)-1;o>=0;o--){var i=t.eq(o);if(c.a.isSection(i.text().trim()))return i}return null},e.prototype.getHeadings=function(){return this.getSecAndSubsecFragElements().filter(function(e,t){var n=$(t),o=n.text().trim();return n.children("h1").length>0||c.a.isChapterOrAppendix(o)||c.a.isSection(o)||c.a.isSubsection(o)})},e.prototype.getSecAndSubsecFragElements=function(){return $(this.getTextFragmentElements()).filter(function(e,t){return $(t).children("h1, h2, h3, h4").length>0})},e.prototype.figureOutSectionOrSubsectionFromRefId=function(e){var t=$(this.getSecAndSubsecFragElements()).filter(function(t,n){return parseInt($(n).attr("refId"))<e}).last();return/(([0-9]+\.?)+)/.test(t.children("h1, h2, h3, h4").first().text())?t.children("h1, h2, h3, h4").first().text().match(/(([0-9]+\.?)+)/)[0]:void 0},e.prototype.getClosestHeading=function(e,t){var n=parseInt(e.attr("refid"));if((!n||Number.isNaN(n))&&(e.is("ul, ol")&&(n=parseInt(e.children().first().attr("refid"))),!n||Number.isNaN(n)))return null;var o=null;return t.each(function(e,t){var i=$(t);if(parseInt(i.attr("refid"))>n)return!1;o=i}),o},e.prototype.expandListOfScrambledParagraphsIfNecessary=function(e){for(var t=[],n=0,o=e;n<o.length;n++){var i=o[n].closest("ul, ol");if(i.length>0){var r=i.find("li.readable-text.scrambled");this.isListWithLargeItems(i)||r.each(function(e,n){t.push($(n))})}}for(var a={},s=[],c=0,u=e.concat(t);c<u.length;c++){var l=u[c],d=l.attr("refid");a[d]||(a[d]=!0,s.push(l))}return s.sort(function(e,t){return parseInt(e.attr("refid"))-parseInt(t.attr("refid"))}),s},e.prototype.isListWithLargeItems=function(e){if(null==e||0==e.length)return!1;for(var t=e.find("li.readable-text"),n=0;n<t.length;n++)if(s.a.getNumberOfWords(t.eq(n).text())>=40)return!0;return!1},e}();t.a=new l},18:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(16),i=new(function(){function e(){this.isShoppingCartBusy=!1,this.isUnlockingWholeContentThroughPointingLink=!1,this.shouldImmediatelyPlayLiveaudio=!1}return e.prototype.isFreePreviewActive=function(){return this.isInFreePreview},e.prototype.setFreePreviewActive=function(e){return this.isInFreePreview=e},e.prototype.isFirstTimeBookVisit=function(){if(null==this.book)return!1;try{return!JSON.parse(o.a.getItem("VISITED_BOOKS")||"{}")[this.book.shortName]}catch(e){return!1}},e.prototype.markCurrentBookAsVisited=function(){if(null!=this.book)try{var e=JSON.parse(o.a.getItem("VISITED_BOOKS")||"{}");e[this.book.shortName]=!0,o.a.setItem("VISITED_BOOKS",JSON.stringify(e))}catch(e){return!1}},e}())},2:function(e,t,n){"use strict";var o=$(document),i=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){e=!1}return e}(),r=function(){function e(){this.ids=[]}return e.prototype.onPassiveEvent=function(e,t,n){if(e&&e.length&&t&&t.length)for(var o=0;o<e.length;o++)for(var r=0;r<t.length;r++)e[o].addEventListener(t[r],n,!!i&&{passive:!0})},e.prototype.offPassiveEvent=function(e,t,n){if(e&&e.length&&t&&t.length)for(var o=0;o<e.length;o++)for(var i=0;i<t.length;i++)e[o].removeEventListener(t[i],n)},e.prototype.onEventWithCooldown=function(e,t,n){if(n){var o=!0;e.on(t,function(e){if(o){var t;o=!1;try{t=n.apply(this,arguments)}catch(e){console.log(e)}return setTimeout(function(){return o=!0},500),t}})}},e.prototype.handleDragScroll=function(e){var t=!1,n=0,o=0,i=function(i){t&&(Math.abs(o-i.pageX)>=Math.abs(n-i.pageY)?e.scrollLeft(e.scrollLeft()+.1*(o-i.pageX)):e.scrollTop(e.scrollTop()+.1*(n-i.pageY)))};e.mouseleave(),e.on("mousedown",function(r){t=!0,n=r.pageY,o=r.pageX,e.on("mousemove",i)}),e.on("mouseup mouseleave",function(){t=!1,e.off("mousemove",i)})},e.prototype.handleContainerScroll=function(e){var t=e.currentTarget,n=e.originalEvent,o=n.wheelDelta||-n.detail,i=$(t).outerHeight(),r=t.scrollTop+i-t.scrollHeight>=0,a=t.scrollTop<=0;if(o<0&&r||o>0&&a){var s=n.deltaX||n.wheelDeltaX,c=n.deltaY||n.wheelDeltaY;if(null!=s&&null!=c&&Math.abs(s)>Math.abs(c))return;n.preventDefault()}else;},e.prototype.onDescendantEventWithCooldown=function(e,t,n,o){if(o){var i=!0;e.on(t,n,function(e){if(i){i=!1;try{o.apply(this,arguments)}catch(e){console.log(e)}setTimeout(function(){return i=!0},500)}})}},e.prototype.onDelayedMouseEnter=function(e,t){e&&0!=e.length&&(e.on("mouseenter",function(e){var n=e.currentTarget;clearTimeout(n.timeoutId),n.timeoutId=setTimeout(function(){return t&&t(e)},100)}),e.on("mouseleave",function(e){return clearTimeout(e.currentTarget.timeoutId)}))},e.prototype.onScrollStop=function(e,t,n){var o=this,i=0;e.on("scroll",function(e){clearTimeout(i),i=o.setTimeout(function(){return t&&t(e)},n)})},e.prototype.triggerDocumentEventAsync=function(e,t){setTimeout(function(){return o.trigger(e,t)},10)},e.prototype.setTimeout=function(e,t){var n=setTimeout(e,t);return this.ids.push(n),n},e.prototype.clearTimers=function(){for(var e=0,t=this.ids;e<t.length;e++){var n=t[e];clearTimeout(n)}this.ids=[]},e}();t.a=new r},21:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o={bookElementRoute:"/book/:book/:bookElement?/:additional?",meapElementRoute:"/book/:book/:bookElement/v-:meapVersion/:additional?",reviewElementRoute:"/book/:book/:bookElement/r-:reviewVersion/:additional?",meapEditorRoute:"/edit/:book/:bookElement/v-:meapVersion/:additional?",editorRoute:"/edit/:book/:bookElement?/:additional?",reviewEditorRoute:"/edit/:book/:bookElement/r-:reviewVersion/:additional?",exerciseSuiteRoute:"/exercise-suite/:exerciseSuite?",catalogRoute:"/catalog/:category?",getCurrentRouteInfo:function(){return this.getRouteInfo(this.getCleanRoute(document.location.hash||document.location.pathname))},getRouteInfo:function(e){var t={isEditLink:e.indexOf("/edit/")>=0},n=new page.Route(this.meapElementRoute);return n.match(e,t)?t:(n=new page.Route(this.reviewElementRoute)).match(e,t)?t:(n=new page.Route(this.bookElementRoute)).match(e,t)?t:(n=new page.Route(this.meapEditorRoute)).match(e,t)?t:(n=new page.Route(this.editorRoute)).match(e,t)?t:null},getCleanRoute:function(e){var t=e.indexOf("/");return-1===t?e:e.substr(t)}}},23:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(6),i=n(0),r=n(16),a=new(function(){function e(){}return e.prototype.updateAvatarUrl=function(e){var t=this;null!=this.authInfo&&i.a.postToOurBackend(i.a.getAbsoluteUrl("api/userInfo/saveAvatarUrl"),function(){t.authInfo.userDetails.avatarUrl=e,$(document).trigger("requestAvatarUrlUpdate",e)},function(e){$(document).trigger("requestNotification","Error uploading profile image")},{avatarUrl:e})},e.prototype.setAuthInfo=function(e){this.authInfo=e,null!=this.authInfo&&null!=this.authInfo.userDetails&&(this.authInfo.userDetails.isNewCustomer||r.a.setItem("isBuyer",!0))},e.prototype.getAuthInfo=function(){return this.authInfo},e.prototype.getUserId=function(){return null==this.authInfo?0:this.authInfo.userDetails.id},e.prototype.getUserInitials=function(){var e=this;return new Promise(function(t,n){o.a.isLoggedIn().then(function(n){return t(!!n.loggedIn&&e.extractInitials(n.userDetails.firstName,n.userDetails.lastName))}).catch(function(e){return n(e)})})},e.prototype.extractInitials=function(e,t){return e&&t?e[0]+t[0]:e&&!t?e[0]:!e&&t?t[0]:""},e.prototype.getUserFirstName=function(){return new Promise(function(e,t){o.a.isLoggedIn().then(function(t){t.loggedIn&&t.userDetails.firstName?e(t.userDetails.firstName||""):e("")}).catch(function(e){return t(e)})})},e.prototype.getUserEmail=function(){return new Promise(function(e,t){o.a.isLoggedIn().then(function(t){return e(!!t.loggedIn&&t.userDetails.email)}).catch(function(e){return t(e)})})},e.prototype.getAvatarUrl=function(){return new Promise(function(e,t){o.a.isLoggedIn().then(function(t){return e(!!t.loggedIn&&t.userDetails.avatarUrl)}).catch(function(e){return t(e)})})},e.prototype.isUserAdmin=function(){return new Promise(function(e,t){o.a.isLoggedIn().then(function(t){return e(!!t.loggedIn&&t.userDetails.isAdmin)}).catch(function(e){return t(e)})})},e.prototype.getUserDetails=function(){return new Promise(function(e,t){o.a.isLoggedIn().then(function(t){var n=t.loggedIn?t.userDetails:null;n&&(n.name=(n.firstName||"")+" "+(n.lastName||""),n.votes=n.votes||[],n.spamCommentIds=n.spamCommentIds||[],n.authorizedProductIds=n.authorizedProductIds||{}),e(n)}).catch(function(e){return t(e)})})},e.prototype.setTokenInfo=function(e){this.authInfo&&this.authInfo.userDetails&&(this.authInfo.userDetails.tokenInfo=e)},e.prototype.saveNotificationPreferences=function(e){return new Promise(function(t,n){i.a.getFromOurBackend(i.a.getAbsoluteUrl("api/comment/saveNotificationPreferences"),function(){return t()},function(e){return n(e)},{value:e})})},e}())},28:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(3),i=new(function(){function e(){}return e.prototype.requestLogin=function(e,t){this.getSource().then(function(n){return n.LoginManager.requestLogin(e,t)})},e.prototype.requestOpenModal=function(e,t,n,o){void 0===o&&(o=""),this.getSource().then(function(i){return i.LoginManager.openModal(e,t,!1,n,o)})},e.prototype.requestLogout=function(){this.getSource().then(function(e){return e.LoginManager.performLogout()})},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=o.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return Promise.all([n.e(0),n.e(1),n.e(27)]).then(n.bind(null,309))},e}())},3:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var o=n(67),i=n(0),r=new(function(){function e(){}return e.prototype.importWebpackModuleWithRetry=function(e){return new Promise(function(t,n){e().then(function(e){return t(e)}).catch(function(i){setTimeout(function(){e().then(function(e){return t(e)}).catch(function(e){console.error(e),o.a.showNotificationModal("Error loading application code","   <br/>\n                                                                                <p>"+e+'</p>\n                                                                                <p>We\'re sorry for the inconvenience, please check your connection and your browser plugins.</p>\n                                                                                <p>If the problem persists, and <a href="https://www.refreshyourcache.com/en/home/" target="_blank">clearing the browser cache</a> doesn\'t work, contact our <a target="_blank" href="mailto:lb-feedback@manning.com">support</a>.</p>\n                                                                            ',!0,function(){return location.reload(!0)}),$(document).trigger("codeLoadingError",["retryError",null!=e&&(e.request||e.message)]),n()})},200),$(document).trigger("codeLoadingError",["initialError",null!=i&&(i.request||i.message)])})})},e.prototype.loadSlickSliderCode=function(){return this.slickSliderCodePromise||(this.slickSliderCodePromise=Promise.all([this.loadJsCode("vendor/slick/slick.min.js"),this.loadCssStylesheet("vendor/slick/slick.min.css")])),this.slickSliderCodePromise},e.prototype.loadHopscotchCode=function(){return this.hopscotchCodePromise||(this.hopscotchCodePromise=Promise.all([this.loadJsCode("vendor/hopscotch/dist/js/hopscotch.min.js"),this.loadCssStylesheet("vendor/hopscotch/dist/css/hopscotch.min.css")])),this.hopscotchCodePromise},e.prototype.loadHighlightCode=function(){return this.highlightCodePromise||(this.highlightCodePromise=Promise.all([this.loadJsCode("vendor/highlight.js/highlight.pack.js"),this.loadCssStylesheet("vendor/highlight.js/default.css")])),this.highlightCodePromise},e.prototype.loadCodeMirrorCode=function(){return this.codeMirrorCodePromise||(this.codeMirrorCodePromise=Promise.all([n.e(43).then(n.t.bind(null,312,7)),this.loadCssStylesheet("vendor/codemirror/lib/codemirror.css")])),this.codeMirrorCodePromise},e.prototype.loadClipboardCode=function(){return this.clipboardCodePromise||(this.clipboardCodePromise=this.loadJsCode("vendor/clipboard/dist/clipboard.min.js")),this.clipboardCodePromise},e.prototype.loadVttCode=function(){return this.vttCodePromise||(this.vttCodePromise=this.loadJsCode("vendor/vtt/vtt.min.js")),this.vttCodePromise},e.prototype.loadJsCode=function(e){return new Promise(function(t,n){$.getScript(i.a.getLivebookCdn()+e).then(function(){return t()}).fail(function(){return n()})})},e.prototype.loadCssStylesheet=function(e){return new Promise(function(t){var n=$("<link>");$("head").append(n),n.attr({rel:"stylesheet",type:"text/css",href:i.a.getLivebookCdn()+e}),t()})},e}())},308:function(e,t,n){"use strict";n.r(t);var o,i=n(4),r=n(21),a=n(3),s=new(function(){function e(){}return e.prototype.load=function(){var e=this;setTimeout(function(){Promise.all([e.getSource()]).then(function(e){e[0].LandingPage.initialize(),$(document).trigger("landingPageCodeLoaded")})},5)},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=a.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return Promise.all([n.e(46),n.e(25)]).then(n.bind(null,928))},e.prototype.clean=function(){this.sourcePromise&&this.sourcePromise.then(function(e){return e.LandingPage.clean()})},e}()),c=n(46),u=n(14),l=n(83),d=n(13),p=n(2),h=n(6),f=n(9),g=n(70),m=n(85),v=n(5),b=n(17),y=new(function(){function e(){this.renderErrorReportPopup=this.renderErrorReportPopup.bind(this),$(document).on("bookElementIntroArrived",function(e,t){t&&($("#book-markup-container").html(t),b.a.insertLoadingBoxes())})}return e.prototype.load=function(e,t,n,o,i){var r=this,a=v.a.getCurrentMainContentTranslateX();0==$("#main-page-content .backend-main-page-content").length&&$("#main-page-content").html(Mustache.render(l.a,{BOOK_ELEMENT_TITLE:d.a.isSpecialPathPartInsteadOfBookElement(t)||d.a.isSpecialFreeEbookOpenPart(t)?d.a.beautifyBookElementShortName(e,!0):d.a.beautifyBookElementShortName(t,!0)||d.a.beautifyBookElementShortName(e,!0)})),d.a.isSpecialFreeEbookOpenPart(t)&&m.a.openCurrentFreeEbook(e),$("html, body").scrollTop(0),v.a.translateMainContent(a);var s=Date.now(),c=!1;o||0!=$(".backend-main-page-content").length||this.getBookIntro(e,t,n).then(function(e){c||e&&$(document).trigger("bookElementIntroArrived",e)}),p.a.setTimeout(function(){Promise.all([r.getSource(),r.getBookContent(e,t,n,o)]).then(function(o){var a=o[0].BookPage,u=o[1];c=!0,$(document).trigger("bookPageCodeLoaded"),a.initialize(u,e,t,n,i),r.activeBook=e;var l=e!=r.activeBook;h.a.isLoggedIn().then(function(e){if(e.loggedIn&&l&&(clearTimeout(r.errorReportTimer),a.getBook().isMeap)){var t=f.a.get("error-modal-last-shown"),n=(Date.now()-new Date(t))/1e3;n/=604800,!f.a.get("stop-showing-error-reports-modal")&&n>1&&(r.errorReportTimer=setTimeout(r.renderErrorReportPopup,3e5),$(document).trigger("meapErrorReportShow"))}});try{$(document).trigger("chapterLoadingTime",[Math.round((Date.now()-s)/1e3)])}catch(e){console.log(e)}}).catch(function(t){$(document.body).removeClass("app-code-not-loaded");var n=$("#error-modal");n.find("h3 strong").text(o?"Access denied!":"Unable to load book!"),o?n.find(".error-modal-try-again-message").hide():n.find(".error-modal-try-again-message").show();var i="http://www.manning.com/books/"+e;n.find(".book-name-container").attr("href",i).text(e),n.find(".marketplace-link").attr("href",i),u.a.showFoundationModal(n)})},5)},e.prototype.renderErrorReportPopup=function(){clearTimeout(this.errorReportTimer),g.a.renderErrorReportModal()},e.prototype.clean=function(){this.sourcePromise&&this.sourcePromise.then(function(e){return e.BookPage.clean()})},e.prototype.partialClean=function(){this.sourcePromise&&this.sourcePromise.then(function(e){return e.BookPage.partialClean()})},e.prototype.getSource=function(){return this.sourcePromise||(a.a.loadClipboardCode(),a.a.loadCodeMirrorCode(),this.sourcePromise=a.a.importWebpackModuleWithRetry(this.constructSourcePromise),this.sourcePromise.catch(function(e){window.handleLivebookAppLoadingError&&window.handleLivebookAppLoadingError()})),this.sourcePromise},e.prototype.constructSourcePromise=function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(8),n.e(13)]).then(n.bind(null,922))},e.prototype.getBookContent=function(e,t,n,o){return new Promise(function(i,r){c.a.bookContentService.then(function(a){a.getBookElement(e,t,n,o).then(function(e){return i(e)}).catch(function(e){return r(e)})})})},e.prototype.getBookIntro=function(e,t,n){return new Promise(function(o,i){c.a.bookContentService.then(function(i){i.getBookElementIntro(e,t,n).then(function(e){return o(e)}).catch(function(e){return o("")})})})},e}()),k=n(86),w=n(122),S=n(0),P=n(23),C=n(18);!function(e){e[e.WishList=0]="WishList",e[e.Tokens=1]="Tokens",e[e.FreePreview=2]="FreePreview"}(o||(o={}));var x=new(function(){function e(){var e=this;this.handleFormSubmission=this.handleFormSubmission.bind(this),$(document).on("wishListAdd",function(t,n){setTimeout(function(){e.handleWishListAdd(n)},1e3)}).on("unlockSectionSubsectionSuccess unlockBookElementSuccess unlockParagraphSuccess",function(){e.handleTokenUnlockSuccess()}).on("halfWayThroughFreePreview",function(){return e.handleHalfWayThroughFreePreview()}),$(document.body).append(E),$("#marketing-subscription-form .marketing-subscription-close-button").on("click",function(){return e.hideSubscribeForm()}),$("#marketing-subscription-form").on("submit",this.handleFormSubmission)}return e.prototype.initialize=function(){},e.prototype.handleHalfWayThroughFreePreview=function(){this.productId=C.a.book&&C.a.book.manningId,this.subscriptionType=o.FreePreview,this.showMarketingSubscriptionFormIfNecessary()},e.prototype.handleTokenUnlockSuccess=function(){this.productId=C.a.book&&C.a.book.manningId,this.subscriptionType=o.Tokens,this.showMarketingSubscriptionFormIfNecessary()},e.prototype.handleWishListAdd=function(e){this.productId=e,this.subscriptionType=o.WishList,this.showMarketingSubscriptionFormIfNecessary()},e.prototype.handleFormSubmission=function(e){return e.preventDefault(),this.sendMarketingSubscription($("#marketing-subscription-form input").val()),this.hideSubscribeForm(),!1},e.prototype.sendMarketingSubscription=function(e){$(document).trigger("marketingEmailSubscription",["submitted",this.subscriptionType]),S.a.getFromOurBackend(S.a.getAbsoluteUrl(this.getAppropriateRoute()),function(e){f.a.set("email-subscription-given",!0),$(document).trigger("requestNotification","Thank you!")},function(e){},{bookId:this.productId,email:e},!1)},e.prototype.getAppropriateRoute=function(){switch(this.subscriptionType){case o.FreePreview:return"/api/marketingSubscription/createFreePreviewEmailSubscription";case o.Tokens:return"/api/marketingSubscription/createTokensEmailSubscription";case o.WishList:return"/api/marketingSubscription/createWishListEmailSubscription"}},e.prototype.showMarketingSubscriptionFormIfNecessary=function(){h.a.isCurrentlyLoggedIn()&&(f.a.get("email-subscription-offered")||($(document).trigger("marketingEmailSubscription",["offered",this.subscriptionType]),f.a.set("email-subscription-offered",!0),P.a.getUserEmail().then(function(e){$("#marketing-subscription-form input").val(e||"")}),$("#marketing-subscription-form").removeClass("hidden"),p.a.setTimeout(function(){i.b.isTouchDevice()||$("#marketing-subscription-form input").focus(),$("#marketing-subscription-form").addClass("show")},16)))},e.prototype.hideSubscribeForm=function(){$("#marketing-subscription-form").removeClass("show"),p.a.setTimeout(function(){$("#marketing-subscription-form").addClass("hidden"),$("#marketing-subscription-form input").val("")},250)},e}()),E='<form id="marketing-subscription-form" class="hidden">\n    <div class="marketing-subscription-title-container">Sign up to our mailing list for exclusive discounts and updates on this and other Manning products.</div>\n    <div class="marketing-subscription-email-input-container">\n        <input type="email" placeholder="email" required/>\n        <button type="submit" class="marketing-subscription-confirm">subscribe</button>\n    </div>\n    <div class="marketing-subscription-close-button"><i class="fa fa-close"></i></div>\n</form>',I=n(12),T=$(document),B=new(function(){function e(){this.chaptersSeen=0,this.viewingScrambledContent=!0,this.currentlyLoggedIn=!1,this.currentBookPart="",this.currentCartStep="",this.numTocMenuClicks=0,this.numTocIndexClicks=0}return e.prototype.startTime=function(){this.startedViewingChapter=new Date},e.prototype.getExperimentReady=function(){return this.experimentReady||(this.experimentReady=new Promise(function(e,t){var n=window;n.dataLayer=n.dataLayer||[],n.gtag=function(){n.dataLayer.push(arguments)},n.gtag("js",new Date),n.gtag("config","UA-98429831-1"),e()})),this.experimentReady},e.prototype.initializeAnalyticsIfNecessary=function(){var e=this;setTimeout(function(){return e.initializeGoogleAnalytics()},5),setTimeout(function(){return e.initializeFbAnalytics()},5),setTimeout(function(){return e.initializeConvertCart()},5),this.initializeHotjar()},e.prototype.initializeGoogleAnalytics=function(){try{e=window,t=document,n="script",o="ga",e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,i=t.createElement(n),r=t.getElementsByTagName(n)[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",r.parentNode.insertBefore(i,r),ga("create","UA-98429831-1","auto"),ga("require","GTM-N46DWC8"),ga("require","ecommerce"),this.trackInterestingEvents(),console.log("Initializing google analytics")}catch(e){console.log("Error in google analytics",e)}var e,t,n,o,i,r},e.prototype.initializeFbAnalytics=function(){try{e=window,t=document,n="script",e.fbq||(o=e.fbq=function(){o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)},e._fbq||(e._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],(i=t.createElement(n)).async=!0,i.src="https://connect.facebook.net/en_US/fbevents.js",(r=t.getElementsByTagName(n)[0]).parentNode.insertBefore(i,r)),window.fbq&&window.fbq("init","1940497162877014")}catch(n){}var e,t,n,o,i,r},e.prototype.initializeSentry=function(){try{$.getScript("https://browser.sentry-cdn.com/4.6.1/bundle.min.js",function(){var e=window;e.Sentry&&e.Sentry.init&&e.Sentry.init({dsn:"https://c3d25eac84454a43a0a15dc43c9cb2f1@sentry.io/1208009"})})}catch(e){console.log("Error when installing sentry")}},e.prototype.initializeConvertCart=function(){var e,t,n,o,i,r,a;e=window,t=document,n="script",o="ccart",a=e.fetch?"f":"",e.ccartObj=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].t=Date.now(),(i=t.createElement(n)).async=1,i.src="//cdn.convertcart.com/72486907"+a+".js",(r=t.getElementsByTagName(n)[0]).parentNode.insertBefore(i,r)},e.prototype.initializeConsoleTracking=function(){window.ga=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log("Event:",e)},this.trackInterestingEvents()},e.prototype.initializeHotjar=function(){try{e=window,t=document,e.hj=e.hj||function(){(e.hj.q=e.hj.q||[]).push(arguments)},e._hjSettings={hjid:766946,hjsv:6},n=t.getElementsByTagName("head")[0],(o=t.createElement("script")).async=1,o.src="https://static.hotjar.com/c/hotjar-"+e._hjSettings.hjid+".js?sv="+e._hjSettings.hjsv,n.appendChild(o)}catch(e){console.log("Error initializing hotjar",e)}var e,t,n,o},e.prototype.trackInterestingEvents=function(){var e,t,n=this;setTimeout(function(){h.a.isLoggedIn().then(function(e){e&&e.loggedIn&&e.userDetails?ga&&(ga("set","userId",""+e.userDetails.id),ga("set","dimension1",""+e.userDetails.id),ga("set","dimension2","loggedIn")):ga&&ga("set","dimension2","notLoggedIn")}).catch(function(e){ga&&ga("set","dimension2","anonymous")})},100),T.on("chapterLoadingTime",function(e,t){setTimeout(function(){ga("send","event","chapterLoadingTime",t,i())},100)}),T.on("bookContentLoaded",function(n,o,r,a){setTimeout(function(){var n="";if(e=o,t=r.bookElement,e.userOwnsBook)n="accessingOwnedBook";else if(e.isFreeEbook)n="accessingFreeEbook-"+(a?"logged-in":"not-logged-in");else if(t.isOpen)n="accessingFreeBookChapter-"+(a?"logged-in":"not-logged-in");else{n="accessingNotOwnedBookChapter-"+(a?"logged-in":"not-logged-in");try{var s=window;s.hj&&s.hj("trigger","scrambled_chapter_viewed")}catch(e){console.log("Error when triggering hotjar")}}ga("send","event","bookContent",n,i());try{null==o||o.userOwnsBook||(window.ccLayer=window.ccLayer||[],window.ccLayer.push({ccEvent:"productViewed",id:o.manningId,src:"custom",name:o.title,url:"https://livebook.manning.com/"+S.a.getBookUrl(o.slug),image:S.a.getBookCoverUrl(o.shortName),currency:"USD",inStock:!0}))}catch(e){}},50)}),T.on("exercisesOpened",function(e){setTimeout(function(){ga("send","event","exercises","solvingExercises",i())},50)}),T.on("exerciseAnsweredCorrectly",function(e){setTimeout(function(){ga("send","event","exercises","answeredCorrectly",i())},50)}),T.on("exerciseAnsweredIncorrectly",function(e){setTimeout(function(){ga("send","event","exercises","answeredIncorrectly",i())},50)}),T.on("tour",function(e,t){setTimeout(function(){ga("send","event","tour",t,i())})}),T.on("unlockSuccess",function(e,t){setTimeout(function(){"FreePreview"!=t&&ga("send","event","unlock",t+"-success",i())},50)}),T.on("registrationSuccessful",function(){setTimeout(function(){ga("send","event","registration","success"),window.fbq&&window.fbq("track","CompleteRegistration")},50)}),T.on("cartUpsellAddToCartClick",function(e,t){setTimeout(function(){ga("send","event","cartUpsell","addToCart",t)},50)}),T.on("cartUpsellShown",function(e,t){setTimeout(function(){ga("send","event","cartUpsell","show",t)},50)}),T.on("registrationSubscribeInfo",function(e,t){setTimeout(function(){ga("send","event","registration",t?"success-subscribed":"success-not-subscribed")},50)}),T.on("registrationAccountNotActivated",function(){setTimeout(function(){ga("send","event","registrationProcess","notActivated")},50)}),T.on("activationRequested",function(e,t){setTimeout(function(){ga("send","event","registrationProcess","activationRequested",t)},50)}),T.on("registrationModalShown",function(){setTimeout(function(){ga("send","event","registrationProcess","registrationModalShown")},50)}),T.on("unlockFailure",function(e,t,n){setTimeout(function(){if("FreePreview"!=t){var e=i();try{e+="-"+JSON.stringify(n)}catch(e){}ga("send","event","unlock",t+"-failure",e)}},50)}),T.on("outOfParagraphByParagraphUnlocks",function(e){setTimeout(function(){ga("send","event","unlock","outOfParagraphByParagraphUnlocks",i())},50)}),T.on("searchMade",function(e,t){setTimeout(function(){ga("send","event","search",t,i());try{window.ccLayer=window.ccLayer||[],window.ccLayer.push({ccEvent:"liveBookProductsSearched",src:"custom",query:t})}catch(e){}},50)}),T.on("searchSuggestion",function(e,t,n){setTimeout(function(){ga("send","event","searchSuggestion",t,n)},50)}),T.on("audioChapterEnded",function(e){setTimeout(function(){ga("send","event","audio",e.type,i())},50)}),T.on("anonymousFreePreviewStartRequested",function(e){setTimeout(function(){ga("send","event","freePreview","anonymousFreePreviewStartRequested",i())},50)}),T.on("dogEarsClick",function(e){setTimeout(function(){ga("send","event","dogEarsClick",i())},50)}),T.on("freePreviewModeActivated",function(e,t){setTimeout(function(){if(t){ga("send","event","24hFreePreview","activated",i());try{var e=window;e.hj&&e.hj("trigger","24_h_free_preview_activated")}catch(e){console.log("Error when triggering hotjar")}}else ga("send","event","freePreview","activated",i())},50)}),T.on("landingPageLoaded",function(){setTimeout(function(){window.ccLayer=window.ccLayer||[],window.ccLayer.push({ccEvent:"homepageViewed",src:"custom"})},5)}),T.on("freePreviewModeDeactivated",function(){setTimeout(function(){ga("send","event","freePreview","deactivated",i())},50)}),T.on("freePreviewModeExpired",function(){setTimeout(function(){ga("send","event","freePreview","expired",i())},50)}),T.on("addToCartFromFreeEbookUpsell",function(e,t){setTimeout(function(){ga("send","event","addToCartFromFreeEbookUpsell",t,i())},50)}),T.on("openLandingPageCoverLink",function(e,t){setTimeout(function(){ga("send","event","openLandingPageCoverLink",t)},50)}),T.on("signInRequested",function(e,t){setTimeout(function(){ga("send","event","signInRequested",t)},50)}),T.on("discussionMenuOpened",function(){setTimeout(function(){ga("send","event","discussion","menuOpened")},50)}),T.on("productAddedToCart",function(e,t,n){setTimeout(function(){ga("send","event","productAddedToCart",t+"--"+n,i())},50)}),T.on("pointingLinkOpened",function(e,t){setTimeout(function(){ga("send","event","pointingLinkOpened",t,i())},50)}),T.on("highlightAdded",function(e){setTimeout(function(){ga("send","event","highlightAdded",i())},50)}),T.on("bookmarkAdded",function(e){setTimeout(function(){ga("send","event","bookmarkAdded",i())},50)}),T.on("noteAdded",function(e){setTimeout(function(){ga("send","event","noteAdded",i())},50)}),T.on("socialEvent",function(e,t,n){setTimeout(function(){var e="";n&&(e=(n.productExternalId||"")+"-"+(n.element||"")+"-"+(n.location||"")),ga("send","event","social",t,e||i())},50)}),T.on("forumOpened",function(e){setTimeout(function(){ga("send","event","social","forumOpened","")},50)}),T.on("meapErrorReportShow",function(e){setTimeout(function(){ga("send","event","meapErrorReport","show")},50)}),T.on("pageLoaded",function(e){setTimeout(function(){var e=document.location.hash||document.location.pathname||"";(e=e.replace("//","/"))||(e="/"),ga("set","page",e),ga("send","pageview");try{window.fbq&&window.fbq("track","PageView")}catch(e){}},200)}),T.on("codeLoadingError",function(e,t,n){setTimeout(function(){ga("send","event","codeLoadingError",t,n)},100)}),T.on("openedChapter",function(e,t){setTimeout(function(){var e=document.location.href.split("/")[6];t.loggedIn&&!n.currentlyLoggedIn?ga("send","event","chapterViewed","loggedIn=true:justNow","scrambled=true",++n.chaptersSeen):t.loggedIn||e!=n.currentBookPart&&(n.viewingScrambledContent!=t.scrambled&&(n.chaptersSeen=0,n.viewingScrambledContent=t.scrambled),ga("send","event","chapterViewed","loggedIn=false","scrambled="+t.scrambled,++n.chaptersSeen))},50)}),T.on("shoppingCartOpened",function(){setTimeout(function(){ga("send","event","cartStep","open");var e=window;e.hj&&e.hj("trigger","shoppingCartOpened")})}),T.on("cartStep",function(e,t){setTimeout(function(){n.currentCartStep!=t&&(n.currentCartStep=t,ga("send","event","cartStep",t))},50)}),T.on("tocMenuOpen",function(e,t){setTimeout(function(){ga("send","event","toc","menuOpened")},50)}),T.on("tocMenuClick",function(e,t){setTimeout(function(){ga("send","event","toc","menuClick","numClicks",++n.numTocMenuClicks)},50)}),T.on("tocIndexClick",function(e,t){setTimeout(function(){ga("send","event","toc","indexClick","numClicks",++n.numTocIndexClicks)},50)}),T.on("wishListAdd",function(e,t){setTimeout(function(){ga("send","event","wishList","wishListAdd",t)},50)}),T.on("wishListRemove",function(e,t){setTimeout(function(){ga("send","event","wishList","wishListRemove",t)},50)}),T.on("wishListAddToCart",function(e,t){setTimeout(function(){ga("send","event","wishList","wishListAddToCart",t)},50)}),T.on("wishListFail",function(e,t){setTimeout(function(){ga("send","event","wishList","wishListFail",t)},50)}),T.on("marketingEmailSubscription",function(e,t,n){setTimeout(function(){ga("send","event","marketingEmailSubscription",t,n)},50)}),T.on("indexedTerms",function(e,t,n,o){setTimeout(function(){ga("send","event","indexedTerms",t,o+"-"+n)},50)}),T.on("cc-minicart-viewed",function(e,t){return n.convertCartMinicartViewed(t)}),T.on("geoMapOpen",function(e){setTimeout(function(){ga("send","event","social","geoMapOpened","")},50)}),T.on("geoMapFeedbackThumbVote",function(e,t){setTimeout(function(){ga("send","event","social","geoMapFeedbackThumbVote",t)},50)}),T.on("geoMapHideLocation",function(e){setTimeout(function(){ga("send","event","social","geoMapHideLocation","")},50)}),T.on("addItemToCartInGA",function(e,t){setTimeout(function(){ga("ecommerce:addItem",t)},1)}),T.on("startTransactionInGA",function(e,t){setTimeout(function(){ga("ecommerce:addTransaction",t)},1)}),T.on("sendTransactionInGA",function(e){setTimeout(function(){ga("ecommerce:send")},1)});var o=0;function i(){return(null!=e?e.shortName:"unknownBook")+"-"+(null!=t?t.shortName:"unknownBookElement")}T.on("progressStore",function(e,t){setTimeout(function(){var e=I.a.mapToArray(t).length/T.find(".readable-text").length*100;o<25&&e>=25?ga("send","event","audio","25%",i()):o<50&&e>=50?ga("send","event","audio","50%",i()):o<75&&e>=75?ga("send","event","audio","75%",i()):o<99&&e>=99&&ga("send","event","audio","100%",i()),o=e},50)})},e.prototype.convertCartMinicartViewed=function(e){window.ccLayer=window.ccLayer||[];var t=e.items.map(function(e){return{name:e.title,price:e.price,currency:"USD",quantity:"1",url:"http://livebook.manning.com/"+e.itemLink,image:e.imageUrl}});window.ccLayer.push({ccEvent:"miniCartViewed",src:"custom",total:e.totalPrice,currency:"USD",items:t})},e}()),O=n(61),M=n(114),N=$(document),A={intro:{url:"assets/sounds/intro.mp3",volume:.2},outro:{url:"assets/sounds/Chapter Music_1.mp3",volume:.8},skip:{url:"assets/sounds/skip.mp3",volume:.2},notice:{url:"assets/sounds/notice.mp3",volume:.5},noticeSubtle:{url:"assets/sounds/Pause_Sound_Lite3.mp3",volume:.5},exerciseReached:{url:"assets/sounds/exercise.mp3",volume:.3},exerciseOpen:{url:"assets/sounds/exercise_open.mp3",volume:.3},exerciseClose:{url:"assets/sounds/exercise_close.mp3",volume:.3},exerciseReset:{url:"assets/sounds/erase.mp3",volume:.5},hintExplanationOpen:{url:"assets/sounds/open_hint.mp3",volume:.5},hintExplanationClose:{url:"assets/sounds/close_hint.mp3",volume:.5},exerciseShowAnswers:{url:"assets/sounds/show_answers.mp3",volume:.3},answerGiven:{url:"assets/sounds/true_false_click.mp3",volume:.3},correct:{url:"assets/sounds/correct.mp3",volume:.4},error:{url:"assets/sounds/error.mp3",volume:.4},sideMenu:{url:"assets/sounds/side_menu_woosh.mp3",volume:.2},settingsMenuClick:{url:"assets/sounds/settings_menu_click.mp3",volume:.3},tocClick:{url:"assets/sounds/toc_click.mp3",volume:1},closeCodeModal:{url:"assets/sounds/code_modal_close.mp3",volume:1},codeReset:{url:"assets/sounds/code_reset.mp3",volume:1},codeRun:{url:"assets/sounds/code_run.mp3",volume:1},showResult:{url:"assets/sounds/show_result.mp3",volume:1}},L=new(function(){function e(){this.handleSoundEffectsClick=this.handleSoundEffectsClick.bind(this),this.handleSettingsUpdated=this.handleSettingsUpdated.bind(this)}return e.prototype.initalize=function(){this.initializeAudioElement(),this.$soundEffectsCheckbox=$("#sound-effects-checkbox"),this.$soundEffectLabel=$("#sound-effects-label"),this.$soundEffectsCheckbox.on("click",this.handleSoundEffectsClick),this.$soundEffectLabel.on("click",this.handleSoundEffectsClick),N.on("settingsUpdated",this.handleSettingsUpdated),this.registerEventHandlers()},e.prototype.handleSettingsUpdated=function(){this.setSoundEffectsMode(!!f.a.get("sound-effects-enabled"))},e.prototype.setSoundEffectsMode=function(e){this.$soundEffectsCheckbox.toggleClass("selected",e),this.areSoundEffectsEnabled=e,e&&this.preloadAudio(),f.a.set("sound-effects-enabled",e)},e.prototype.handleSoundEffectsClick=function(){this.setSoundEffectsMode(!this.$soundEffectsCheckbox.is(".selected")),N.trigger("settingsMenuItemClick")},e.prototype.preloadAudio=function(){if(!this.areSoundsPreloaded)for(var e in A)A.hasOwnProperty(e)&&$.ajax({url:A[e].url})},e.prototype.initializeAudioElement=function(){this.audioElement||(this.audioElement=document.createElement("audio"),document.body.appendChild(this.audioElement))},e.prototype.registerEventHandlers=function(){var e=this;N.on("exerciseAnsweredCorrectly",function(){e.areSoundEffectsEnabled&&e.playAudio(A.correct)}),N.on("exerciseAnsweredIncorrectly",function(){e.areSoundEffectsEnabled&&e.playAudio(A.error)}),N.on("audioChapterEnded",function(){e.areSoundEffectsEnabled&&e.playAudio(A.outro)}),N.on("requestAudioMoveToCuePosition",function(){e.areSoundEffectsEnabled&&e.playAudio(A.skip)}),N.on("requestChapterIntroPlay",function(){e.areSoundEffectsEnabled?($(e.audioElement).one("ended",function(){return N.trigger("chapterIntroPlayed")}),e.playAudio(A.intro)):N.trigger("chapterIntroPlayed")}),N.on("browsableReached",function(){e.areSoundEffectsEnabled&&p.a.setTimeout(function(){return e.playAudio(A.notice)},400)}),N.on("cueballReached",function(){e.areSoundEffectsEnabled&&e.playAudio(A.noticeSubtle)}),N.on("exerciseReached",function(){e.areSoundEffectsEnabled&&e.playAudio(A.exerciseReached)}),N.on("collapsiblePanelOpening",function(){e.areSoundEffectsEnabled&&e.playAudio(A.exerciseOpen)}),N.on("collapsiblePanelClosing",function(){e.areSoundEffectsEnabled&&e.playAudio(A.exerciseClose)}),N.on("exerciseHintExplanationOpened",function(){e.areSoundEffectsEnabled&&e.playAudio(A.hintExplanationOpen)}),N.on("exerciseHintExplanationClosed",function(){e.areSoundEffectsEnabled&&e.playAudio(A.hintExplanationClose)}),N.on("slideMenuOpened slideMenuClosed",function(){e.areSoundEffectsEnabled&&e.playAudio(A.sideMenu)}),N.on("tocMenuClick",function(){e.areSoundEffectsEnabled&&e.playAudio(A.tocClick)}),N.on("exerciseAnswerGiven",function(){e.areSoundEffectsEnabled&&e.playAudio(A.answerGiven)}),N.on("exerciseAnswersShown",function(){e.areSoundEffectsEnabled&&e.playAudio(A.exerciseShowAnswers)}),N.on("exerciseReset",function(){e.areSoundEffectsEnabled&&e.playAudio(A.exerciseReset)}),N.on("settingsMenuItemClick",function(){e.areSoundEffectsEnabled&&e.playAudio(A.settingsMenuClick)}),N.on("codeReset",function(){e.areSoundEffectsEnabled&&e.playAudio(A.codeReset)}),N.on("codeRun",function(){e.areSoundEffectsEnabled&&e.playAudio(A.codeRun)}),N.on("codeShowResult codeHideResult",function(){e.areSoundEffectsEnabled&&e.playAudio(A.showResult)}),N.on("soundSkipped",function(){e.areSoundEffectsEnabled&&e.playAudio(A.skip)})},e.prototype.playAudio=function(e){this.audioElement.src=e.url,this.audioElement.volume=e.volume;try{var t=this.audioElement.play();null!=t&&t.catch instanceof Function&&t.catch(function(e){return console.log("Couldn't play audio")})}catch(e){console.log("Couldn't play sound effect",e)}},e}()),U=n(67),D=n(68),R=new(function(){function e(){this.loadCodeOnInteraction=this.loadCodeOnInteraction.bind(this),$(document).on("click",".main-token-status-container",this.loadCodeOnInteraction)}return e.prototype.load=function(){this.getSource().then(function(e){return e.TokenModal.initialize()})},e.prototype.clean=function(){this.sourcePromise&&this.getSource().then(function(e){return e.TokenModal.clean()})},e.prototype.loadCodeOnInteraction=function(e){$(document).off("click",".main-token-status-container",this.loadCodeOnInteraction),this.getSource().then(function(e){return e.TokenModal.show()}),e&&e.stopImmediatePropagation()},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=a.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return Promise.all([n.e(4),n.e(0),n.e(1),n.e(2),n.e(28)]).then(n.bind(null,550))},e}()),F=new(function(){function e(){}return e.prototype.load=function(e){void 0===e&&(e=""),this.getSource().then(function(t){t.ExerciseSuitePage.initialize(e)})},e.prototype.clean=function(){this.sourcePromise&&this.getSource().then(function(e){var t=e.ExerciseSuitePage;$(document).trigger("pageAppCodeLoaded"),t.clean()})},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=a.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return Promise.all([n.e(3),n.e(7),n.e(0),n.e(1),n.e(20)]).then(n.bind(null,925))},e}()),z=new(function(){function e(){}return e.prototype.load=function(e){this.getSource().then(function(t){var n=t.CatalogPage;$(document).trigger("catalogPageCodeLoaded"),n.initialize(e)})},e.prototype.clean=function(){this.sourcePromise&&this.getSource().then(function(e){e.CatalogPage.clean()})},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=a.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return n.e(16).then(n.bind(null,918))},e}()),W=new(function(){function e(){}return e.prototype.load=function(){this.getSource().then(function(e){var t=e.LibraryPage;$(document).trigger("libraryPageCodeLoaded"),t.initialize()})},e.prototype.clean=function(){this.sourcePromise&&this.getSource().then(function(e){e.LibraryPage.clean()})},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=a.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return n.e(26).then(n.bind(null,926))},e}()),q=new(function(){function e(){}return e.prototype.load=function(){this.getSource().then(function(e){var t=e.TryItPage;$(document).trigger("pageAppCodeLoaded"),t.initialize()})},e.prototype.clean=function(){this.sourcePromise&&this.getSource().then(function(e){return e.TryItPage.clean()})},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=a.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return n.e(35).then(n.bind(null,919))},e}()),V=new(function(){function e(){}return e.prototype.load=function(e,t,n,o){var i=this;$("#main-page-content").html(Mustache.render(l.a,{BOOK_ELEMENT_TITLE:d.a.beautifyBookElementShortName(t,!0)||d.a.beautifyBookElementShortName(e,!0)})),setTimeout(function(){Promise.all([i.getSource(),i.getBookContent(e,t,n,o)]).then(function(o){var i=o[0].EditorPage,r=o[1];$(document).trigger("editorPageCodeLoaded"),i.initialize(r,e,t,n)}).catch(function(t){var n=$("#error-modal"),o="http://www.manning.com/books/"+e;n.find(".book-name-container").attr("href",o).text(e),n.find(".marketplace-link").attr("href",o),u.a.showFoundationModal(n)})},5)},e.prototype.clean=function(){this.sourcePromise&&this.sourcePromise.then(function(e){return e.EditorPage.clean()})},e.prototype.partialClean=function(){this.sourcePromise&&this.sourcePromise.then(function(e){return e.EditorPage.partialClean()})},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=a.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return Promise.all([n.e(0),n.e(1),n.e(8),n.e(5),n.e(18)]).then(n.bind(null,920))},e.prototype.getBookContent=function(e,t,n,o){return new Promise(function(i,r){c.a.bookContentService.then(function(a){a.getBookElement(e,t,n,o).then(function(e){return i(e)}).catch(function(e){return r(e)})})})},e}()),H=n(119),j=n(118),_=n(124),J=n(16),G=n(28),K=function(){function e(){}return e.prototype.insertNecessaryElements=function(){null==document.getElementById("liveaudio-corner")&&($(document.body).append(Y),$(document.body).append(X),$(document.body).append(Z))},e}(),Y='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792" style="display: none;"><symbol id="liveaudio-corner"><path d="M 1792,0 V 1792 H 0 Z" style="fill:#ffcc00" /><path style="fill:#000000"d="m 1225.7239,1040.0538 v 463.2689 q 0,11.0707 -8.0902,19.1609 -8.0902,8.0902 -19.1609,8.0902 -11.0708,0 -19.161,-8.0902 L 1037.5209,1380.6927 H 925.9617 q -11.07076,0 -19.16093,-8.0902 -8.09018,-8.0902 -8.09018,-19.161 v -163.5066 q 0,-11.0708 8.09018,-19.161 8.09017,-8.0901 19.16093,-8.0901 h 111.5592 l 141.7909,-141.791 q 8.0902,-8.0901 19.161,-8.0901 11.0707,0 19.1609,8.0901 8.0902,8.0902 8.0902,19.161 z m 163.5067,231.6344 q 0,32.3607 -18.0965,60.2505 -18.0964,27.8898 -47.9023,39.8122 -4.258,2.129 -10.645,2.129 -11.0708,0 -19.1609,-7.8773 -8.0902,-7.8773 -8.0902,-19.3738 0,-8.9418 5.1096,-15.1159 5.1096,-6.1741 12.3481,-10.645 7.2386,-4.4708 14.4772,-9.7933 7.2386,-5.3225 12.3482,-15.3288 5.1095,-10.0062 5.1095,-24.0576 0,-14.0514 -5.1095,-24.0576 -5.1096,-10.0063 -12.3482,-15.3288 -7.2386,-5.3225 -14.4772,-9.7933 -7.2385,-4.4709 -12.3481,-10.645 -5.1096,-6.1741 -5.1096,-15.1159 0,-11.4965 8.0902,-19.3738 8.0901,-7.8773 19.1609,-7.8773 6.387,0 10.645,2.129 29.8059,11.4966 47.9023,39.5993 18.0965,28.1027 18.0965,60.4634 z m 109.0044,0 q 0,65.1472 -36.1929,120.2881 -36.1929,55.1409 -95.8047,80.2631 -5.5353,2.129 -10.6449,2.129 -11.4966,0 -19.5868,-8.0902 -8.0901,-8.0902 -8.0901,-19.161 0,-16.6061 16.6061,-25.1221 23.8447,-12.3481 32.3607,-18.7351 31.5091,-22.9931 49.1797,-57.6957 17.6707,-34.7026 17.6707,-73.8761 0,-39.1735 -17.6707,-73.8761 -17.6706,-34.7025 -49.1797,-57.6957 -8.516,-6.387 -32.3607,-18.7351 -16.6061,-8.516 -16.6061,-25.1221 0,-11.0708 8.0901,-19.161 8.0902,-8.0901 19.161,-8.0901 5.5354,0 11.0707,2.1289 59.6118,25.1222 95.8047,80.2631 36.1929,55.1409 36.1929,120.2881 z m 109.0045,0 q 0,97.9337 -54.0765,179.8999 -54.0764,81.9663 -143.9199,120.7139 -5.5354,2.129 -11.0708,2.129 -11.0707,0 -19.1609,-8.0901 -8.0902,-8.0902 -8.0902,-19.161 0,-15.3287 16.6062,-25.1221 2.9806,-1.7032 9.5804,-4.4709 6.5999,-2.7677 9.5805,-4.4709 19.5867,-10.6449 34.9155,-21.7157 52.3732,-38.7477 81.7533,-96.6563 29.3801,-57.9086 29.3801,-123.0558 0,-65.1472 -29.3801,-123.0558 -29.3801,-57.9086 -81.7533,-96.6563 -15.3288,-11.0707 -34.9155,-21.7157 -2.9806,-1.7032 -9.5805,-4.4709 -6.5998,-2.7677 -9.5804,-4.4709 -16.6062,-9.7933 -16.6062,-25.12205 0,-11.07076 8.0902,-19.16093 8.0902,-8.09018 19.1609,-8.09018 5.5354,0 11.0708,2.129 89.8435,38.74766 143.9199,120.71386 54.0765,81.9662 54.0765,179.8999 z"/></symbol></svg>',X='<svg xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://creativecommons.org/ns#" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10.583333 10.583334" height="40" width="40" style="display: none"><symbol id="token-icon"><g transform="translate(0,-286.41666)"> <path transform="matrix(0.26458334,0,0,0.26458334,0,286.41666)" d="M 20 0 A 19.999999 19.999999 0 0 0 0 20 A 19.999999 19.999999 0 0 0 20 40 A 19.999999 19.999999 0 0 0 40 20 A 19.999999 19.999999 0 0 0 20 0 z M 20 3 A 16.999999 16.999999 0 0 1 37 20 A 16.999999 16.999999 0 0 1 20 37 A 16.999999 16.999999 0 0 1 3 20 A 16.999999 16.999999 0 0 1 20 3 z M 20 6 C 12.268001 6 6 12.267994 6 20 C 6 27.731968 12.268001 34 20 34 C 27.732 34 34 27.731968 34 20 C 34 12.267994 27.732 6 20 6 z M 12 14 L 28 14 L 28 18 L 22 18 L 22 29 L 18 29 L 18 18 L 12 18 L 12 14 z " style="opacity:1;fill-opacity:1;stroke:none;stroke-width:2.90095091;stroke-linecap:butt;stroke-linejoin:round;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" fill="currentColor" /></g></symbol></svg>',Z='<div id="books-menu" class="slide-in-menu closed"><div class="slide-in-menu-container"><div class="loading-container"><i class="fa fa-spin fa-circle-o-notch fa-3x fa-fw"></i></div></div></div>',Q=new K,ee=new(function(){function e(){}return e.prototype.initialize=function(){this.getSource().then(function(e){return e.GeoMapManager.initialize()})},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=a.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return Promise.all([n.e(40),n.e(0),n.e(1),n.e(2),n.e(23)]).then(n.bind(null,921))},e}()),te=new(function(){function e(){}return e.prototype.load=function(){this.getSource().then(function(e){var t=e.EpubPreviewPage;$(document).trigger("pageAppCodeLoaded"),t.initialize()})},e.prototype.clean=function(){this.sourcePromise&&this.getSource().then(function(e){return e.EpubPreviewPage.clean()})},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=a.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return Promise.all([n.e(5),n.e(19)]).then(n.bind(null,927))},e}()),ne=$(document);try{window.hasLivebookVendorLoadingErrors&&window.handleLivebookAppLoadingError()}catch(e){}B.initializeAnalyticsIfNecessary(),i.b.loadDeviceInfo().then(function(e){$("body").addClass(e.platformString),L.initalize(),j.a.initialize(),I.a.containsAtLeastOneOf(document.location.hash||document.location.pathname,["token-ledger","token-modal","token-cashout","get-tokens"])&&R.load(),O.a.initialize(),M.a.initialize(),x.initialize(),k.a.initialize(),w.a.initialize(),H.a.initialize(),g.a.initialize(),ee.initialize()});var oe=Date.now(),ie=24e5,re=0;function ae(){var e=function(){var e="";try{(e=(e=-1!=document.location.pathname.indexOf("/book/")?document.location.pathname:document.location.hash||("/"!=document.location.pathname?document.location.pathname:"")||document.location.search||"").replace("?_escaped_fragment_=/","").replace("#%21/","#!/").replace("#!//","").replace("#!/","")).startsWith("/")&&(e=e.substring(1))}catch(e){return""}return e}();if(e.indexOf("index.html")>=0&&(e=(e=e.substring(e.lastIndexOf("index.html")+"index.html".length)).replace("//","/")).startsWith("/")&&(e=e.substring(1)),e.startsWith("catalog")){var t={};if(new page.Route(r.a.catalogRoute,{}).match("/"+e,t))return void me({params:t})}else if(e.startsWith("library"))ge();else if(e.startsWith("book")){t={};if(new page.Route(r.a.meapElementRoute,{}).match("/"+e,t))return void ue({params:t});if(new page.Route(r.a.reviewElementRoute,{}).match("/"+e,t))return void ue({params:t});new page.Route(r.a.bookElementRoute).match("/"+e,t)?ue({params:t}):se()}else if(e.startsWith("exercise-examples"))de();else if(e.startsWith("exercise-suite")){t={};new page.Route(r.a.exerciseSuiteRoute).match("/"+e,t)?de({params:t}):se()}else if(e.startsWith("try-it"))pe();else if(e.startsWith("epub-preview"))he();else if(e.startsWith("edit")){t={};if(new page.Route(r.a.meapEditorRoute).match("/"+e,t))return void fe({params:t});if(new page.Route(r.a.reviewEditorRoute).match("/"+e,t))return void fe({params:t});new page.Route(r.a.editorRoute).match("/"+e,t)?fe({params:t}):se()}else e.startsWith("discussion")?(se(),setTimeout(function(){return k.a.requestOpen()},1e3)):e.startsWith("signin")?(document.location.hash="",se(),h.a.isLoggedIn().then(function(e){e.loggedIn||G.a.requestOpenModal("signin","sign in to complete your registration","registration",J.a.getItem("email"))}).catch(function(e){G.a.requestOpenModal("signin","sign in to complete your registration","registration",J.a.getItem("email"))})):e.startsWith("sitemap")?(ye(),ne.trigger("sitemapPageCodeLoaded")):se()}function se(){ce()}function ce(){ye(),ve(),s.load(),_.a.initialize(),ne.trigger("pageLoaded")}function ue(e){ye(e&&e.canonicalPath);var t=r.a.getCurrentRouteInfo();t&&t.book===e.params.book&&e.params.bookElement?be():ve(),e.params.reviewVersion?h.a.isLoggedIn().then(function(t){t.loggedIn?le(e):G.a.requestLogin("","")}):!h.a.isCurrentlyLoggedIn()&&S.a.hasSsoCookie()?h.a.isLoggedIn().then(function(t){le(e)}):le(e),re++,ne.trigger("pageLoaded")}function le(e){y.load(e.params.book,(e.params.bookElement||"").replace(/^search-/,""),e.params.meapVersion,e.params.reviewVersion,e.params.additional)}function de(e){ye(),ve(),F.load(null!=e&&null!=e.params?e.params.exerciseSuite:""),ne.trigger("pageLoaded")}function pe(){ye(),ve(),q.load(),ne.trigger("pageLoaded")}function he(){ye(),ve(),te.load(),ne.trigger("pageLoaded")}function fe(e){ye(),ve(),V.load(e.params.book,(e.params.bookElement||"").replace(/^search-/,""),e.params.meapVersion,e.params.reviewVersion),ne.trigger("pageLoaded")}function ge(){h.a.isLoggedIn().then(function(e){e.loggedIn?(ye(),ve(),W.load(),ne.trigger("pageLoaded")):page("/")})}function me(e){ye(),ve(),z.load(e&&e.params&&e.params.category),ne.trigger("pageLoaded")}function ve(){be(),0==$("#main-page-content .backend-main-page-content").length&&$("#main-page-content").html('<div class="book-content-loader loader"></div>'),W.clean(),y.clean(),s.clean(),z.clean(),F.clean(),R.clean(),q.clean(),V.clean()}function be(){p.a.clearTimers(),W.clean(),y.partialClean(),z.clean(),U.a.hideNotification()}function ye(e,t){if(Date.now()-oe>ie||re>15||t){if(e)return void(location.href=e);S.a.reloadPage()}}!function(){page(r.a.meapElementRoute,function(e){return ue(e)}),page(r.a.reviewElementRoute,function(e){return ue(e)}),page(r.a.bookElementRoute,function(e){return ue(e)}),page(r.a.exerciseSuiteRoute,function(e){return de(e)}),page("/",function(){return se()}),page(r.a.catalogRoute,function(e){return me(e)}),page("/library",function(){return ge()}),page("/exercise-examples",function(){return de()}),page("/landing-page",function(){return ce()}),page("/try-it",function(){return pe()}),page("/sitemap",function(e,t){document.location=e.path}),page("epub-preview",function(){return he()}),page(r.a.editorRoute,function(e){return fe(e)}),page(r.a.meapEditorRoute,function(e){return fe(e)}),page(r.a.reviewEditorRoute,function(e){return fe(e)}),page("*",function(){return setTimeout(function(){return ae()},50)}),page({hashbang:!1,dispatch:!1}),document.location.hash||"/"!=document.location.pathname?ae():-1!=document.location.href.indexOf("_escaped_fragment_=")?ae():se();S.a.isAdditionalInstruction("openShoppingCart")&&(S.a.removeAdditionalInstruction(),setTimeout(function(){return D.a.requestMenuOpen()},400))}(),Q.insertNecessaryElements();try{$(document).foundation()}catch(e){console.error("Error initializing foundation",e)}ne.on("ready",function(){$("#top-bar-container .product-title").on("click",function(){page("/")})})},31:function(e,t,n){"use strict";var o=n(12),i=function(){function e(e,t,n,i,r,a,s,c,u,l,d,p,h,f,g,m){void 0===e&&(e=-1),void 0===t&&(t=-1),void 0===n&&(n=""),void 0===i&&(i=""),void 0===r&&(r=""),void 0===a&&(a=null),void 0===s&&(s=!1),void 0===c&&(c=""),void 0===u&&(u=!1),void 0===l&&(l=!1),void 0===d&&(d=""),void 0===p&&(p=""),void 0===h&&(h=!1),void 0===f&&(f=!1),void 0===g&&(g=0),void 0===m&&(m=""),this.openChapters=[],this.id=e,this.manningId=t,this.shortName=i,this.title=n,this.isMeap=h,this.isOpen=f,this.latestMeapVersion=g,this.description=r,this.lastUpdateDate=o.a.getDateFromString(a),this.exercisesComingSoon=s,this.userOwnsBook=u,this.userOwnsAudio=l,this.programmingLanguage=c,this.bookCoverPath=d,this.bookPath=p,this.highResolutionCover=m,this.offlineFileSizes={audioHighQuality:"",audioMediumQuality:"",audioLowQuality:"",contentSize:""}}return e.sortBooksDefault=function(e){void 0===e&&(e=[]),e.sort(function(e,t){return Math.max(t.lastAccessedTime,null!=t.lastUpdateDate?t.lastUpdateDate.getTime():0)-Math.max(e.lastAccessedTime,null!=e.lastUpdateDate?e.lastUpdateDate.getTime():0)})},e.sortBooksAlphabetically=function(e){void 0===e&&(e=[]),e.sort(function(e,t){return e.title<t.title?-1:e.title>t.title?1:0})},e.sortBooksByLastUpdateDate=function(e){void 0===e&&(e=[]),e.sort(function(e,t){return t.lastUpdateDate.getTime()-e.lastUpdateDate.getTime()})},e.sortBooksByLastAccess=function(e){void 0===e&&(e=[]),e.sort(function(e,t){return t.lastAccessedTime-e.lastAccessedTime})},e}();t.a=i},32:function(e,t,n){"use strict";var o=n(115),i=n(113),r=n(55),a=n(12),s=n(0),c=window.fileSystemUtils,u=function(){function e(){}return e.prototype.unzipBook=function(e,t){var n=this;return new Promise(function(o,i){c.unzipFile(e,c.getBookContentFolderLocation(t)).then(function(){c.deleteFileIfExists(e),n.unzipBookExercises(e,t),c.createFolderIfNecessary(c.getBookUserDataFolderLocation(t)).then(function(){console.log("Unzipped",c.getBooksContentFolderLocation()),n.buildAndSaveBookIndex(t),c.createFolderIfNecessary(c.getBookProgressFolder(t)),o(!0)}).catch(function(e){return i(e)})}).catch(function(e){return i(e)})})},e.prototype.unzipBookExercises=function(e,t){var n=e.replace(".zip","-exercises.zip");c.fileExists(n).then(function(e){e&&c.unzipFile(n,c.getBookContentFolderLocation(t))}).catch(function(e){return console.log("Error when unzipping exercises")})},e.prototype.requestBookDownload=function(e,t,n){var o=c.getTempDownloadLocation(e+".zip");function i(t){document.dispatchEvent(new CustomEvent("download-error",{detail:{bookShortName:e,bookTitle:n,error:t}}))}c.deleteFileIfExists(o),s.a.postToOurBackend(s.a.getAbsoluteUrl("api/book/getOfflineContentDownloadLink"),function(t){t.contentLink?c.downloadFile(t.contentLink,o,{bookShortName:e,bookTitle:n}):i("Error getting offline content download link: "+t.message)},function(e){return i("Error getting offline content download link: "+e)},{bookShortName:e,type:t})},e.prototype.cancelCurrentDownload=function(){c.cancelCurrentDownload()},e.prototype.deleteBook=function(e){return c.deleteFolderIfExists(c.getBookContentFolderLocation(e))},e.prototype.loadBook=function(e){return new Promise(function(t,n){c.fileExists(c.getBookInfoLocation(e)).then(function(o){if(o)return c.readFile(c.getBookInfoLocation(e)).then(function(e){return t(JSON.parse(e))});n(null)}).catch(function(e){return n(e)})})},e.prototype.loadBookContent=function(e,t){var n=this;return new Promise(function(o,i){c.fileExists(c.getBookInfoLocation(e)).then(function(a){if(a){var s=[c.readFile(c.getBookInfoLocation(e)),c.readFile(c.getBookElementContentLocation(e,t))];Promise.all(s).then(function(i){var a=r.a.convertToBookContent(JSON.parse(i[0]),t,c.getBookElementAudioLocation(e,t),c.getBookElementSubtitlesLocation(e,t),n.fixImageUrls(i[1]));a.book.hasBeenDownloaded=!0,o(a)}).catch(function(e){return i(e)})}else i(null)}).catch(function(e){return i(e)})})},e.prototype.fixImageUrls=function(e){return e.replace(/\{\{BOOK_ROOT_FOLDER\}\}/g,c.getBooksContentFolderLocation())},e.prototype.loadLibrary=function(){return new Promise(function(e,t){c.getFolderChildren(c.getBooksContentFolderLocation()).then(function(t){t.map(function(e){return""+c.getBooksContentFolderLocation()+e+"/"});return Promise.all(t.map(function(e){return c.readFile(c.getBookInfoLocation(e))})).then(function(t){for(var n=[],o=0;o<t.length;o++){var i=t[o],a=r.a.convertToBook(JSON.parse(i));a.hasBeenDownloaded=!0,a.bookCoverPath=c.getBookCoverPath(a.shortName),a.bookPath=s.a.getBookUrlFromBook(a),n.push(a)}e(n)}).catch(function(t){e([])})})})},e.prototype.loadTocAndIndex=function(e){return new Promise(function(t,n){c.readFile(c.getTocAndIndexLocation(e.shortName)).then(function(e){if(e){var n=JSON.parse(e);"string"==typeof n.toc&&(n.toc=JSON.parse(n.toc)),"string"==typeof n.index&&(n.index=JSON.parse(n.index)),t(n)}else t({})}).catch(function(e){return t({})})})},e.prototype.loadExercises=function(e){return new Promise(function(t,n){c.readFile(c.getExerciseLocation(e.book.shortName,e.shortName)).then(function(e){t(e?JSON.parse(e):{})}).catch(function(e){return t({})})})},e.prototype.loadVideos=function(e){var t=e.book.shortName;return new Promise(function(n,o){c.readFile(c.getVideosLocation(t,e.shortName)).then(function(e){if(e){var o=JSON.parse(e);if(o instanceof Object)for(var i in o)o.hasOwnProperty(i)&&(o[i].video=c.getBookContentFolderLocation(t)+"/Videos/"+o[i].video);n(o)}else n({})}).catch(function(e){console.log(e,"When loading videos"),n({})})})},e.prototype.fetchRunnableListing=function(e,t){var n=this;return new Promise(function(o,i){c.readFile(n.getRunnableListingLocation(e,t)).then(function(e){return o(e)}).catch(function(e){return i(e)})})},e.prototype.getRunnableListingLocation=function(e,t){return c.getRunnableListingLocation(e,t)},e.prototype.loadBookmarks=function(e){return new Promise(function(t,n){c.readFile(c.getBookBookmarksLocation(e)).then(function(e){t(e?JSON.parse(e).map(function(e){return o.a.fromJSON(e)}):[])}).catch(function(e){return t([])})})},e.prototype.saveBookmarks=function(e,t){this.serializeBookmarks(e.book.shortName,t)},e.prototype.addBookmark=function(e,t){var n=this;return new Promise(function(o,i){n.loadBookmarks(e).then(function(i){i||(i=[]),t.id=i.length?i[i.length-1].id+1:0,i.push(t),n.serializeBookmarks(e,i),o(t.id)})})},e.prototype.removeBookmark=function(e,t){var n=this;return new Promise(function(o,i){n.loadBookmarks(e).then(function(i){i||(i=[]),a.a.removeItemFromArray(i,i.find(function(e){return e.id===t.id})),n.serializeBookmarks(e,i),o(!0)})})},e.prototype.serializeBookmarks=function(e,t){c.writeToFile(c.getBookBookmarksLocation(e),JSON.stringify(t))},e.prototype.loadNotes=function(e){return new Promise(function(t,n){c.readFile(c.getBookNotesLocation(e)).then(function(e){t(e?JSON.parse(e).map(function(e){return i.a.fromJSON(e)}):[])}).catch(function(e){return t([])})})},e.prototype.addNote=function(e,t){var n=this;return new Promise(function(o,i){n.loadNotes(e).then(function(i){i||(i=[]),t.id=i.length?i[i.length-1].id+1:0,i.push(t),n.serializeNotes(e,i),o(t.id)})})},e.prototype.saveNotes=function(e,t){this.serializeNotes(e,t)},e.prototype.removeNote=function(e,t){var n=this;return new Promise(function(o,i){n.loadNotes(e).then(function(i){i||(i=[]),a.a.removeItemFromArray(i,i.find(function(e){return e.id===t.id})),n.serializeNotes(e,i),o(!0)})})},e.prototype.editNote=function(e,t,n){var o=this;return new Promise(function(i,r){o.loadNotes(e).then(function(r){r||(r=[]),r.find(function(e){return e.id===t.id}).noteText=n,o.serializeNotes(e,r),i(!0)})})},e.prototype.serializeNotes=function(e,t){c.writeToFile(c.getBookNotesLocation(e),JSON.stringify(t))},e.prototype.loadSettings=function(){return new Promise(function(e,t){c.readFile(c.getSettingsLocation()).then(function(t){e(t?JSON.parse(t):{})}).catch(function(t){console.log("No settings present - defaulting",t),e({})})})},e.prototype.updateSettings=function(e){return new Promise(function(t,n){c.writeToFile(c.getSettingsLocation(),JSON.stringify(e)),t(!0)})},e.prototype.fetchBookProgress=function(e){return new Promise(function(t,n){c.readFile(c.getBookProgressLocation(e)).then(function(e){return t(JSON.parse(e))}).catch(function(e){return t({})})})},e.prototype.fetchAllBookProgresses=function(){var e=this;return new Promise(function(t,n){e.loadLibrary().then(function(o){Promise.all(o.map(function(t){return e.fetchBookProgress(t.shortName)})).then(function(e){for(var n={},i=0;i<e.length;i++)n[o[i].shortName]=e[i];t(n)}).catch(function(e){return n(e)})}).catch(function(e){return n(e)})})},e.prototype.fetchProgress=function(e,t){return new Promise(function(n,o){c.readFile(c.getBookElementProgressLocation(e,t)).then(function(e){return n(JSON.parse(e))}).catch(function(e){return n({})})})},e.prototype.storeProgress=function(e,t,n,o){return new Promise(function(i,r){Promise.all([c.writeToFile(c.getBookElementProgressLocation(e,t),JSON.stringify(n)),c.writeToFile(c.getBookProgressLocation(e),JSON.stringify({bookElementShortName:t,contentItemID:o,timeStamp:Date.now()}))]).then(function(){return i(!0)}).catch(function(e){return r(e)})})},e.prototype.search=function(e,t){return Promise.reject("Not yet implemented")},e.prototype.fillWithText=function(e){var t=this;return new Promise(function(n,o){Promise.all(e.map(function(e){return t.fillBookQueryResultWithText(e)})).then(function(){return n(!0)})})},e.prototype.fillBookQueryResultWithText=function(e){var t=this;return new Promise(function(n,o){var i=Array.from(e.bookElementResults.values());Promise.all(i.map(function(e){return t.fillBookElementQueryResultWithText(e)})).then(function(){return n(!0)})})},e.prototype.fillBookElementQueryResultWithText=function(e){var t=this;return new Promise(function(n,o){t.loadBookContent(e.bookShortName,e.bookElementShortName).then(function(e){})})},e.prototype.getClosestSectionTitle=function(e,t){for(var n=parseInt(e.attr("refid")),o=t.length;o>=0;o--){var i=t.eq(o);if(parseInt(i.attr("refid"))<=n)return i.text()}return""},e.prototype.groupByBookAndBookElement=function(e){for(var t=new Map,n=0,o=e;n<o.length;n++){var i=o[n],r=this.getQueryResult(i),a=r.bookShortName,s=r.bookElementShortName;t.has(a)||t.set(a,{bookShortName:a,bookElementResults:new Map});var c=t.get(a);c.bookElementResults.has(s)||c.bookElementResults.set(s,{bookShortName:a,bookElementShortName:s,bookElementTitle:"",results:[]}),c.bookElementResults.get(s).results.push(r)}return Array.from(t.values())},e.prototype.getQueryResult=function(e){var t=e.ref.split("-"),n=t[0],o=t[1],i=t[2];return{id:e.ref,bookShortName:n,bookElementShortName:o,refID:i,text:"",score:e.score,sectionTitle:""}},e.prototype.searchAllBooks=function(e){var t=this;return new Promise(function(n,o){c.getFolderChildren(c.getBooksContentFolderLocation()).then(function(i){Promise.all(i.map(function(n){return t.searchBook(n,e,!0)})).then(function(e){return n(a.a.flatten(e))}).catch(function(e){return o(e)})})})},e.prototype.searchBook=function(e,t,n){var o=this;return void 0===n&&(n=!1),new Promise(function(n,i){o.getBookSearchIndex(e).then(function(e){n(e.search(t))})})},e.prototype.getBookSearchIndex=function(e){var t=this;return new Promise(function(n,o){t.failSafeRead(c.getSearchIndexLocation(e)).then(function(o){o?n(lunr.Index.load(JSON.parse(o))):t.buildAndSaveBookIndex(e).then(function(e){return n(e)})})})},e.prototype.buildAndSaveBookIndex=function(e){var t=this;return new Promise(function(n,o){t.getBookElementFileNames(e).then(function(e){return e.filter(function(e){return e.startsWith("Chapter")}).map(function(e){return e.replace(".html","")})}).then(function(i){var r=new lunr.Index;r.field("body"),Promise.all(i.map(function(n){return t.fillIndexWithChapterData(r,e,n)})).then(function(){c.writeToFile(c.getSearchIndexLocation(e),JSON.stringify(r)),n(r)}).catch(function(e){return o(e)})})})},e.prototype.fillIndexWithChapterData=function(e,t,n){var o=this;return new Promise(function(e,i){o.failSafeRead(c.getBookElementContentLocation(t,n)).then(function(t){e(!0)})})},e.prototype.getBookElementFileNames=function(e){return c.getFolderChildren(c.getBooksContentFolderLocation()+"/"+e+"/Content/")},e.prototype.failSafeRead=function(e){return new Promise(function(t,n){c.readFile(e).then(function(e){return t(e)}).catch(function(){return t("")})})},e}();t.a=window.fsa=new u},4:function(e,t,n){"use strict";var o,i;n.d(t,"a",function(){return o}),function(e){e[e.Unknown=0]="Unknown",e[e.Browser=1]="Browser",e[e.Cordova=2]="Cordova",e[e.Electron=3]="Electron"}(o||(o={})),function(e){e[e.Unknown=0]="Unknown",e[e.Android=1]="Android",e[e.Linux=2]="Linux",e[e.MacOS=3]="MacOS",e[e.iOs=4]="iOs",e[e.Windows=5]="Windows",e[e.WindowsMobile=6]="WindowsMobile"}(i||(i={}));window.fileSystemUtils;var r=window.cordova||null,a=window.electron||null,s=$(window),c=function(){function e(){var e=this;this.deviceReadyPromise=new Promise(function(t,n){r?document.addEventListener("deviceready",function(){return t(e.getDeviceInfo())},!1):$(document).ready(function(){return t(e.getDeviceInfo())})})}return e.prototype.isSmallScreenSize=function(){return s.width()<690},e.prototype.isMediumOrLargeScreenSize=function(){return s.width()>=690},e.prototype.isLargeScreenSize=function(){return s.width()>=900},e.prototype.isExtraLargeScreenSize=function(){return s.width()>=1070},e.prototype.loadDeviceInfo=function(){return this.deviceReadyPromise},e.prototype.getDeviceInfo=function(){return{isTouchDevice:this.isTouchDevice(),platform:this.getPlatform(),os:this.getOS(),platformString:this.getPlatformString(),isIE:this.isIE(),isIOS:this.isIOS(),isAndroid:this.isAndroid()}},e.prototype.isTouchEventOnTouchDevice=function(e){return!!this.isTouchDevice()&&0===(e||"").indexOf("touch")},e.prototype.isTouchDevice=function(){return"ontouchstart"in window||!!window.navigator.maxTouchPoints},e.prototype.isIE=function(){return!!navigator.userAgent.match(/msie|trident|edge/i)},e.prototype.isAndroid=function(){var e=navigator.userAgent||navigator.vendor||"";return/android/i.test(e)},e.prototype.isIOS=function(){var e=(navigator.userAgent||navigator.vendor||"").toLowerCase();return/(iphone|ipod|ipad).*/.test(e)},e.prototype.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},e.prototype.getPlatform=function(){return r||a?r?o.Cordova:a?o.Electron:o.Unknown:o.Browser},e.prototype.getPlatformString=function(){return r||a?r?"cordova":a?"electron":void 0:"browser"},e.prototype.getOS=function(){if(r)switch(r.platformId){case"osx":case"macos":return i.MacOS;case"android":return i.Android;case"ios":return i.iOs;default:return i.Unknown}},e}();t.b=new c},46:function(e,t,n){"use strict";var o=n(31),i=n(109),r=n(84),a=n(60),s=n(0),c=n(125),u=n(112),l=n(12),d=n(17),p=n(85),h=function(){function e(){this.bookElementIntroPromiseMap={}}return e.prototype.resetOwnership=function(){this.chapterOwnershipInfoPromise=null},e.prototype.getGeneralProducts=function(e){return new Promise(function(t,n){s.a.postToOurBackend(s.a.getAbsoluteUrl("api/catalog/getProductsDetails"),function(e){return t(e)},function(e){return n(e)},{slugs:e.join(",")})})},e.prototype.getCompleteBookElementPriceInfo=function(e,t,n){return new Promise(function(o,i){if(!e||!t)return Promise.reject();s.a.postToOurBackend(s.a.getAbsoluteUrl("api/userBook/getBookElementStructurePrices"),function(e){null==e||e.tokenPrice,o(e)},function(e){return i(e)},{bookShortName:e,bookElementShortName:t,meapVersion:n||0})})},e.prototype.getBookElementTokenPrice=function(e,t,n){return new Promise(function(o,i){s.a.postToOurBackend(s.a.getAbsoluteUrl("api/userBook/getBookElementTokenPrice"),function(e){return o(e.tokenPrice)},function(e){return i(e)},{bookShortName:e,bookElementShortName:t,meapVersion:n})})},e.prototype.getTocOwnership=function(e){var t=this;return new Promise(function(n,o){t.fetchGetTocOwnershipPromise(e).then(function(e){return n(e)}).catch(function(e){return o(e)})})},e.prototype.getChapterOwnership=function(e){var t=this;return new Promise(function(n,o){t.fetchGetChapterOwnershipPromise().then(function(t){return n(t[e])}).catch(function(e){return o(e)})})},e.prototype.getRelatedProducts=function(e){return this.relatedProductsPromiseMap||(this.relatedProductsPromiseMap={}),this.relatedProductsPromiseMap[e]?this.relatedProductsPromiseMap[e]:this.relatedProductsPromiseMap[e]=new Promise(function(t,n){s.a.postToOurBackend(s.a.getAbsoluteUrl("api/book/getRelatedProducts"),function(e){(e=(e=e||[]).filter(function(e){return e})).forEach(function(e){e.livebook?(e.imageUrl=s.a.getBookCoverUrl(e.externalId),e.link=s.a.getBookUrl(e.slug)):(e.imageUrl.startsWith("http")||(e.imageUrl=s.a.getMarketplaceProductCoverUrl(e.imageUrl)),e.link=s.a.getMarketplaceProductUrl(e.slug,e.livevideo))}),t(e)},function(e){console.log("Error when fetching related products!"),t([])},{bookShortName:e})})},e.prototype.getCustomersAlsoBoughtProducts=function(e){return this.customersAlsoBoughtPromiseMap||(this.customersAlsoBoughtPromiseMap={}),this.customersAlsoBoughtPromiseMap[e]?this.customersAlsoBoughtPromiseMap[e]:this.customersAlsoBoughtPromiseMap[e]=new Promise(function(t,n){s.a.postToOurBackend(s.a.getAbsoluteUrl("api/cart/getCustomersAlsoBoughtProducts"),function(e){(e=(e=e||[]).filter(function(e){return e&&e.livebook})).forEach(function(e){e.imageUrl=s.a.getBookCoverUrl(e.externalId),e.link=s.a.getBookUrl(e.slug)}),t(e)},function(e){console.log("Error when fetching related products!"),t([])},{bookShortName:e})})},e.prototype.getBook=function(e,t){var n=this;return new Promise(function(i,r){s.a.postToOurBackend(s.a.getAbsoluteUrl("api/book/getBook"),function(t){var r=new o.a(t.id,t.manningId,t.title,t.shortName,t.description,t.lastUpdateDate,t.exercisesComingSoon,t.programmingLanguage,t.userOwnsBook,t.userOwnsAudio,s.a.getBookCoverUrl(t.shortName),s.a.getBookUrl(e),t.meap,t.open,t.latestMeapVersion||0,t.highResolutionCover);r.slug=t.slug,r.offlineFileSizes=t.offlineFileSizes,r.openChapters=t.openChapters||[],r.cleanTitle=d.a.cleanBookTitle(r.title),r.isReview=!!t.isReview,r.userCanViewReviews=!!t.userCanViewReviews,r.userIsReviewer=!!t.userIsReviewer,r.userOwnsPBook=!!t.userOwnsPBook,r.categories=t.categories||"",n.fillWithAdditionalInfo(r),r.hasAudio=!!t.hasAudio,r.hasExercises=!!t.hasExercises,r.hasTextAddendums=!!t.hasTextAddendums,r.hasKnowledgeGraph=!!t.hasKnowledgeGraph,r.isKnowledgeGraphAccessible=!!t.isKnowledgeGraphAccessible,r.userOwnsAudio=!!t.userOwnsAudio,r.userIsEditor=!!t.userIsEditor,i(r)},function(e){return r(e)},{bookShortNameOrSlug:e,productId:t})})},e.prototype.getBookElementIntro=function(e,t,n){var o=this;void 0===t&&(t=""),void 0===n&&(n="");var i=(e||"")+"-"+(t||"")+"-"+(n||"");return null!=this.bookElementIntroPromiseMap[i]?this.bookElementIntroPromiseMap[i]:this.bookElementIntroPromiseMap[i]=new Promise(function(r,a){s.a.getFromOurBackend(s.a.getAbsoluteUrl("api/book/getBookElementIntro"),function(e){return r(e&&e.intro||"")},function(e){delete o.bookElementIntroPromiseMap[i],r("")},{bookShortNameOrSlug:e,bookElement:t,meapVersion:n||void 0})})},e.prototype.getBookElement=function(e,t,n,i){var c=this;return void 0===t&&(t=""),void 0===n&&(n=""),void 0===i&&(i=""),new Promise(function(u,l){s.a.getFromOurBackend(s.a.getAbsoluteUrl("api/book/getBookElement"),function(e){if(!1===e.success&&e.reason)l(e.reason);else{var t=e.book,n=e.bookElement,i=e.previousBookElement,p=e.nextBookElement;if(t&&n){var h=new o.a(t.id,t.manningId,t.title,t.shortName,t.description,t.lastUpdateDate,t.exercisesComingSoon,t.programmingLanguage,t.userOwnsBook,t.userOwnsAudio,"","",!!t.meap,!!t.open,t.latestMeapVersion||0,t.highResolutionCover);h.slug=t.slug,h.cleanTitle=d.a.cleanBookTitle(h.title),h.authors=t.authors,h.openChapters=t.openChapters||[],h.hasAudio=!!t.hasAudio,h.isFreeEbook=!!t.isFreeEbook,h.hasExercises=!!t.hasExercises,h.hasTextAddendums=!!t.hasTextAddendums,h.hasKnowledgeGraph=!!t.hasKnowledgeGraph,h.isKnowledgeGraphAccessible=!!t.isKnowledgeGraphAccessible,h.userIsEditor=!!t.userIsEditor,h.userCanViewReviews=!!t.userCanViewReviews,h.userIsReviewer=!!t.userIsReviewer,h.isReview=!!t.isReview,h.isParagraphByParagraphUnlockDisabled=t.isParagraphByParagraphUnlockDisabled,h.userOwnsPBook=!!t.userOwnsPBook,h.categories=t.categories||"",c.fillWithAdditionalInfo(h);var f,g,m=new r.a(h,n.id,n.title,n.shortName,n.userOwnsBookElement,n.ordinal,n.wordCount,n.freeWordCount,n.audioLocation,n.subtitlesLocation,n.isOpen,n.meapVersion,n.location,n.isBookOverview);m.videos=n.videos,m.exercisesLocation=n.exercisesLocation,m.reviewVersion=n.reviewVersion,i&&(f=new a.a(i.shortName,i.title,i.link||s.a.getBookElementUrl(h.slug,i.shortName,m.meapVersion,m.reviewVersion))),p&&(g=new a.a(p.shortName,p.title,p.link||s.a.getBookElementUrl(h.slug,p.shortName,m.meapVersion,m.reviewVersion),p.introItems)),n.content?(m.content=c.adjustContent(n.content,c.fixOwnedContentWithImageUrls(n.ownedContent),h.shortName,h.slug),c.updateBookOverviewIfNecessary(h,m),u({book:h,bookElement:m,previousBookElement:f,nextBookElement:g})):(n.intro&&(m.intro=c.adjustContent(n.intro,"",h.shortName,h.slug),$(document).trigger("bookElementIntroArrived",m.intro)),$.ajax({url:n.contentUrl,crossDomain:!0}).done(function(e){m.content=c.adjustContent(e,c.fixOwnedContentWithImageUrls(n.ownedContent),h.shortName,h.slug),c.updateBookOverviewIfNecessary(h,m),u({book:h,bookElement:m,previousBookElement:f,nextBookElement:g})}).fail(function(e){return l(e)}))}else l("Cannot fetch content")}},function(e){return l(e)},{bookShortNameOrSlug:e,bookElementShortName:t,meapVersion:n||void 0,reviewVersion:i||void 0,freeEbooksAreOpen:p.a.isFreeEbookOpen(e)})})},e.prototype.updateBookOverviewIfNecessary=function(e,t){if(null!=e&&null!=t&&t.isBookOverview){var n=e.highResolutionCover;n=n?s.a.getMarketplaceHiqhQualityProductCoverUrl(n):e.bookCoverPath,t.content=(-1==t.content.indexOf("book-overview-cover-container")?'<div class="browsable-container figure-container book-overview-cover-container" refid=\'0\' id=\'0\'>\n                                 <img class="book-overview-cover" onload-image-src="'+n+'" src="'+s.a.getLivebookCdn()+'assets/images/cover-large.png" alt="book cover"/>\n                               </div>':"")+t.content+(-1==t.content.indexOf("toc-summary-container")?'<div class="browsable-container toc-summary-container" refid=\'100000\' id=\'100000\'>\n                                    <h5>In this book </h5>\n                                    <div class="toc-summary-content">\n                                        <div class="toc-summary-loading-container">\n                                            <i class="fa fa-spin fa-circle-o-notch fa-3x fa-fw"></i>\n                                        </div>\n                                    </div>\n                                 </div>':"")}},e.prototype.fixOwnedContentWithImageUrls=function(e){if(!e||!e.length)return e;for(var t=0;t<e.length;t++)e[t].content=this.fixUrls(e[t].content);return e},e.prototype.adjustContent=function(e,t,n,o){return void 0===n&&(n=""),void 0===o&&(o=""),e=this.fixUrls(e),t?u.b.replaceEncryptedContent($("<div></div>").html(e),t):e},e.prototype.fixUrls=function(e){return e.replace(/\{\{BOOK_ROOT_FOLDER\}\}/g,s.a.getAwsPublic()).replace(/\#\!\/book\//g,"/book/")},e.prototype.getUsersLibrary=function(){var e=this;return this.userLibraryPromise?this.userLibraryPromise:this.userLibraryPromise=new Promise(function(t,n){Promise.all([e.getUserOwnedProducts(),e.getCatalog(),e.getAllBooksProgress()]).then(function(n){for(var i=n[0],r=n[1],a=n[2],s=[],c={},u=0,l=r;u<l.length;u++){var d=l[u];e.assignBookProgress(d,a);for(var p=0,h=i;p<h.length;p++){var f=h[p];f.shortName===d.shortName&&(d.userOwnsBook=!f.partialBookOwnership,c[d.shortName]||(c[d.shortName]=!0,s.push(d)),d.partialBookOwnership=f.partialBookOwnership,f.isAudio()&&(d.userOwnsAudio=!0))}}s.forEach(function(e){e.lastAccessedTime=Number.isNaN(e.lastAccessedTime)?0:e.lastAccessedTime||0}),o.a.sortBooksDefault(s),t(s)}).catch(function(e){return n(e)})})},e.prototype.getMeaps=function(){var e=this;return new Promise(function(t,n){e.getCatalog().then(function(e){var n=e.filter(function(e){return-1!==e.title.indexOf("MEAP")});o.a.sortBooksByLastUpdateDate(n),t(n)}).catch(function(e){return n(e)})})},e.prototype.getPublished=function(e){var t=this;return new Promise(function(e,n){t.getCatalog().then(function(t){var n=t.filter(function(e){return!e.isMeap});o.a.sortBooksByLastUpdateDate(n),n=n.slice(0,30),e(n)}).catch(function(e){return n(e)})})},e.prototype.getLatestBooks=function(e){var t=this;return new Promise(function(e,n){t.getCatalog().then(function(t){o.a.sortBooksByLastUpdateDate(t),t=t.slice(0,30),e(t)}).catch(function(e){return n(e)})})},e.prototype.assignBookProgress=function(e,t){var n=t[e.shortName];n?(e.progressBookElement=n.bookElementShortName,e.lastBookElementItem=n.contentItemID||"",e.bookPath=s.a.getBookElementUrl(e.slug,e.progressBookElement,e.latestMeapVersion)+e.lastBookElementItem,e.lastAccessedTime=parseInt(n.timeStamp||0)):(e.progressBookElement="",e.lastBookElementItem="",e.bookPath=s.a.getBookElementUrl(e.slug,e.progressBookElement,e.latestMeapVersion),e.lastAccessedTime=0)},e.prototype.getUserOwnedProducts=function(){return new Promise(function(e,t){s.a.postToOurBackend(s.a.getAbsoluteUrl("api/userInfo/getUserOwnedProducts"),function(t){"string"==typeof t&&(t=JSON.parse(t));var n=t.filter(function(e){return i.a.isAcceptableProductType(e.productType)}).map(function(e){return new i.a(e.externalId,e.title,e.productType,e.productPrice,e.partialBookOwnership)});e(n)},function(e){return t(e)})})},e.prototype.fetchGetChapterOwnershipPromise=function(){return null!=this.chapterOwnershipInfoPromise?this.chapterOwnershipInfoPromise:this.chapterOwnershipInfoPromise=new Promise(function(e,t){s.a.postToOurBackend(s.a.getAbsoluteUrl("api/userBook/getBookChaptersPartialOwnership"),function(t){return e(t)},function(e){return t(e)})})},e.prototype.fetchGetTocOwnershipPromise=function(e){return null!=this.tocOwnershipInfoPromise?this.tocOwnershipInfoPromise:this.tocOwnershipInfoPromise=new Promise(function(t,n){s.a.getFromOurBackend(s.a.getAbsoluteUrl("api/userBook/getOwnedStructure"),function(e){return t(e)},function(e){return n(e)},{bookShortName:e})})},e.prototype.getCatalog=function(){return this.catalogBooks&&this.catalogBooks.length>0?Promise.resolve(this.catalogBooks):this.catalogPromise?this.catalogPromise:this.catalogPromise=this.getCatalogPromise()},e.prototype.resetCatalog=function(){this.catalogBooks=null,this.catalogPromise=null,this.userLibraryPromise=null,this.bestSellersPromise=null,this.userLibraryAndCatalogPromise=null},e.prototype.getCatalogPromise=function(){var e=this;return new Promise(function(t,n){s.a.getFromOurBackend(s.a.getAbsoluteUrl("api/catalog/getCatalog"),function(n){e.catalogBooks=n.map(function(t){return e.createCatalogBookFromWebData(t)}),e.catalogBooks.sort(function(e,t){return e.lastUpdateDate>t.lastUpdateDate?-1:e.lastUpdateDate<t.lastUpdateDate?1:0}),t(e.catalogBooks)},function(e){return n(e)})})},e.prototype.getBestsellers=function(){var e=this;return this.bestSellersPromise?this.bestSellersPromise:this.bestSellersPromise=new Promise(function(t,n){var o=e.getCatalog(),i=e.getRawBestsellersPromise();Promise.all([o,i]).then(function(e){for(var n=e[0],o=e[1],i={},r=0,a=o;r<a.length;r++){var s=a[r];i[s.id]=!0}t(n.filter(function(e){return i[e.manningId]}))}).catch(function(e){return n(e)})})},e.prototype.getUsersLibraryAndCatalog=function(e){var t=this;if(this.userLibraryAndCatalogPromise)return this.userLibraryAndCatalogPromise;var n=e?this.getUserOwnedProducts():Promise.resolve([]),i=this.getCatalog(),r=e?this.getAllBooksProgress():Promise.resolve({});return this.userLibraryAndCatalogPromise=new Promise(function(e,a){Promise.all([n,i,r]).then(function(n){for(var i=n[0],r=n[1],a=n[2],s=[],c={},u=0,l=r;u<l.length;u++){var d=l[u];t.assignBookProgress(d,a);for(var p=0,h=i;p<h.length;p++){var f=h[p];f.shortName===d.shortName&&(d.userOwnsBook=!f.partialBookOwnership,d.partialBookOwnership=f.partialBookOwnership,c[d.shortName]||(c[d.shortName]=!0,s.push(d)),f.isAudio()&&(d.userOwnsAudio=!0))}}s.forEach(function(e){e.lastAccessedTime=Number.isNaN(e.lastAccessedTime)?0:e.lastAccessedTime||0}),o.a.sortBooksDefault(s),e({userLibrary:s,catalog:r})}).catch(function(e){return a(e)})})},e.prototype.getRawBestsellersPromise=function(){return new Promise(function(e,t){s.a.getFromOurBackend(s.a.getAbsoluteUrl("api/catalog/getBestsellers"),function(t){return e(t)},function(e){return t(e)})})},e.prototype.getAllBooksProgress=function(){return new Promise(function(e,t){c.a.progressService.then(function(n){n.fetchAllBooksProgress().then(function(t){return e(t)}).catch(function(e){return t(e)})})})},e.prototype.createCatalogBookFromWebData=function(e){var t=new o.a;return t.manningId=e.manningId,t.shortName=e.shortName,t.title=e.title,t.cleanTitle=d.a.cleanBookTitle(t.title),t.isReview=!!e.isReview,t.isMeap=!!e.meap,t.isFreeEbook=!!e.isFreeEbook,t.latestMeapVersion=e.latestMeapVersion||0,t.slug=e.slug,t.authors=e.authors,t.userCanViewReviews=!!e.userCanViewReviews,t.userIsReviewer=!!e.userIsReviewer,t.categories=e.categories,t.description=e.description,t.lastUpdateDate=l.a.getDateFromString(e.lastUpdateDate),t.exercisesComingSoon=e.exercisesComingSoon,t.bookPath=s.a.getBookElementUrl(e.slug,"chapter-1",t.latestMeapVersion),t.bookCoverPath=s.a.getBookCoverUrl(e.shortName),t.hasAudio=e.hasAudio,t.hasExercises=e.hasExercises,t.hasTextAddendums=e.hasTextAddendums,t.hasKnowledgeGraph=e.hasKnowledgeGraph,t.isKnowledgeGraphAccessible=e.isKnowledgeGraphAccessible,t.categories=e.categories||"",t},e.prototype.getUserEditorBooksShortNames=function(){var e=this;return this.userEditorBooksShortNames?Promise.resolve(this.userEditorBooksShortNames):new Promise(function(t,n){s.a.postToOurBackend(s.a.getAbsoluteUrl("api/userInfo/getCurrentUserBookEditorShortNames"),function(n){e.userEditorBooksShortNames=n&&n.bookShortNames||"",t(e.userEditorBooksShortNames)},function(e){console.log("Error when fetching user editor book short names"),t("")})})},e.prototype.requestBookDownload=function(e,t){throw new Error("Cannot download book on the web")},e.prototype.deleteBook=function(e){throw new Error("Cannot delete book on the web")},e.prototype.unzipBook=function(e,t){throw new Error("Cannot unzip book on the web")},e.prototype.getFreePreviewStatus=function(e){return new Promise(function(t,n){s.a.postToOurBackend(s.a.getAbsoluteUrl("freePreview/getFreePreviewStatus"),function(e){t(e)},function(e){console.log("Error when fetching free preview status"),n(e)},{bookShortName:e})})},e.prototype.getBookDates=function(e){return new Promise(function(t,n){s.a.postToOurBackend(s.a.getAbsoluteUrl("api/book/dates/"+e),function(e){t(e)},function(e){console.log("Error when fetching user editor book short names"),t("")})})},e.prototype.getBooksDetails=function(e){return new Promise(function(t,n){s.a.postToOurBackend(s.a.getAbsoluteUrl("api/catalog/getBooksDetails?bookShortNames="+e.join(",")),function(e){t(e)},function(e){console.log("Error when getting books details"),n(e)})})},e.prototype.fillWithAdditionalInfo=function(e){if(e&&(e.bookCoverPath=s.a.getBookCoverUrl(e.shortName),this.catalogBooks)){var t=this.catalogBooks.find(function(t){return t.shortName===e.shortName});t&&(e.authors=t.authors)}},e.prototype.getEpochHours=function(){return Math.round(Date.now()/1e3/60/60)},e}(),f=n(4),g={};$(document).on("unlockSectionSubsectionSuccess",function(e,t,n,o){g[t]||(g[t]={}),g[t][n]||(g[t][n]={}),o&&(g[t][n][o]=!0)});var m={bookContentService:new Promise(function(e,t){f.b.loadDeviceInfo().then(function(t){e(function(e){switch(e){case f.a.Browser:return new h;case f.a.Cordova:case f.a.Electron:throw new Error("Not yet implemented")}}(t.platform))}).catch(function(e){return t(e)})}),getFreePreviewStatus:function(e){var t=this;return new Promise(function(n,o){t.bookContentService.then(function(t){t.getFreePreviewStatus(e).then(function(e){return n(e)}).catch(function(e){return o(e)})})})},getCatalog:function(){var e=this;return new Promise(function(t,n){e.bookContentService.then(function(e){e.getCatalog().then(function(e){return t(e)}).catch(function(e){return n(e)})})})},getGeneralProducts:function(e){var t=this;return new Promise(function(n,o){t.bookContentService.then(function(t){t.getGeneralProducts(e).then(function(e){return n(e)}).catch(function(e){return o(e)})})})},getBooksFromCatalog:function(e){var t=this;return new Promise(function(n,o){for(var i={},r=0,a=e;r<a.length;r++){var s=a[r];i[s]=!0}t.bookContentService.then(function(e){e.getCatalog().then(function(e){return n(e.filter(function(e){return i[e.shortName]}))}).catch(function(e){return o(e)})})})},getRelatedProducts:function(e){var t=this;return new Promise(function(n,o){t.bookContentService.then(function(t){t.getRelatedProducts(e).then(function(e){return n(e)}).catch(function(e){return o(e)})})})},getCustomersAlsoBoughtProducts:function(e){var t=this;return new Promise(function(n,o){t.bookContentService.then(function(t){t.getCustomersAlsoBoughtProducts(e).then(function(e){return n(e)}).catch(function(e){return o(e)})})})},getUsersLibrary:function(){var e=this;return new Promise(function(t,n){e.bookContentService.then(function(e){e.getUsersLibrary().then(function(e){return t(e)}).catch(function(e){return n(e)})})})},getPartialOwnership:function(e){var t=this;return new Promise(function(n,o){t.bookContentService.then(function(t){t.getChapterOwnership(e).then(function(t){v(t,e),n(t)})})})},getTocOwnership:function(e){var t=this;return new Promise(function(n,o){t.bookContentService.then(function(t){t.getTocOwnership(e).then(function(t){v(t,e),n(t)})})})},getBooksDetails:function(e){return new Promise(function(t,n){m.bookContentService.then(function(o){o.getBooksDetails(e).then(function(e){return t(e)}).catch(function(e){return n(e)})})})},getBookDates:function(e){return new Promise(function(t,n){m.bookContentService.then(function(o){o.getBookDates(e).then(function(e){t({meapStart:e.meapStart||"",publishedDate:e.publishedDate||"",expectedPublishDate:e.expectedPublishDate||"",pbookAvailabilityDate:e.pbookAvailabilityDate||"",ebookAvailabilityDate:e.ebookAvailabilityDate||"",expectedPbookAvailabilityDate:e.expectedPbookAvailabilityDate||"",expectedEbookAvailabilityDate:e.expectedEbookAvailabilityDate||""})}).catch(function(e){return n()})})})}};function v(e,t){if(null!=e&&null!=e.partialChapterOwnership)try{var n=g[t];if(n){var o=function(t){var n=e.partialChapterOwnership.find(function(e){return e.shortName==t});null!=n&&(n.userOwned=!0)};for(var i in n)o(i)}}catch(e){console.log(e)}}t.a=m},5:function(e,t,n){"use strict";var o=n(55),i=n(17),r=n(121),a=$(window),s=$(document),c=function(){function e(){}return e.prototype.isDocumentVisible=function(){return document.visibilityState&&"visible"===document.visibilityState},e.prototype.getCurrentMainContentTranslateX=function(){var e=$("#book-main-content-container");return 0==e.length?0:this.getComputedTranslateX(e.get(0))},e.prototype.translateMainContent=function(e){$("#book-main-content-container").velocity({translateX:e||0},{duration:0})},e.prototype.loadPlaceholderImages=function(){var e=$("img[image-src]");e.slice(0,5).each(function(e,t){var n=$(t);n.attr("src",n.attr("image-src"))}),e.slice(5,e.length).each(function(e,t){r(t,function(){var e=$(t);e.attr("src",e.attr("image-src"))})}),$("img[onload-image-src]").each(function(e,t){var n=$(t).attr("onload-image-src"),o=new Image;o.onload=function(){$(t).attr("src",n)},o.src=n})},e.prototype.getSectionHeading=function(e){void 0===e&&(e="");var t=e.substring("section-".length);return t=t.replace(/\-/g,"."),this.getSectionTitle(t)},e.prototype.getSectionTitle=function(e){for(var t=document.querySelectorAll("#book-markup-container h1, #book-markup-container h2, #book-markup-container h3, #book-markup-container h4, #book-markup-container h5"),n=[],i=0;i<t.length;i++){if(0!==i)if(!((s=(a=t[i]).textContent.trim()).startsWith("Table")||s.startsWith("Figure")||s.startsWith("Listing"))){var r=$(a);r.is(".intro-header")||r.closest(".callout-container").length||n.push(a)}}for(i=0;i<n.length;i++){var a,s=(a=n[i]).textContent.trim(),c=o.a.extractBookElementIndex(s);if(c===e)return a;if(c===e+".")return a}return this.fallbackForGetSectionTitle(n,e)},e.prototype.fallbackForGetSectionTitle=function(e,t){if(!e||0===e.length)return null;var n=o.a.extractSegmentedBookElementIndex(t);!!t.match(/^[A-Z]/i)||n.shift();var i=e[0].nodeName,r=[];if(e.forEach(function(e){e.nodeName===i?r.push({heading:e,children:[]}):r[r.length-1]&&r[r.length-1].children.push(e)}),0===n.length)return null;if(1===n.length){var a=+n[0]-1;return r[a]?r[a].heading:null}var s=+n[0]-1;if(r[s]){var c=+n[1]-1;return r[s].children[c]?r[s].children[c]:r[s].heading}return null},e.prototype.replaceBookCoversOnImageLoad=function(e,t,n){void 0===n&&(n=!1);e.find(".book-cover");var o=function(t){var n=t.target;e.find('.book-cover[data-src="'+n.getAttribute("data-src")+'"]').attr("src",n.src)},i=$(t.map(function(e){var t=new Image;return t.src=e,t.setAttribute("data-src",e),t.complete&&o({target:t}),t}));i.on("load",o),n&&i.on("error",function(t){var n=t.target;$(e.find('.book-cover[data-src="'+n.src+'"]')).closest(".book-item-container").remove()})},e.prototype.closeMenuIfTakesTooMuchSpace=function(e){if(e&&0!==e.length)try{var t=$("#book-main-content-container");if(0===t.length)return;var n=e.offset(),o=t.offset(),i={start:n.left,end:n.left+e.width()},r={start:o.left,end:o.left+t.width()};if(i.start<=r.start){if(i.end<=r.start)return;if(Math.abs(i.end-r.start)/t.width()<=.3)return}else{if(i.start>=r.end)return;if(Math.abs(r.end-i.start)/t.width()<=.3)return}s.trigger("slideMenuCloseRequested")}catch(e){console.log(e)}},e.prototype.hideScrollOnBody=function(){$(document.body).css({overflow:"hidden"})},e.prototype.showScrollOnBody=function(){$(document.body).css({overflow:"auto"})},e.prototype.getTopNavBarHeight=function(e){void 0===e&&(e=!1);var t=$("#top-bar-container"),n=t.length>0?this.getComputedTranslateY(t.get(0)):0;n<0&&(n=0);var o=t.height()-n;return e&&(o-=$("#header-notification-container").height()),Math.max(o,0)},e.prototype.getFooterHeight=function(){return $("#footer").height()},e.prototype.getNavbarHeightInPx=function(){var e=$("#section-navigation-container");return this.getTopNavBarHeight()-(e.is(":visible")?e.height():0)-1+"px"},e.prototype.isHeadingVisible=function(e,t){return null!=e&&0!=e.length&&e.offset().top-10<t},e.prototype.isElementVisible=function(e){if(!e)return!1;var t=e.getBoundingClientRect(),n=$(window);return t.top>=this.getTopNavBarHeight()&&t.left>=0&&t.bottom<=n.height()-100&&t.right<=n.width()},e.prototype.isElementVisibleEvenALittle=function(e){if(null==e)return!1;var t=e.getBoundingClientRect(),n=t.height,o=$(window);return t.top+.82*n>=this.getTopNavBarHeight()&&t.bottom<=o.height()+.7*n&&t.left>=0&&t.right<=o.width()},e.prototype.canBothElementsFitIntoScreen=function(e,t){var n=$(e),o=$(t),i=n.offset().top,r=o.offset().top,s=i+n.height(),c=r+o.height(),u=Math.min(i,r);return Math.max(s,c)-u<a.height()-$("#footer").height()-this.getTopNavBarHeight()},e.prototype.areElementsVisible=function(e){for(var t=0;t<e.length;t++)if(!this.isElementVisible(e[t]))return!1;return!0},e.prototype.getElementLineHeight=function(e){return parseFloat(e.css("line-height"))},e.prototype.getClosestToOffset=function(e,t){var n,o,i=null,r=t.left,a=t.top;return e.each(function(){var e=$(this),t=e.offset(),s={left:t.left,top:t.top,right:t.left+e.width(),bottom:t.top+e.height()};if(r>=s.left&&r<=s.right&&a>=s.top&&a<=s.bottom)return i=$(this),!1;for(var c=0,u=[{x:s.left,y:s.top},{x:s.right,y:s.top},{x:s.left,y:s.bottom},{x:s.right,y:s.bottom}];c<u.length;c++){var l=u[c],d=l.x-r,p=l.y-a;n=Math.sqrt(d*d+p*p),(void 0===o||n<o)&&(o=n,i=$(this))}}),i},e.prototype.getComputedTranslateY=function(e){if(null==e)return 0;var t=getComputedStyle(e),n=t.transform||t.webkitTransform||t.mozTransform,o=n.match(/^matrix3d\((.+)\)$/);if(o)return parseFloat(o[1].split(", ")[13]);if(o=n.match(/^matrix\((.+)\)$/))return parseFloat(o[1].split(", ")[5]);var i=$(e).attr("style");if(null==i)return 0;var r=i.indexOf("translateY(");return-1==r?0:parseFloat(i.substring(r+"translateY(".length))},e.prototype.getComputedTranslateX=function(e){if(!e)return 0;var t=$(e).attr("style");if(!t)return 0;var n=t.indexOf("translateX(");if(-1==n)return 0;var o=parseFloat(t.substring(n+"translateX(".length));return isNaN(o)?0:o},e.prototype.getClosestScrambledParagraph=function(e){if(null!=e){var t=$(e);if(t.is(".scrambled"))return e;if(!t.is(".readable-text")&&!t.is(".browsable-container")&&0==(t=t.closest(".readable-text, .browsable-container")).length)return null;var n=parseInt(t.attr("refid"));if(Number.isNaN(n))return null;for(var o=n+1;o<n+20;o++){var i=document.querySelector(".readable-text.scrambled[refid='"+o+"']");if(null!=i)return i}return null}},e.prototype.getVisibleParagraphs=function(e){void 0===e&&(e=!1);for(var t=[],n=a.scrollTop()+this.getTopNavBarHeight(),o=this.getLastHeader(n),i=parseInt(o.attr("refid")),r=i;r>=Math.max(i-30,0)&&i>=0;r--){if(null!=(s=document.getElementById(""+r))&&(!e||s.classList.contains("readable-text"))){if(!this.isElementVisibleEvenALittle(s))break;t.push(s)}}for(r=i+1;r<i+250;r++){var s;null==(s=document.getElementById(""+r))||e&&!s.classList.contains("readable-text")||this.isElementVisibleEvenALittle(s)&&t.push(s)}return t},e.prototype.getLastHeader=function(e){var t=this,n=i.a.getHeadings(),o=n.filter(function(n,o){return t.isHeadingVisible($(o),e)}).last();return 0==o.length?n.first():o},e.prototype.hasScrambledParagraphs=function(){return null!=document.querySelector("#book-markup-container > .readable-text.scrambled")},e}();t.a=new c},55:function(e,t,n){"use strict";var o=n(31),i=n(84),r=n(60),a=n(0),s=n(17),c=n(18),u=function(){function e(){this.numberedBookItemIndexRegExp=/(\d+\.?)+/,this.appendixIndexRegExp=/[A-Z]\.(\d+\.?)*/}return e.prototype.pretifyShortName=function(e){return e?e.replace("-"," "):e},e.prototype.convertToBookContent=function(e,t,n,o,i){var r=this.convertToBook(e);return{book:r,bookElement:this.getCurrentBookElement(r,e,t,n,o,i),previousBookElement:this.getPreviousBookElement(e,t),nextBookElement:this.getNextBookElement(e,t)}},e.prototype.convertToBook=function(e){if(!e)return null;var t=new o.a(e.id,e.manningId,e.title,e.shortName,e.description,e.lastUpdateDate,e.exercisesComingSoon,e.programmingLanguage,!0,e.userOwnsAudio,"","",e.meap,e.open,e.latestMeapVersion||0,e.highResolutionCover);return t.authors=e.authors,t.cleanTitle=s.a.cleanBookTitle(t.title),t.slug=e.slug,t.openChapters=e.openChapters||[],t.hasAudio=!!e.hasAudio,t.hasTextAddendums=!!e.hasTextAddendums,t.hasKnowledgeGraph=!!e.hasKnowledgeGraph,t.isKnowledgeGraphAccessible=!!e.isKnowledgeGraphAccessible,t.hasExercises=!!e.hasExercises,t.isReview=!!e.isReview,t.userCanViewReviews=!!e.userCanViewReviews,t.userIsReviewer=!!e.userIsReviewer,t.userOwnsPBook=!!e.userOwnsPBook,t.categories,e.categories,t},e.prototype.extractBookElementIndex=function(e){var t=new RegExp(this.appendixIndexRegExp).exec(e),n=new RegExp(this.numberedBookItemIndexRegExp).exec(e);return t&&!n?t[0]:n?n[0]:t?t[0]:""},e.prototype.extractSegmentedBookElementIndex=function(e){var t=this.extractBookElementIndex(e);return t?t.split(".").filter(function(e){return e.trim()}):[]},e.prototype.compareBookItemIndexes=function(e,t){for(var n=this.extractSegmentedBookElementIndex(e),o=this.extractSegmentedBookElementIndex(t),i=Math.max(n.length,o.length),r=0;r<i;r++){var a=n[r],s=o[r];if(!a)return-1;if(!s)return 1;var c=parseInt(a),u=parseInt(s);if(Number.isNaN(c)&&!Number.isNaN(u))return 1;if(!Number.isNaN(c)&&Number.isNaN(u))return-1;if(Number.isNaN(c)&&Number.isNaN(u)){if(a===s)continue;return a<s?-1:1}if(c!==u)return c<u?-1:1}return 0},e.prototype.cleanBookElementType=function(e){if(!e)return e;var t=this.extractBookElementIndex(e);return e.trim().replace(/^(Chapter|Part|Section|Appendix)/,"").replace(t,"").trim()},e.prototype.getCurrentBookElement=function(e,t,n,o,r,a){if(t&&t.bookElements&&0!==t.bookElements.length){var s=t.bookElements.find(function(e){return e.shortName===n});return s?((s=new i.a(e,s.id,s.title,s.shortName,s.userOwnsBookElement,s.ordinal,s.wordCount||0,s.freeWordCount||0,o,r,!0,s.meapVersion,s.location,s.isBookOverview)).content=a,s.reviewVersion=s.reviewVersion,s):null}},e.prototype.getPreviousBookElement=function(e,t){if(e&&e.bookElements&&0!==e.bookElements.length){var n=this.getCurrentBookElementIndex(e.bookElements,t);if(-1===n)return null;var o=e.bookElements[n-1];return o?new r.a(o.shortName,o.title,o.link||a.a.getBookElementUrl(e.slug,o.shortName,e.meapVersion,e.reviewVersion),o.introItems):null}},e.prototype.getNextBookElement=function(e,t){if(e&&e.bookElements&&0!==e.bookElements.length){var n=this.getCurrentBookElementIndex(e.bookElements,t);if(-1===n)return null;var o=e.bookElements[n+1];return o?new r.a(o.shortName,o.title,a.a.getBookElementUrl(e.slug,o.shortName,e.meapVersion,e.reviewVersion),o.introItems):null}},e.prototype.getCurrentBookElementIndex=function(e,t){if(!e||0===e.length)return-1;for(var n=0;n<e.length;n++)if(e[n].shortName===t)return n;return-1},e.prototype.isFreePreviewAtBeginningAndNotStarted=function(e){return null!=e&&0==e.previewDuration&&e.remainingPreviewDuration>0},e.prototype.isFreePreviewAvailable=function(e){return null!=e&&e.previewDuration>0&&e.remainingPreviewDuration>5},e.prototype.isFreePreviewAvailableAndContinuing=function(e){return null!=e&&e.previewDuration>0&&e.remainingPreviewDuration>0&&e.shortName==c.a.lastFreePreviewStartedBookShortName},e.prototype.canFreePreviewBePaused=function(e,t){return null!=e&&!e.isOpen&&(!!t&&e.remainingPreviewDuration>0)},e.prototype.hasFreePreviewExpired=function(e){return null!=e&&(!e.remainingPreviewDuration||e.remainingPreviewDuration<5)},e}();t.a=new u},6:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var o=n(0),i=n(23),r=n(12),a=!1,s=new(function(){function e(){}return e.prototype.isLoggedIn=function(e){var t=this;return void 0===e&&(e=!1),e&&(this.isLoggedInPromise=null,i.a.setAuthInfo(null)),null!=i.a.getAuthInfo()?Promise.resolve(i.a.getAuthInfo()):this.isLoggedInPromise?this.isLoggedInPromise:this.isLoggedInPromise=new Promise(function(e,n){o.a.getFromOurBackend(o.a.getAbsoluteUrl("auth/userIsLoggedIn"),function(t){a=!!t.loggedIn,t.userDetails&&t.userDetails.firstLoginDate&&(t.userDetails.firstLoginDate=r.a.getDateFromString(t.userDetails.firstLoginDate)),i.a.setAuthInfo(t),e(t)},function(){i.a.setAuthInfo(null),a=!1,e({loggedIn:!1,status:"not",userDetails:t.getEmptyUserDetails()})})})},e.prototype.createAuthorizedProductsMap=function(e){var t={};if(!e||!e.length)return t;for(var n=0,o=e;n<o.length;n++){t[o[n]]=!0}return t},e.prototype.getEmptyUserDetails=function(){return{id:-1,firstName:"",lastName:"",email:"",avatarUrl:"",tokenInfo:null,name:"",votes:[],spamCommentIds:[],authorizedProductIds:{},isNewCustomer:!0}},e.prototype.attemptLogin=function(e,t){return this.lastEmail=e,new Promise(function(n,i){o.a.attemptLogin(o.a.getAbsoluteUrl("api/auth/login"),function(e){return n(e)},function(e){return i(e)},{username:e,password:t})})},e.prototype.logout=function(){var e=this;return new Promise(function(t,n){o.a.getFromOurBackend(o.a.getAbsoluteUrl("api/auth/logout"),function(){e.deleteAuthCookies(),t()},function(){e.deleteAuthCookies(),n()})})},e.prototype.isCurrentlyLoggedIn=function(){return a},e.prototype.isExistingUser=function(){try{var e=i.a.getAuthInfo();return!(!e||!e.userDetails)&&!e.userDetails.isNewCustomer}catch(e){}return!1},e.prototype.getUserAccountStatus=function(e){return new Promise(function(t,n){o.a.getFromOurBackend(o.a.getAbsoluteUrl("api/registration/userAccountStatus"),function(e){console.log("userAccountStatus: ",e),t(e.userAccountStatus)},function(e){t("UNKNOWN"),console.log("Error retrieving user account status",e)},{email:e})})},e.prototype.registerUser=function(e,t,n,i,r){var a=this;return this.lastEmail=n,null!=this.registerUserPromise?this.registerUserPromise:this.registerUserPromise=new Promise(function(s,c){o.a.postToOurBackend(o.a.getAbsoluteUrl("api/registration/createNewUserAccount"),function(){$(document).trigger("registrationSubscribeInfo",r),a.registerUserPromise=null,s()},function(){a.registerUserPromise=null,c()},{firstName:e,lastName:t,email:n,password:i,subscribe:r})})},e.prototype.deleteAuthCookies=function(){o.a.deleteCookie("JSESSIONID"),o.a.deleteCookie("CASTGC"),o.a.deleteCookie("m-lb-rm")},e}())},60:function(e,t,n){"use strict";var o=function(){return function(e,t,n,o){void 0===o&&(o=[]),this.shortName=e,this.title=t,this.link=(n||"").replace("#!",""),this.introItems=o}}();t.a=o},61:function(e,t,n){"use strict";var o=n(4),i=$(document),r=$(window),a=!1;o.b.loadDeviceInfo().then(function(e){return a=e.isIOS});var s=function(){function e(){var e=this;this.isDisabled=!0,this.$footer=$("#footer"),i.on("disableToolbarHiding",function(){e.disableHiding(),a&&e.hideFooter()}),i.on("enableToolbarHiding",function(){e.enableHiding(),a&&e.showFooter()}),r.on("scrollstop",{latency:100},function(){var t=i.height();(t-(r.height()+r.scrollTop()))/t==0&&e.showFooter()})}return e.prototype.initialize=function(){o.b.isSmallScreenSize()&&this.$footer.headroom({tolerance:{up:2,down:0}}),this.isDisabled?this.disableHiding():this.enableHiding()},e.prototype.disableHiding=function(){this.isDisabled=!0,this.$footer.data("headroom")&&(this.$footer.data("headroom").disabled=!0)},e.prototype.enableHiding=function(){this.isDisabled=!1,this.$footer.data("headroom")&&(this.$footer.data("headroom").disabled=!1)},e.prototype.deactivateHeadroom=function(){this.$footer.data("headroom")&&(this.$footer.data("headroom").destroy(),this.$footer.removeData("headroom"))},e.prototype.hideFooter=function(){this.$footer.removeClass("headroom--pinned").addClass("headroom--unpinned")},e.prototype.showFooter=function(){this.$footer.removeClass("headroom--unpinned").addClass("headroom--pinned")},e.prototype.makeFooterTransparent=function(){this.$footer.css({opacity:0})},e.prototype.makeFooterOpaque=function(){this.$footer.css({opacity:1})},e.prototype.disableAndRevert=function(){this.disableHiding(),this.$footer.removeClass("headroom--unpinned").addClass("headroom-pinned")},e}();t.a=new s},67:function(e,t,n){"use strict";var o=n(14),i=n(5),r=$(document),a=function(){function e(){var e=this;this.$notificationBox=$("#notification-box"),0==this.$notificationBox.length&&($(document.body).append('<div id="notification-box" class="alert-box success radius hover-box">\n                    <span class="notification-content"></span>\n                    <a href="javascript:void(0)" class="close">&times;</a>\n                </div>'),this.$notificationBox=$("#notification-box")),this.$notificationContent=this.$notificationBox.find(".notification-content"),this.$notificationBox.on("click","a",function(){return e.hideNotificationBox()}),r.on("requestNotification",function(t,n){return e.showTemporaryNotification(n)}),r.on("requestPermanentNotification",function(t,n){return e.showNotification(n)}),r.on("requestLongNotification",function(t,n,o){return e.showLongNotification(n,o)}),r.on("requestNotificationTextChange",function(t,n){return e.setNotificationMessage(n)}),r.on("hideNotification",function(t){return e.hideNotificationBox()}),r.on("modalClosed",function(e,t){var n=$(t);n.is("#notifications-modal")&&n.find(".notifications-modal-message").html("")})}return e.prototype.showNotificationModal=function(e,t,n,i){void 0===n&&(n=!0);var r=$("#notifications-modal");r.find(".notifications-modal-title").text(e),r.find(".notifications-modal-message").html(t),r.find(".modal-command-row").toggleClass("hidden",!n),i&&r.find(".modal-action-button").one("click",function(){i&&i(r)}),o.a.showFoundationModal(r)},e.prototype.hideNotificationModal=function(){var e=$("#notifications-modal");e.find(".modal-action-button").off("click"),o.a.hideFoundationModal(e)},e.prototype.showNotification=function(e){this.setNotificationMessage(e),this.showNotificationBox()},e.prototype.hideNotification=function(){this.hideNotificationBox()},e.prototype.showTemporaryNotification=function(e){var t=this;this.showNotification(e),this.hideNotificationTimeout&&clearTimeout(this.hideNotificationTimeout),this.hideNotificationTimeout=setTimeout(function(){return t.hideNotificationBox()},5e3)},e.prototype.showLongNotification=function(e,t){var n=this;this.showNotification(e),t&&this.$notificationBox.find(".close").addClass(t),this.hideNotificationTimeout&&clearTimeout(this.hideNotificationTimeout),this.hideNotificationTimeout=setTimeout(function(){return n.hideNotificationBox()},15e3)},e.prototype.setNotificationMessage=function(e){this.$notificationContent.html(e)},e.prototype.showNotificationBox=function(){this.$notificationBox.css({display:"block",bottom:1.2*i.a.getFooterHeight()+"px"})},e.prototype.hideNotificationBox=function(){this.$notificationBox.css({display:"none"}),this.$notificationBox.find(".close").attr("class","close"),this.hideNotificationTimeout=null},e}();t.a=new a},68:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n(2),i=n(4),r=n(3),a=n(46),s=n(16),c=new(function(){function e(){this.loadCodeOnInteraction=this.loadCodeOnInteraction.bind(this),o.a.onPassiveEvent(document.querySelectorAll(".shopping-cart-button"),["mouseenter","touchstart","click"],this.loadCodeOnInteraction)}return e.prototype.loadCodeOnInteraction=function(e){var t=this,n="click"==e.type||i.b.isTouchEventOnTouchDevice(e.type);o.a.offPassiveEvent(document.querySelectorAll(".shopping-cart-button"),[e.type],this.loadCodeOnInteraction),this.getSource().then(function(e){var i=e.ShoppingCartManager;n&&i.requestMenuOpen(),o.a.offPassiveEvent(document.querySelectorAll(".shopping-cart-button"),["mouseenter","touchstart","click"],t.loadCodeOnInteraction)})},e.prototype.requestMenuOpen=function(){Promise.all([this.getSource()]).then(function(e){var t=e[0].ShoppingCartManager;t&&t.requestMenuOpen()})},e.prototype.requestAddBookToCartByBookShortName=function(e,t){return Promise.all([this.getSource(),a.a.getCatalog()]).then(function(n){var o=n[0].ShoppingCartManager,i=n[1],r=null!=i&&i.length>0?i.find(function(t){return t.shortName==e}):null;null!=r&&o&&o.requestAddBookToCart(r,!1,t)})},e.prototype.requestAddBookToCart=function(e,t,n,o,i){void 0===o&&(o=!1),void 0===i&&(i=!1),Promise.all([this.getSource()]).then(function(r){var a=r[0].ShoppingCartManager;a&&a.requestAddBookToCart(e,t,n,o,i)})},e.prototype.requestAddNewerEditionToCart=function(e){Promise.all([this.getSource()]).then(function(t){t[0].ShoppingCartManager.requestAddNewerEditionToCart(e)})},e.prototype.getProductOfferings=function(e){var t=this;return new Promise(function(n,o){Promise.all([t.getSource()]).then(function(t){var o=t[0].ShoppingCartManager;n(o.getProductOfferings(e))}).catch(function(e){return o(e)})})},e.prototype.getNewestEditionProduct=function(e){var t=this;return new Promise(function(n,o){Promise.all([t.getSource()]).then(function(t){var o=t[0].ShoppingCartManager;n(o.getNewestEditionProduct(e))}).catch(function(e){return o(e)})})},e.prototype.getProductDiscounts=function(e,t){var n=this;return new Promise(function(o,i){Promise.all([n.getSource()]).then(function(n){var i=n[0].ShoppingCartManager;o(i.getProductDiscounts(e,t))}).catch(function(e){return i(e)})})},e.prototype.isDotd=function(e){var t=this;return new Promise(function(n,o){Promise.all([t.getSource()]).then(function(t){var o=t[0].ShoppingCartManager;n(o.isDotd(e))}).catch(function(e){return o(e)})})},e.prototype.getTokenProductOffering=function(){var e=this;return new Promise(function(t,n){Promise.all([e.getSource()]).then(function(e){var n=e[0].ShoppingCartManager;t(n.getTokenProductOffering())})})},e.prototype.addTokensToCart=function(e){var t=this;return new Promise(function(n,o){Promise.all([t.getSource()]).then(function(t){var o=t[0].ShoppingCartManager;n(o.addTokensToCart(e))}).catch(function(e){return o(e)})})},e.prototype.automaticallyOpenWhenInitialized=function(){Promise.all([this.getSource()]).then(function(e){e[0].ShoppingCartManager.automaticallyOpenWhenInitialized()})},e.prototype.getBookPrice=function(e){var t=this;return new Promise(function(n,o){Promise.all([t.getSource()]).then(function(t){var o=t[0].ShoppingCartManager;n(o.getBookPrice(e))}).catch(function(e){return o(e)})})},e.prototype.initializeShoppingCartStore=function(){var e=this;return new Promise(function(t,n){Promise.all([e.getSource()]).then(function(e){var n=e[0].ShoppingCartManager;t(n.initializeShoppingCartStore())}).catch(function(e){return n(e)})})},e.prototype.getProductSpendingInfo=function(e){var t=this;return new Promise(function(n,o){Promise.all([t.getSource()]).then(function(t){var o=t[0].ShoppingCartManager;n(o.getProductSpendingInfo(e))}).catch(function(e){return o(e)})})},e.prototype.isEbookInShoppingCart=function(e){if(e)return null!=this.getShoppingCartItems().find(function(t){return t.productId===e.manningId&&!t.isCombo})},e.prototype.isComboInShoppingCart=function(e){if(e)return null!=this.getShoppingCartItems().find(function(t){return t.productId===e.manningId&&t.isCombo})},e.prototype.isAudioInShoppingCart=function(e){if(e)return null!=this.getShoppingCartItems().find(function(t){return t.productId===e.manningId&&null!=t.childItems&&t.childItems.length>0&&null!=t.childItems.find(function(e){return e.isSelected})})},e.prototype.isInShoppingCartByManningId=function(e){return!!e&&null!=this.getShoppingCartItems().find(function(t){return t.productId==e})},e.prototype.getShoppingCartItems=function(){return JSON.parse(s.a.getItem("shopping-cart-items")||"[]")},e.prototype.requestOpenLogin=function(){var e=this;return new Promise(function(t,n){Promise.all([e.getSource()]).then(function(e){var n=e[0].ShoppingCartManager;t(n.showLoginModal())}).catch(function(e){return n(e)})})},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=r.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return Promise.all([n.e(42),n.e(0),n.e(1),n.e(2),n.e(33)]).then(n.bind(null,318))},e}())},69:function(e,t,n){"use strict";var o=n(2),i=n(4),r=n(5),a=$(document),s=$(window),c=i.b.isIE(),u=i.b.isIOS(),l=function(){function e(e,t,n,i,r,c,l){var d=this;this.isMenuOpening=!1,this.isPinned=!1,this.$button=e,this.$menu=t,this.$additionalAssociatedElements=l,this.beforeOpenMenuCallback=n,this.afterMenuOpenedCallback=i,this.onMenuClosedCallback=c,this.$topBar=$("#top-bar-container"),this.$footer=$("#footer"),this.$input=this.$menu.find("input").filter(function(e,t){return"text"===t.type}),this.$input.length&&u&&this.$input.on("touchstart",function(){return window.scrollTo(0,0)}),this.$menu.is(".closed")&&this.$menu.css("transform","translateY(-"+this.$menu.height()+"px)"),r||this.$menu.children().first().on("mousewheel DOMMouseScroll",function(e){return d.handleScroll(e)}),o.a.onEventWithCooldown(this.$menu.find(".pin"),"click touchstart",function(e){var t=$(e.currentTarget);d.isPinned=!d.isPinned,t.toggleClass("unpinned",!d.isPinned)}),a.on("topbarToggled",function(){d.dontCloseOnTopBarToggle||d.closeMenu(!0)}),a.on("click",function(e){return d.handleDocumentClick(e.target)}),a.on("slideMenuOpened",function(e,t){return d.handleSlideMenuOpened(t)}),a.on("slideMenuCloseRequested",function(){return d.isMenuOpened()&&d.closeMenu()}),a.on("slideMenuOpenRequested",function(e,t){return t===d.$button[0]&&d.openMenu()}),o.a.onEventWithCooldown(e,"click touchstart",function(){return d.handleToggleMenuButtonClick()});this.$topBar.height();this.lastScreenWidth=s.width(),this.handleResize=this.handleResize.bind(this),s.on("resizestop",this.handleResize)}return e.prototype.handleResize=function(e,t){var n=this,i=this.$topBar.height(),a=s.width();this.isMenuOpened()&&(this.$menu.css("transform","translateY("+(r.a.getComputedTranslateY(this.$topBar.get(0))+i)+"px)"),this.lastScreenWidth!=a&&(this.positionMenuHorizontally(),this.lastScreenWidth=a)),t||o.a.setTimeout(function(){return n.handleResize(null,!0)},200)},e.prototype.setAssociatedElement=function(e){this.$additionalAssociatedElements=e},e.prototype.openMenu=function(e){var t=this;this.isMenuOpened()||(this.beforeOpenMenuCallback&&this.beforeOpenMenuCallback(),this.$menu.velocity({translateY:-this.$menu.height()},{duration:0}),u||c?setTimeout(function(){return t.performActualOpening(e)},5):this.performActualOpening(e))},e.prototype.performActualOpening=function(t){var n=this;this.isMenuOpening=!0,a.trigger("slideMenuStartOpening",[this.$menu]),a.trigger("slideMenuOpened",[this.$menu]),this.$button.addClass("selected");var o=0;this.shouldHorizontallyCenter&&(o="-50%"),this.positionMenuHorizontally();var i=r.a.getComputedTranslateY(this.$topBar.get(0)),c=s.height()-this.$topBar.height()-i-1-$("#footer").height();this.dontGoFullScreenHeight||this.$menu.children(".slide-in-menu-container").css("height",c),this.$menu.removeClass("closed"),o&&this.$menu.velocity({translateX:o},{duration:0}),this.$menu.velocity({translateX:o,translateY:this.$topBar.height()+i,opacity:1},{duration:300,complete:function(){e.isSideMenuOpened=!0,e.$openedMenu=n.$menu,n.isMenuOpening=!1,n.afterMenuOpenedCallback&&n.afterMenuOpenedCallback(),t&&t()}}),e.isSideMenuOpened=!0,e.$openedMenu=this.$menu},e.prototype.positionMenuHorizontally=function(){var e=this.$menu.width(),t=this.$button.filter(function(e,t){return jQuery.expr.filters.visible(t)});if(null!=t&&0!=t.length||(t=this.$button),this.shouldHorizontallyCenter)this.$menu.css({left:"50%",transform:"translate(-50%, 0)"});else{var n=t.offset().left+t.width()/2,o=s.width();n+e/2<o&&n-e/2>0?this.$menu.css({left:n-e/2}):n-e/2<0?this.$menu.css({left:0}):n+e/2>o&&this.$menu.css({left:"",right:0})}},e.prototype.closeMenu=function(t){var n=this;this.$button.removeClass("selected"),this.isMenuClosed()&&!this.isMenuOpening||(a.trigger("slideMenuClosed"),this.$button.removeClass("selected"),this.$menu.velocity({translateY:-this.$menu.height(),opacity:0},{duration:t?0:150,complete:function(){n.$menu.addClass("closed"),e.isSideMenuOpened=!1,e.$openedMenu=null,n.onMenuClosedCallback&&n.onMenuClosedCallback()}}))},e.prototype.isMenuClosed=function(){return!this.$menu[0]||(this.$menu.offset().top<0||this.$menu.is(".closed"))},e.prototype.isMenuOpened=function(){return!this.$menu[0]||this.$menu.offset().top>0&&!this.$menu.is(".closed")},e.prototype.handleToggleMenuButtonClick=function(){this.isMenuOpened()?this.closeMenu():this.openMenu()},e.prototype.handleDocumentClick=function(e){if(0!==this.$button.filter(function(e){return jQuery.expr.filters.visible(e)}).length){var t=this.$menu,n=this.$button,o=this.$additionalAssociatedElements||$(null);t.is(e)||0!==t.has(e).length||n.is(e)||0!==n.has(e).length||!this.isMenuOpened()||$(e).is(".hopscotch-next")||o.is(e)||0!==o.has(e).length||this.isPinned||this.closeMenu()}},e.prototype.handleSlideMenuOpened=function(e){e!==this.$menu&&this.closeMenu(!0)},e.prototype.handleScroll=function(e){var t=e.originalEvent,n=e.currentTarget,o=t.wheelDelta||-t.detail,i=n.scrollTop+$(n).outerHeight()-n.scrollHeight>=-5,r=n.scrollTop<=0;if(o<0&&i||o>0&&r)return e.preventDefault(),!1},e}();t.a=l},70:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var o=n(2),i=n(4),r=n(3),a=new(function(){function e(){this.loadCodeOnInteraction=this.loadCodeOnInteraction.bind(this),o.a.onPassiveEvent(document.querySelectorAll(".faq-link, .tour-link, .help-button"),["mouseenter","touchstart","click"],this.loadCodeOnInteraction),$(document).on("click",".more-information-link",this.loadCodeOnInteraction)}return e.prototype.initialize=function(){var e=this;this.getSource().then(function(){e.unsubscribeInteractionEvents()})},e.prototype.loadCodeOnInteraction=function(e){var t=this,n=$(e.target),r="click"==e.type||i.b.isTouchEventOnTouchDevice(e.type);o.a.offPassiveEvent(document.querySelectorAll(".faq-link, .tour-link, .help-button"),[e.type],this.loadCodeOnInteraction),this.getSource().then(function(e){var o=e.HelpInfoFeedback;r&&(n.is(".more-information-link")?o.openTooltip():o.showMoreInformationModal()),t.unsubscribeInteractionEvents()})},e.prototype.unsubscribeInteractionEvents=function(){$(document).off("click",".more-information-link",this.loadCodeOnInteraction),o.a.offPassiveEvent(document.querySelectorAll(".faq-link, .tour-link, .help-button, .more-information-link"),["mouseenter","touchstart","click"],this.loadCodeOnInteraction)},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=r.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.renderMeapInfoModal=function(e,t){this.getSource().then(function(n){n.HelpInfoFeedback.showMeapNotification(e,t)})},e.prototype.renderErrorReportModal=function(){r.a.importWebpackModuleWithRetry(this.constructSourcePromiseErrorManager).then(function(e){e.ErrorReportManager.render(!0)})},e.prototype.constructSourcePromise=function(){return Promise.all([n.e(0),n.e(1),n.e(45),n.e(24)]).then(n.bind(null,321))},e.prototype.constructSourcePromiseErrorManager=function(){return Promise.all([n.e(0),n.e(1),n.e(45),n.e(24)]).then(n.bind(null,313))},e.prototype.clean=function(){this.sourcePromise&&this.sourcePromise.then(function(e){return e.HelpInfoFeedback.clean()})},e}())},83:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o='<div class="row" id="book-content-main-row">\n<div class="large-12 columns">\n    <div id="book-main-content-container">\n        <div id="track-point-column" class="hidden">\n            <div class="track-point-wrapper" id="pointing-start-point">\n                <i class="fa fa-level-down fa-flip-horizontal" aria-hidden="true"></i>\n            </div>\n            <div class="track-point-wrapper" id="pointing-end-point">\n                <i class="fa fa-level-up fa-flip-horizontal" aria-hidden="true"></i>\n            </div>\n            <div class="track-point-wrapper" id="play-point">\n                <div class="track-point">\n                    <i class="icon-i-play-triangle"></i>\n                </div>\n            </div>\n            <div class="track-point-wrapper" id="current-position-point">\n                <div class="track-point">\n                    <div class="track-point-play">\n                        <i></i>\n                    </div>\n                </div>\n            </div>\n            <div class="track-point-wrapper" id="off-screen-position-point">\n                <div class="track-point">\n                    <div class="off-screen-position-point-arrow-container">\n                        <i class=""></i>\n                    </div>\n                </div>\n            </div>\n            <div class="track-point-wrapper" id="restart-paragraph-point">\n                <div class="track-point">\n                    <i class="fa fa-repeat"></i>\n                </div>\n            </div>\n            <div class="track-point-wrapper" id="free-preview-point">\n                <div class="track-point">\n                    <i class="fa fa-unlock"></i>\n                </div>\n            </div>\n        </div>\n        <div id="book-markup-container">\n            <div class="readable-text">\n                <h1>{{BOOK_ELEMENT_TITLE}}</h1>\n            </div>\n            <div class="introduction-summary">\n                <h3>This chapter covers</h3>\n                <ul>\n                    <li class="readable-text"><span class="placeholder" style="margin-right: 30px"><span class="placeholder-animated-background">&nbsp;</span></span></li>\n                    <li class="readable-text"><span class="placeholder"><span class="placeholder-animated-background">&nbsp;</span></span></li>\n                    <li class="readable-text"><span class="placeholder" style="margin-right: 60px"><span class="placeholder-animated-background">&nbsp;</span></span></li>\n                </ul>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 30px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 10px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 70px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="loading-page-image-placeholder"></div>\n\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 30px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 10px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 80px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="loading-page-image-placeholder"></div>\n            <div class="readable-text">\n                <span class="placeholder"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 30px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 10px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 70px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 10px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="loading-page-image-placeholder"></div>\n\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 30px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 10px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 80px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 30px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 10px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="readable-text">\n                <span class="placeholder" style="margin-right: 80px"><span class="placeholder-animated-background">&nbsp;</span></span>\n            </div>\n            <div class="loading-page-image-placeholder"></div>\n        </div>\n        <div id="text-margin-icons-container"></div>\n    </div>\n</div>\n</div>'},84:function(e,t,n){"use strict";var o=function(){return function(e,t,n,o,i,r,a,s,c,u,l,d,p,h){this.book=e,this.id=t,this.title=n,this.shortName=o,this.userOwnsBookElement=i,this.ordinal=r,this.wordCount=Math.max(a||0,0),this.freeWordCount=Math.max(s||0,0),this.audioLocation=c,this.subtitlesLocation=u,this.isOpen=l,this.meapVersion=d,this.location=p,this.isBookOverview=h}}();t.a=o},85:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var o=n(16),i=new(function(){function e(){}return e.prototype.isFreeEbookOpen=function(e){try{return!!JSON.parse(o.a.getItem("OPEN_FREE_EBOOKS")||"{}")[e]}catch(e){return!1}},e.prototype.openCurrentFreeEbook=function(e){try{var t=JSON.parse(o.a.getItem("OPEN_FREE_EBOOKS")||"{}");t[e]=!0,o.a.setItem("OPEN_FREE_EBOOKS",JSON.stringify(t))}catch(e){}},e}())},86:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n(2),i=n(4),r=n(18),a=n(6),s=n(28),c=n(3),u=new(function(){function e(){}return e.prototype.initialize=function(){this.loadCodeOnInteraction=this.loadCodeOnInteraction.bind(this)},e.prototype.clean=function(){Promise.all([this.getSource()]).then(function(e){return e[0].DiscussionsMenu.clean()})},e.prototype.load=function(e){void 0===e&&(e=""),this.getSource().then(function(t){return t.DiscussionsMenu.initialize(r.a.book,r.a.bookElement,e)})},e.prototype.loadCodeOnInteraction=function(e){var t=this,n="click"==e.type||i.b.isTouchEventOnTouchDevice(e.type);o.a.offPassiveEvent(document.querySelectorAll(".discussions-menu-button"),[e.type],this.loadCodeOnInteraction),this.getSource().then(function(i){var a=i.DiscussionsMenu;n&&(a.initialize(r.a.book,r.a.bookElement),a.open()),o.a.offPassiveEvent(document.querySelectorAll(".discussions-menu-button"),n?["mouseenter","touchstart","click"]:[e.type],t.loadCodeOnInteraction)}),e&&e.stopImmediatePropagation()},e.prototype.requestOpen=function(){Promise.all([this.getSource()]).then(function(e){return e[0].DiscussionsMenu.open()})},e.prototype.requestShowCommentWhenReady=function(e,t,n,o){void 0===t&&(t=0);var i="",r=!1,c=!1,u=!1;0==e.indexOf("not-spam-")?(c=!0,i=e.substring("not-spam-".length)):0==e.indexOf("spam-")?(r=!0,i=e.substring("spam-".length)):0==e.indexOf("edit-suggestion-")?(u=!0,i=e.substring("edit-suggestion-".length)):i=e,Promise.all([this.getSource()]).then(function(e){var l=e[0].DiscussionsMenu;function d(e){void 0===e&&(e=n),l.showCommentWhenReady(i,t,e,o)}r||u||c?a.a.isLoggedIn().then(function(e){e.loggedIn?r?d(function(){l.markAsSpam(i),n&&n()}):c?d(function(){$(document).trigger("requestNotification","Removing spam flags"),l.clearSpamFlags(i).then(function(){$(document).trigger("requestNotification","Spam flags removed!")}).catch(function(e){return $(document).trigger("requestNotification","Error removing spam flags")})}):u&&l.markAsEditSuggestion(i).then(function(){return d()}).catch(function(){return d()}):s.a.requestLogin("sign in to discuss","discussion")}):d()})},e.prototype.requestOpenParagraphSideMenu=function(e){Promise.all([this.getSource()]).then(function(t){t[0].DiscussionsMenu.openParagraphSideMenu(e)})},e.prototype.getSource=function(){return this.sourcePromise||(this.sourcePromise=c.a.importWebpackModuleWithRetry(this.constructSourcePromise)),this.sourcePromise},e.prototype.constructSourcePromise=function(){return Promise.all([n.e(6),n.e(39),n.e(0),n.e(1),n.e(17)]).then(n.bind(null,314))},e}())},9:function(e,t,n){"use strict";var o=n(0),i=function(){function e(){}return e.prototype.fetch=function(){return this.settingsPromise?this.settingsPromise:this.settingsPromise=new Promise(function(e,t){o.a.postToOurBackend(o.a.getAbsoluteUrl("api/userInfo/getUserSettings"),function(t){"string"==typeof t&&("[]"===t&&(t="{}"),t=JSON.parse(t)),e(t)},function(t){console.log("Getting settings failed",t),e({})})})},e.prototype.update=function(e){return new Promise(function(t,n){o.a.postToOurBackend(o.a.getAbsoluteUrl("api/userInfo/storeUserSettings"),function(e){return t(!0)},function(e){return t(!1)},e)})},e}(),r=n(32),a=function(){function e(){}return e.prototype.fetch=function(){return this.settingsPromise?this.settingsPromise:r.a.loadSettings()},e.prototype.update=function(e){return r.a.updateSettings(e)},e}(),s=n(4),c=n(16),u=n(6),l=$(document),d=function(){function e(){var e=this;this.internalStorage=this.getDefaultSettings(),s.b.loadDeviceInfo().then(function(t){e.settingsService=e.getSettingsService(t.platform),u.a.isLoggedIn().then(function(t){return!!t.loggedIn&&e.fetchSettings()})})}return e.prototype.fetchSettings=function(){var e=this;this.settingsService.fetch().then(function(t){e.internalStorage=Object.assign(e.internalStorage,t),l.trigger("settingsUpdated",e.internalStorage)})},e.prototype.set=function(e,t){var n=this;this.internalStorage[e]!=t&&(this.internalStorage[e]=t,clearTimeout(this.syncTimerID),this.syncTimerID=setTimeout(function(){return n.sync()},1500),l.trigger("settingsUpdated",this.internalStorage))},e.prototype.get=function(e){return this.internalStorage[e]},e.prototype.getHighlightColor=function(){return this.get("highlightColor")},e.prototype.setHighlightColor=function(e){this.set("highlightColor",e)},e.prototype.sync=function(){this.settingsService.update(this.internalStorage),c.a.setItem("settings",JSON.stringify(this.internalStorage))},e.prototype.getSettingsService=function(e){switch(e){case s.a.Browser:return new i;case s.a.Cordova:case s.a.Electron:return new a}},e.prototype.getDefaultSettings=function(){var e={"browsable-pause-type":"browsable-pause-pause","sound-effects-enabled":!1,"night-mode":!1,volume:1,speed:1,"unread-text-visibility":"full-visible",highlightColor:"yellow","text-size":"standard","feedback-submitted":!1,"tour-taken":!1,"tour-offered":!1,"live-audio-disabled":!1,"update-history-on-scroll":!0,"discussions-offered":!1,"discussions-email-notifications-offered":!1,"discussions-code-of-conduct-shown":!1,"stop-showing-error-reports-modal":!1,"error-modal-last-shown":null,"email-subscription-offered":!1,"email-subscription-taken":!1,"settings-menu-highlighted":!1,"position-and-reading-info-disabled":!1};try{e=Object.assign(e,JSON.parse(c.a.getItem("settings")))}catch(e){}return e},e}();t.a=new d}});
//# sourceMappingURL=app.js.map